# ==================================================
# Path: E:\Project\CheckInn
# Detected tech: docker, gitlab_ci, javascript, python, react, typescript
# ==================================================

## DIRECTORY STRUCTURE
```
CheckInn/
â”œâ”€â”€ .git/
â”œâ”€â”€ .vscode/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â”œâ”€â”€ login.js
â”‚   â”‚   â”œâ”€â”€ profile.js
â”‚   â”‚   â””â”€â”€ register.js
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ adminSetup.js
â”‚   â”œâ”€â”€ booking/
â”‚   â”‚   â””â”€â”€ booking.js
â”‚   â”œâ”€â”€ checkout/
â”‚   â”‚   â””â”€â”€ checkout.js
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ usertable.js
â”‚   â”œâ”€â”€ detail/
â”‚   â”‚   â””â”€â”€ detail.js
â”‚   â”œâ”€â”€ favorite/
â”‚   â”‚   â””â”€â”€ favorite.js
â”‚   â”œâ”€â”€ homepage/
â”‚   â”‚   â””â”€â”€ soft.js
â”‚   â”œâ”€â”€ hotel_manager/
â”‚   â”‚   â”œâ”€â”€ hotel.js
â”‚   â”‚   â””â”€â”€ room.js
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â””â”€â”€ searchhotel.js
â”‚   â””â”€â”€ tinhthanhvn.js
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ build/
â”‚   â”œâ”€â”€ node_modules/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ 404notfound.jpg
â”‚   â”‚   â”œâ”€â”€ HP1.png
â”‚   â”‚   â”œâ”€â”€ Hp.png
â”‚   â”‚   â”œâ”€â”€ LogoCheckInnReal.png
â”‚   â”‚   â”œâ”€â”€ StayNightLogoo.png
â”‚   â”‚   â”œâ”€â”€ apple.png
â”‚   â”‚   â”œâ”€â”€ bg.png
â”‚   â”‚   â”œâ”€â”€ checkin-icon.svg
â”‚   â”‚   â”œâ”€â”€ checkin-logo.svg
â”‚   â”‚   â”œâ”€â”€ facebook.svg
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â”œâ”€â”€ fb.png
â”‚   â”‚   â”œâ”€â”€ figma.png
â”‚   â”‚   â”œâ”€â”€ gg.png
â”‚   â”‚   â”œâ”€â”€ google.png
â”‚   â”‚   â”œâ”€â”€ image.png
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ logo192.png
â”‚   â”‚   â”œâ”€â”€ logo512.png
â”‚   â”‚   â”œâ”€â”€ logostaynight.png
â”‚   â”‚   â”œâ”€â”€ logovip.png
â”‚   â”‚   â”œâ”€â”€ manifest.json
â”‚   â”‚   â”œâ”€â”€ phong1.png
â”‚   â”‚   â”œâ”€â”€ register.png
â”‚   â”‚   â”œâ”€â”€ robots.txt
â”‚   â”‚   â”œâ”€â”€ rvhcm.png
â”‚   â”‚   â”œâ”€â”€ screenshot-for-readme-1.png
â”‚   â”‚   â”œâ”€â”€ screenshot-for-readme-2.png
â”‚   â”‚   â”œâ”€â”€ screenshot-for-readme-3.png
â”‚   â”‚   â”œâ”€â”€ vite.svg
â”‚   â”‚   â””â”€â”€ x.png
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FavoritesPage.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilePage.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Register.css
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”‚   â”‚   â”œâ”€â”€ checked.png
â”‚   â”‚   â”‚   â”œâ”€â”€ customer-service.png
â”‚   â”‚   â”‚   â””â”€â”€ insurance.png
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ BookingStatus/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BookingCard.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RatingDrawer.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Checkout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Payment.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RoomInfo.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Success.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Summary.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ confirm-payment.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DetailHotel/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HotelImage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Introduce.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Introduce.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Orderroom.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RatingCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DetailRoom/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DetailRoom.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FavoritesPage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FavoriteRoomsDrawer.css
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FavoritesPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HomeNavbar.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Mostpopularguests.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PopularDestinations.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchPlaces.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Tophotel.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ endow.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ imagehome.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Map/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MapPicker.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchPage/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Filter.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HotelItem.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HotelList.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchHotel.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Searchpage.css
â”‚   â”‚   â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BookingHistory.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChangePasswordDrawer.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditProfileDrawer.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditProfileDrawer.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ForgetPassword.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingModal.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Profilevip.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RatingComponent.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Register.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Resetpassword.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profilevip.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AIPoweredInsights.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChannelPerformance.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerSegmentation.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OverviewCards.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductPerformance.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserRetention.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ StatCard.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hotelmanage/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddHotelModal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddRoom.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditHotelModal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditRoomDrawer.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HotelTable.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MyHotelTable.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RoomListDrawer.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SalesTrendChart.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BookingDetailsModal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DailyOrders.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeleteModal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditBookingModal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderDistribution.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrdersTable.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpdateStatusModal.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ overview/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryDistributionChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SalesChannelChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SalesOverviewChart.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sales/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DailySalesTrend.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SalesByCategoryChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SalesOverviewChart.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConnectedAccounts.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DangerZone.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Notifications.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Security.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SettingSection.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ToggleSwitch.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UserActivityHeatmap.jsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UserDemographicsChart.jsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UserGrowthChart.jsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UsersTable.jsx
â”‚   â”‚   â”‚   â””â”€â”€ hotel_manager/
â”‚   â”‚   â”‚       â”œâ”€â”€ AddHotel.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ HotelDetail.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ HotelRooms.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ MyHotel.jsx
â”‚   â”‚   â”‚       â””â”€â”€ RoomDetail.jsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Admin/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AnalyticsPage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HotelManagerPage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrdersPage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OverviewPage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SalesPage.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UsersPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AllRole/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RegisterPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BookingStatusPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CheckoutPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DetailHotelPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DetailRoomPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotFoundPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ OverviewPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilePage.jsx
â”‚   â”‚   â”‚   â””â”€â”€ SearchPage.jsx
â”‚   â”‚   â”œâ”€â”€ redux/
â”‚   â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ counterSlice.js
â”‚   â”‚   â”‚   â””â”€â”€ store.js
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”œâ”€â”€ App.js
â”‚   â”‚   â”œâ”€â”€ App.test.js
â”‚   â”‚   â”œâ”€â”€ index.css
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â”œâ”€â”€ reportWebVitals.js
â”‚   â”‚   â””â”€â”€ setupTests.js
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ cloudinary.js
â”‚   â””â”€â”€ db.js
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ userController.js
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ adminAuth.js
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ bookingValidation.js
â”‚   â”œâ”€â”€ logger.js
â”‚   â”œâ”€â”€ rateLimiter.js
â”‚   â”œâ”€â”€ upload.js
â”‚   â””â”€â”€ validation.js
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ Booking.js
â”‚   â”œâ”€â”€ Favorite.js
â”‚   â”œâ”€â”€ Hotel.js
â”‚   â”œâ”€â”€ Rate.js
â”‚   â”œâ”€â”€ Room.js
â”‚   â””â”€â”€ User.js
â”œâ”€â”€ node_modules/
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ BRAND_GUIDE.md
â”œâ”€â”€ SECURITY_CHECKLIST.md
â”œâ”€â”€ generate-logos.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ seedAdmin.js
â”œâ”€â”€ server.js
â”œâ”€â”€ start-servers.bat
â”œâ”€â”€ start-servers.ps1
â””â”€â”€ tailwind.config.js
```

## FILE CONTENTS

### generate-logos.js
```js
const fs = require('fs');
const path = require('path');

// Script Ä‘á»ƒ táº¡o cÃ¡c file logo cáº§n thiáº¿t cho CheckInn
console.log('ğŸš€ Setting up CheckInn logos...\n');

// Táº¡o favicon Ä‘Æ¡n giáº£n tá»« SVG icon
function createFaviconSVG() {
  const faviconSVG = `<svg width="32" height="32" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1E40AF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="keyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EAB308;stop-opacity:1" />
    </linearGradient>
  </defs>
  <circle cx="256" cy="256" r="240" fill="url(#iconGradient)" />
  <g transform="translate(156, 156)">
    <circle cx="100" cy="100" r="60" fill="none" stroke="url(#keyGradient)" stroke-width="15"/>
    <circle cx="100" cy="100" r="30" fill="none" stroke="url(#keyGradient)" stroke-width="12"/>
    <rect x="160" y="85" width="100" height="30" fill="url(#keyGradient)" rx="15"/>
    <rect x="240" y="115" width="20" height="40" fill="url(#keyGradient)"/>
    <rect x="220" y="115" width="15" height="25" fill="url(#keyGradient)"/>
    <path d="M 70 100 L 90 120 L 130 80" stroke="#FFFFFF" stroke-width="12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
  </g>
  <g transform="translate(256, 380)">
    <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="120" font-weight="600" fill="#FFFFFF" opacity="0.9">CI</text>
  </g>
</svg>`;

  fs.writeFileSync('./client/public/favicon.svg', faviconSVG);
  console.log('âœ… Created: favicon.svg (32x32 optimized)');
}

// Copy vÃ  rename files
function setupLogoFiles() {
  try {
    // Copy main logo vá»›i tÃªn chuáº©n
    if (fs.existsSync('./client/public/checkin-logo.svg')) {
      fs.copyFileSync('./client/public/checkin-logo.svg', './client/public/logo-main.svg');
      console.log('âœ… Created: logo-main.svg');
    }

    // Copy icon vá»›i tÃªn chuáº©n cho manifest
    if (fs.existsSync('./client/public/checkin-icon.svg')) {
      fs.copyFileSync('./client/public/checkin-icon.svg', './client/public/logo512.svg');
      fs.copyFileSync('./client/public/checkin-icon.svg', './client/public/logo192.svg');
      console.log('âœ… Created: logo192.svg, logo512.svg');
    }

    // Táº¡o favicon
    createFaviconSVG();

    console.log('\nğŸ‰ Logo setup completed!');
    console.log('\nğŸ“ Available logo files:');
    console.log('   - checkin-logo.svg (Main logo with text)');
    console.log('   - checkin-logo-mono.svg (Monochrome version)');
    console.log('   - checkin-icon.svg (App icon)');
    console.log('   - logo-main.svg (Copy of main logo)');
    console.log('   - logo192.svg, logo512.svg (Manifest icons)');
    console.log('   - favicon.svg (Browser icon)');
    console.log('\nğŸ“‹ Next steps:');
    console.log('   1. Update HTML files to use new logos');
    console.log('   2. Update React components');
    console.log('   3. Update manifest.json');
    console.log('   4. Test on different screen sizes');
    
  } catch (error) {
    console.error('âŒ Error setting up logo files:', error.message);
  }
}

// Run setup
setupLogoFiles();
```

### postcss.config.js
```js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

```

### seedAdmin.js
```js
const mongoose = require('mongoose');
const User = require('./models/User');
require('dotenv').config();

const createAdminUser = async () => {
  try {
    // Káº¿t ná»‘i MongoDB
    await mongoose.connect(process.env.MONGO_URI);
    console.log('MongoDB connected successfully');

    // Kiá»ƒm tra xem Ä‘Ã£ cÃ³ admin chÆ°a
    const existingAdmin = await User.findOne({ email: 'admin@checkinn.com' });
    
    if (existingAdmin) {
      console.log('Admin user already exists');
      console.log('Email: admin@checkinn.com');
      console.log('Role:', existingAdmin.role);
      return;
    }

    // Táº¡o tÃ i khoáº£n admin má»›i
    const adminUser = new User({
      name: 'CheckInn Administrator',
      email: 'admin@checkinn.com',
      password: 'admin123456', // Máº­t kháº©u sáº½ Ä‘Æ°á»£c mÃ£ hÃ³a tá»± Ä‘á»™ng
      role: 'Admin',
      isVerified: true,
      age: 30,
      avatar: '/LogoCheckInnReal.png'
    });

    await adminUser.save();
    
    console.log('âœ… Admin user created successfully!');
    console.log('ğŸ“§ Email: admin@checkinn.com');
    console.log('ğŸ”‘ Password: admin123456');
    console.log('ğŸ‘¤ Role: Admin');
    console.log('');
    console.log('âš ï¸  QUAN TRá»ŒNG: HÃ£y Ä‘á»•i máº­t kháº©u sau khi Ä‘Äƒng nháº­p láº§n Ä‘áº§u!');

  } catch (error) {
    console.error('âŒ Error creating admin user:', error);
  } finally {
    await mongoose.connection.close();
    console.log('Database connection closed');
  }
};

// Cháº¡y script náº¿u Ä‘Æ°á»£c gá»i trá»±c tiáº¿p
if (require.main === module) {
  createAdminUser();
}

module.exports = createAdminUser;
```

### server.js
```js
// server.js
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const mongoSanitize = require('express-mongo-sanitize');
const connectDB = require('./config/db');
const userapi = require('./api/account/register'); // Nháº­p route ngÆ°á»i dÃ¹ng
const loginRoute = require('./api/account/login');
const userTableRouter = require('./api/dashboard/usertable');
const hotelapi = require('./api/hotel_manager/hotel');
const Room = require('./api/hotel_manager/room'); 
const Profile = require('./api/account/profile'); 
const Booking = require('./api/booking/booking'); 
const HomePage = require('./api/homepage/soft');// ÄÆ°á»ng dáº«n má»›i cho room
const Detail = require('./api/detail/detail');
const Checkout = require('./api/checkout/checkout');
const SearchHotel = require('./api/search/searchhotel');
const Favorite = require('./api/favorite/favorite');
const tinhthanhvn = require('./api/tinhthanhvn');
const adminSetupRouter = require('./api/admin/adminSetup'); // Import admin setup router
const dotenv = require('dotenv');
const cookieParser = require('cookie-parser');
const { generalLimiter } = require('./middleware/rateLimiter');

const app = express();

// Trust proxy for rate limiting
app.set('trust proxy', 1);

// Káº¿t ná»‘i Ä‘áº¿n MongoDB
connectDB();

// Gá»i dotenv
dotenv.config();

// Security middleware
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", "data:", "https://res.cloudinary.com"],
      connectSrc: ["'self'"],
      fontSrc: ["'self'", "https://fonts.gstatic.com"],
    },
  },
}));

// Sanitize MongoDB queries
app.use(mongoSanitize());

// Rate limiting
app.use(generalLimiter);

// Sá»­ dá»¥ng cookie-parser
app.use(cookieParser()); // Äáº·t cookie-parser trÆ°á»›c cÃ¡c route
app.use(express.json({ limit: '10mb' })); // Giá»›i háº¡n size request

// CORS pháº£i Ä‘Æ°á»£c cáº¥u hÃ¬nh TRÆ¯á»šC táº¥t cáº£ cÃ¡c routes
app.use(cors({
  origin: 'http://localhost:3000', // Cho phÃ©p yÃªu cáº§u tá»« frontend
  credentials: true // Cho phÃ©p gá»­i cookies
}));

// Middleware
app.use(express.json());

// api
app.use('/api/users', userapi); // ÄÄƒng kÃ½ route
app.use('/api/users', loginRoute); // Route cho Ä‘Äƒng nháº­p
app.use('/api/profile', Profile);
app.use('/api/usertable', userTableRouter); // Router láº¥y list ngÆ°á»i dÃ¹ng
app.use('/api/room', Room); // ThÃªm route cho phÃ²ng
app.use('/api/hotel', hotelapi);
app.use('/api/homepage', HomePage);
app.use('/api/booking', Booking);
app.use('/api/detail', Detail);
app.use('/api/checkout', Checkout);
app.use('/api/searchhotel', SearchHotel);
app.use('/api/tinhthanh', tinhthanhvn);
app.use('/api/favorite', Favorite);
app.use('/api/admin', adminSetupRouter); // Route cho admin setup
app.get('/', (req, res) => {
  res.send('Welcome to Hotel Booking API');
  
});
// Láº¯ng nghe trÃªn cá»•ng
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => {
  console.log(`Server Ä‘ang cháº¡y trÃªn cá»•ng ${PORT}`);
  
});


```

### tailwind.config.js
```js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./src/**/*.{js,jsx,ts,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
};

```

### api\tinhthanhvn.js
```js
const express = require('express');
const Hotel = require('../models/Hotel');
const Room = require('../models/Room');
const axios = require('axios');
const router = express.Router();
router.get('/top-provinces', async (req, res) => {
    try {
        // BÆ°á»›c 1: Láº¥y danh sÃ¡ch tá»‰nh thÃ nh tá»« API
        const provinceResponse = await axios.get('http://localhost:5000/api/tinhthanh');
        const provinces = provinceResponse.data.data;

        // BÆ°á»›c 2: Láº¥y danh sÃ¡ch khÃ¡ch sáº¡n vÃ  tÃ­nh toÃ¡n sá»‘ lÆ°á»£ng theo tá»‰nh thÃ nh
        const hotels = await Hotel.find().populate('manager');
        const hotelWithLowestPrice = await Promise.all(
            hotels.map(async (hotel) => {
                const rooms = await Room.find({ hotel: hotel._id });
                const lowestRoomPrice = rooms.length > 0 ? Math.min(...rooms.map(room => room.price)) : null;

                return {
                    ...hotel.toObject(),
                    lowestRoomPrice,
                };
            })
        );

        // BÆ°á»›c 3: Äáº¿m sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n theo tá»«ng tá»‰nh thÃ nh
        const locationCount = {};

        hotelWithLowestPrice.forEach(hotel => {
            const location = hotel.location; // Láº¥y chuá»—i location

            // Kiá»ƒm tra xem location cÃ³ chá»©a tá»‰nh thÃ nh nÃ o khÃ´ng
            provinces.forEach(province => {
                if (location.includes(province.name)) { // So sÃ¡nh tÃªn tá»‰nh thÃ nh
                    // Náº¿u cÃ³, tÄƒng sá»‘ lÆ°á»£ng
                    if (locationCount[province.id]) {
                        locationCount[province.id].count++;
                    } else {
                        locationCount[province.id] = { 
                            ...province, 
                            count: 1, 
                            locations: [] // ThÃªm máº£ng locations Ä‘á»ƒ chá»©a thÃ´ng tin cÃ¡c khÃ¡ch sáº¡n
                        };
                    }
                    // ThÃªm thÃ´ng tin khÃ¡ch sáº¡n vÃ o locations
                    locationCount[province.id].locations.push({
                        id: hotel._id,
                        name: hotel.name,
                        location: hotel.location,
                        lowestRoomPrice: hotel.lowestRoomPrice,
                    });
                }
            });
        });

        // BÆ°á»›c 4: Chuyá»ƒn Ä‘á»•i káº¿t quáº£ sang máº£ng vÃ  sáº¯p xáº¿p
        const allLocations = Object.values(locationCount).sort((a, b) => b.count - a.count);

        // BÆ°á»›c 5: Äá»‹nh dáº¡ng káº¿t quáº£ tráº£ vá»
        const result = {
            error: 0,
            error_text: "Láº¥y dá»¯ liá»‡u tá»‰nh thÃ nh thÃ nh cÃ´ng..! ",
            data_name: "Tá»‰nh thÃ nh Viá»‡t Nam",
            data: allLocations.map(location => ({
                id: location.id,
                name: location.name,
                name_en: location.name_en || location.name,
                full_name: location.full_name || `Tá»‰nh ${location.name}`,
                full_name_en: location.full_name_en || `${location.name} Province`,
                latitude: location.latitude || "",
                longitude: location.longitude || "",
                image: location.image || "",
                count: location.count, // Sá»‘ lÆ°á»£ng khÃ¡ch sáº¡n theo tá»‰nh
                locations: location.locations // ThÃ´ng tin khÃ¡ch sáº¡n
            }))
        };

        res.json(result);
    } catch (error) {
        console.error("Error fetching hotels or provinces:", error);
        res.status(500).json({ error: 1, error_text: "Internal server error" });
    }
});


// Dá»¯ liá»‡u tá»‰nh thÃ nh Ä‘áº§y Ä‘á»§
const provincesData = {
    error: 0,
    error_text: "Láº¥y dá»¯ liá»‡u tá»‰nh thÃ nh thÃ nh cÃ´ng..!",
    data_name: "Tá»‰nh thÃ nh Viá»‡t Nam",
    data: [
        {
          "id": "89",
          "name": "An Giang",
          "name_en": "An Giang",
          "full_name": "Tá»‰nh An Giang",
          "full_name_en": "An Giang Province",
          "latitude": "10.5392057",
          "longitude": "105.2312822",
          "image":""
        },
        {
          "id": "77",
          "name": "BÃ  Rá»‹a - VÅ©ng TÃ u",
          "name_en": "Ba Ria - Vung Tau",
          "full_name": "Tá»‰nh BÃ  Rá»‹a - VÅ©ng TÃ u",
          "full_name_en": "Ba Ria - Vung Tau Province",
          "latitude": "10.5738801",
          "longitude": "107.3284362"
        },
        {
          "id": "24",
          "name": "Báº¯c Giang",
          "name_en": "Bac Giang",
          "full_name": "Tá»‰nh Báº¯c Giang",
          "full_name_en": "Bac Giang Province",
          "latitude": "21.3169625",
          "longitude": "106.437985"
        },
        {
          "id": "06",
          "name": "Báº¯c Káº¡n",
          "name_en": "Bac Kan",
          "full_name": "Tá»‰nh Báº¯c Káº¡n",
          "full_name_en": "Bac Kan Province",
          "latitude": "22.2571701",
          "longitude": "105.8204437"
        },
        {
          "id": "95",
          "name": "Báº¡c LiÃªu",
          "name_en": "Bac Lieu",
          "full_name": "Tá»‰nh Báº¡c LiÃªu",
          "full_name_en": "Bac Lieu Province",
          "latitude": "9.3298341",
          "longitude": "105.509946"
        },
        {
          "id": "27",
          "name": "Báº¯c Ninh",
          "name_en": "Bac Ninh",
          "full_name": "Tá»‰nh Báº¯c Ninh",
          "full_name_en": "Bac Ninh Province",
          "latitude": "21.0955822",
          "longitude": "106.1264766"
        },
        {
          "id": "83",
          "name": "Báº¿n Tre",
          "name_en": "Ben Tre",
          "full_name": "Tá»‰nh Báº¿n Tre",
          "full_name_en": "Ben Tre Province",
          "latitude": "10.1093637",
          "longitude": "106.4811559"
        },
        {
          "id": "74",
          "name": "BÃ¬nh DÆ°Æ¡ng",
          "name_en": "Binh Duong",
          "full_name": "Tá»‰nh BÃ¬nh DÆ°Æ¡ng",
          "full_name_en": "Binh Duong Province",
          "latitude": "11.1836551",
          "longitude": "106.7031737"
        },
        {
          "id": "70",
          "name": "BÃ¬nh PhÆ°á»›c",
          "name_en": "Binh Phuoc",
          "full_name": "Tá»‰nh BÃ¬nh PhÆ°á»›c",
          "full_name_en": "Binh Phuoc Province",
          "latitude": "11.7543232",
          "longitude": "106.9266473"
        },
        {
          "id": "60",
          "name": "BÃ¬nh Thuáº­n",
          "name_en": "Binh Thuan",
          "full_name": "Tá»‰nh BÃ¬nh Thuáº­n",
          "full_name_en": "Binh Thuan Province",
          "latitude": "11.1041572",
          "longitude": "108.1832931",
          "image":"https://cdn3.ivivu.com/2024/09/du-lich-binh-thuan-ivivu-5.jpg"
        },
        {
          "id": "52",
          "name": "BÃ¬nh Äá»‹nh",
          "name_en": "Binh Dinh",
          "full_name": "Tá»‰nh BÃ¬nh Äá»‹nh",
          "full_name_en": "Binh Dinh Province",
          "latitude": "14.0779378",
          "longitude": "108.9898798"
        },
        {
          "id": "96",
          "name": "CÃ  Mau",
          "name_en": "Ca Mau",
          "full_name": "Tá»‰nh CÃ  Mau",
          "full_name_en": "Ca Mau Province",
          "latitude": "9.0180177",
          "longitude": "105.0869724",
          "image":"https://ik.imagekit.io/tvlk/blog/2021/10/du-lich-ca-mau-1-1024x573.jpg?tr=dpr-2,w-675"
        },
        {
          "id": "92",
          "name": "Cáº§n ThÆ¡",
          "name_en": "Can Tho",
          "full_name": "ThÃ nh phá»‘ Cáº§n ThÆ¡",
          "full_name_en": "Can Tho City",
          "latitude": "10.0364634",
          "longitude": "105.7875821",
          "image":"https://statics.vinpearl.com/can-tho-ve-dem-3_1632058245.png"
        },
        {
          "id": "04",
          "name": "Cao Báº±ng",
          "name_en": "Cao Bang",
          "full_name": "Tá»‰nh Cao Báº±ng",
          "full_name_en": "Cao Bang Province",
          "latitude": "22.7426936",
          "longitude": "106.1060926"
        },
        {
          "id": "64",
          "name": "Gia Lai",
          "name_en": "Gia Lai",
          "full_name": "Tá»‰nh Gia Lai",
          "full_name_en": "Gia Lai Province",
          "latitude": "13.8177445",
          "longitude": "108.2004015"
        },
        {
          "id": "02",
          "name": "HÃ  Giang",
          "name_en": "Ha Giang",
          "full_name": "Tá»‰nh HÃ  Giang",
          "full_name_en": "Ha Giang Province",
          "latitude": "22.7336097",
          "longitude": "105.0027271"
        },
        {
          "id": "35",
          "name": "HÃ  Nam",
          "name_en": "Ha Nam",
          "full_name": "Tá»‰nh HÃ  Nam",
          "full_name_en": "Ha Nam Province",
          "latitude": "20.5340294",
          "longitude": "105.98102482169935"
        },
        {
          "id": "01",
          "name": "HÃ  Ná»™i",
          "name_en": "Ha Noi",
          "full_name": "ThÃ nh phá»‘ HÃ  Ná»™i",
          "full_name_en": "Ha Noi City",
          "latitude": "21.0283334",
          "longitude": "105.854041",
          "image":"https://hoanghamobile.com/tin-tuc/wp-content/webp-express/webp-images/uploads/2024/04/anh-ha-noi.jpg.webp"
        },
        {
          "id": "42",
          "name": "HÃ  TÄ©nh",
          "name_en": "Ha Tinh",
          "full_name": "Tá»‰nh HÃ  TÄ©nh",
          "full_name_en": "Ha Tinh Province",
          "latitude": "18.3504832",
          "longitude": "105.7623047"
        },
        {
          "id": "30",
          "name": "Háº£i DÆ°Æ¡ng",
          "name_en": "Hai Duong",
          "full_name": "Tá»‰nh Háº£i DÆ°Æ¡ng",
          "full_name_en": "Hai Duong Province",
          "latitude": "20.8930571",
          "longitude": "106.3725441"
        },
        {
          "id": "31",
          "name": "Háº£i PhÃ²ng",
          "name_en": "Hai Phong",
          "full_name": "ThÃ nh phá»‘ Háº£i PhÃ²ng",
          "full_name_en": "Hai Phong City",
          "latitude": "20.858864",
          "longitude": "106.6749591"
        },
        {
          "id": "93",
          "name": "Háº­u Giang",
          "name_en": "Hau Giang",
          "full_name": "Tá»‰nh Háº­u Giang",
          "full_name_en": "Hau Giang Province",
          "latitude": "9.7985063",
          "longitude": "105.6379524"
        },
        {
          "id": "79",
          "name": "Há»“ ChÃ­ Minh",
          "name_en": "Ho Chi Minh",
          "full_name": "ThÃ nh phá»‘ Há»“ ChÃ­ Minh",
          "full_name_en": "Ho Chi Minh City",
          "latitude": "10.7763897",
          "longitude": "106.7011391",
          "image": "https://images.pexels.com/photos/941195/pexels-photo-941195.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
        },
        {
          "id": "17",
          "name": "HoÃ  BÃ¬nh",
          "name_en": "Hoa Binh",
          "full_name": "Tá»‰nh HoÃ  BÃ¬nh",
          "full_name_en": "Hoa Binh Province",
          "latitude": "20.6763365",
          "longitude": "105.3759952"
        },
        {
          "id": "33",
          "name": "HÆ°ng YÃªn",
          "name_en": "Hung Yen",
          "full_name": "Tá»‰nh HÆ°ng YÃªn",
          "full_name_en": "Hung Yen Province",
          "latitude": "20.7833912",
          "longitude": "106.0699025"
        },
        {
          "id": "56",
          "name": "KhÃ¡nh HÃ²a",
          "name_en": "Khanh Hoa",
          "full_name": "Tá»‰nh KhÃ¡nh HÃ²a",
          "full_name_en": "Khanh Hoa Province",
          "latitude": "12.2980751",
          "longitude": "108.9950386"
        },
        {
          "id": "91",
          "name": "KiÃªn Giang",
          "name_en": "Kien Giang",
          "full_name": "Tá»‰nh KiÃªn Giang",
          "full_name_en": "Kien Giang Province",
          "latitude": "9.9904962",
          "longitude": "105.2435248"
        },
        {
          "id": "62",
          "name": "Kon Tum",
          "name_en": "Kon Tum",
          "full_name": "Tá»‰nh Kon Tum",
          "full_name_en": "Kon Tum Province",
          "latitude": "14.6995372",
          "longitude": "107.9323831"
        },
        {
          "id": "12",
          "name": "Lai ChÃ¢u",
          "name_en": "Lai Chau",
          "full_name": "Tá»‰nh Lai ChÃ¢u",
          "full_name_en": "Lai Chau Province",
          "latitude": "22.2921668",
          "longitude": "103.1798662"
        },
        {
          "id": "68",
          "name": "LÃ¢m Äá»“ng",
          "name_en": "Lam Dong",
          "full_name": "Tá»‰nh LÃ¢m Äá»“ng",
          "full_name_en": "Lam Dong Province",
          "latitude": "11.6614957",
          "longitude": "108.1335279"
        },
        {
          "id": "20",
          "name": "Láº¡ng SÆ¡n",
          "name_en": "Lang Son",
          "full_name": "Tá»‰nh Láº¡ng SÆ¡n",
          "full_name_en": "Lang Son Province",
          "latitude": "21.8487579",
          "longitude": "106.6140692"
        },
        {
          "id": "10",
          "name": "LÃ o Cai",
          "name_en": "Lao Cai",
          "full_name": "Tá»‰nh LÃ o Cai",
          "full_name_en": "Lao Cai Province",
          "latitude": "22.3069302",
          "longitude": "104.1829592"
        },
        {
          "id": "80",
          "name": "Long An",
          "name_en": "Long An",
          "full_name": "Tá»‰nh Long An",
          "full_name_en": "Long An Province",
          "latitude": "10.6983968",
          "longitude": "106.1883517"
        },
        {
          "id": "36",
          "name": "Nam Äá»‹nh",
          "name_en": "Nam Dinh",
          "full_name": "Tá»‰nh Nam Äá»‹nh",
          "full_name_en": "Nam Dinh Province",
          "latitude": "20.2686476",
          "longitude": "106.2289075"
        },
        {
          "id": "40",
          "name": "Nghá»‡ An",
          "name_en": "Nghe An",
          "full_name": "Tá»‰nh Nghá»‡ An",
          "full_name_en": "Nghe An Province",
          "latitude": "19.1976001",
          "longitude": "105.060676"
        },
        {
          "id": "37",
          "name": "Ninh BÃ¬nh",
          "name_en": "Ninh Binh",
          "full_name": "Tá»‰nh Ninh BÃ¬nh",
          "full_name_en": "Ninh Binh Province",
          "latitude": "20.2051051",
          "longitude": "105.9280678"
        },
        {
          "id": "58",
          "name": "Ninh Thuáº­n",
          "name_en": "Ninh Thuan",
          "full_name": "Tá»‰nh Ninh Thuáº­n",
          "full_name_en": "Ninh Thuan Province",
          "latitude": "11.6965639",
          "longitude": "108.8928476"
        },
        {
          "id": "25",
          "name": "PhÃº Thá»",
          "name_en": "Phu Tho",
          "full_name": "Tá»‰nh PhÃº Thá»",
          "full_name_en": "Phu Tho Province",
          "latitude": "21.3007538",
          "longitude": "105.1349604",
          "image":"https://xdcs.cdnchinhphu.vn/446259493575335936/2023/9/18/phutho-1695032211549821736525.jpg"
        },
        {
          "id": "54",
          "name": "PhÃº YÃªn",
          "name_en": "Phu Yen",
          "full_name": "Tá»‰nh PhÃº YÃªn",
          "full_name_en": "Phu Yen Province",
          "latitude": "13.1912633",
          "longitude": "109.1273678"
        },
        {
          "id": "44",
          "name": "Quáº£ng BÃ¬nh",
          "name_en": "Quang Binh",
          "full_name": "Tá»‰nh Quáº£ng BÃ¬nh",
          "full_name_en": "Quang Binh Province",
          "latitude": "17.509599",
          "longitude": "106.4004452",
          "image":"https://tourquangbinh.vn/wp-content/uploads/2024/07/1-di-choi-dong-hoi-buoi-toi-va-nhung-hoat-dong-thu-vi-ve-dem-quang-binh.jpg"
        },
        {
          "id": "49",
          "name": "Quáº£ng Nam",
          "name_en": "Quang Nam",
          "full_name": "Tá»‰nh Quáº£ng Nam",
          "full_name_en": "Quang Nam Province",
          "latitude": "15.5761698",
          "longitude": "108.0527132"
        },
        {
          "id": "51",
          "name": "Quáº£ng NgÃ£i",
          "name_en": "Quang Ngai",
          "full_name": "Tá»‰nh Quáº£ng NgÃ£i",
          "full_name_en": "Quang Ngai Province",
          "latitude": "14.9953739",
          "longitude": "108.691729"
        },
        {
          "id": "22",
          "name": "Quáº£ng Ninh",
          "name_en": "Quang Ninh",
          "full_name": "Tá»‰nh Quáº£ng Ninh",
          "full_name_en": "Quang Ninh Province",
          "latitude": "21.1718046",
          "longitude": "107.2012742"
        },
        {
          "id": "45",
          "name": "Quáº£ng Trá»‹",
          "name_en": "Quang Tri",
          "full_name": "Tá»‰nh Quáº£ng Trá»‹",
          "full_name_en": "Quang Tri Province",
          "latitude": "16.7897806",
          "longitude": "106.9797431"
        },
        {
          "id": "94",
          "name": "SÃ³c TrÄƒng",
          "name_en": "Soc Trang",
          "full_name": "Tá»‰nh SÃ³c TrÄƒng",
          "full_name_en": "Soc Trang Province",
          "latitude": "9.5628369",
          "longitude": "105.9493991"
        },
        {
          "id": "14",
          "name": "SÆ¡n La",
          "name_en": "Son La",
          "full_name": "Tá»‰nh SÆ¡n La",
          "full_name_en": "Son La Province",
          "latitude": "21.2276769",
          "longitude": "104.1575944"
        },
        {
          "id": "72",
          "name": "TÃ¢y Ninh",
          "name_en": "Tay Ninh",
          "full_name": "Tá»‰nh TÃ¢y Ninh",
          "full_name_en": "Tay Ninh Province",
          "latitude": "11.4019366",
          "longitude": "106.1626927"
        },
        {
          "id": "34",
          "name": "ThÃ¡i BÃ¬nh",
          "name_en": "Thai Binh",
          "full_name": "Tá»‰nh ThÃ¡i BÃ¬nh",
          "full_name_en": "Thai Binh Province",
          "latitude": "20.5296832",
          "longitude": "106.3876068"
        },
        {
          "id": "19",
          "name": "ThÃ¡i NguyÃªn",
          "name_en": "Thai Nguyen",
          "full_name": "Tá»‰nh ThÃ¡i NguyÃªn",
          "full_name_en": "Thai Nguyen Province",
          "latitude": "21.6498502",
          "longitude": "105.8351394"
        },
        {
          "id": "38",
          "name": "Thanh HÃ³a",
          "name_en": "Thanh Hoa",
          "full_name": "Tá»‰nh Thanh HÃ³a",
          "full_name_en": "Thanh Hoa Province",
          "latitude": "19.9781573",
          "longitude": "105.4816107"
        },
        {
          "id": "46",
          "name": "Thá»«a ThiÃªn Huáº¿",
          "name_en": "Thua Thien Hue",
          "full_name": "Tá»‰nh Thá»«a ThiÃªn Huáº¿",
          "full_name_en": "Thua Thien Hue Province",
          "latitude": "16.3480798",
          "longitude": "107.5398913"
        },
        {
          "id": "82",
          "name": "Tiá»n Giang",
          "name_en": "Tien Giang",
          "full_name": "Tá»‰nh Tiá»n Giang",
          "full_name_en": "Tien Giang Province",
          "latitude": "10.4030368",
          "longitude": "106.361633"
        },
        {
          "id": "84",
          "name": "TrÃ  Vinh",
          "name_en": "Tra Vinh",
          "full_name": "Tá»‰nh TrÃ  Vinh",
          "full_name_en": "Tra Vinh Province",
          "latitude": "9.8037998",
          "longitude": "106.3256808"
        },
        {
          "id": "08",
          "name": "TuyÃªn Quang",
          "name_en": "Tuyen Quang",
          "full_name": "Tá»‰nh TuyÃªn Quang",
          "full_name_en": "Tuyen Quang Province",
          "latitude": "22.0747798",
          "longitude": "105.258411"
        },
        {
          "id": "86",
          "name": "VÄ©nh Long",
          "name_en": "Vinh Long",
          "full_name": "Tá»‰nh VÄ©nh Long",
          "full_name_en": "Vinh Long Province",
          "latitude": "10.1203043",
          "longitude": "106.0125705"
        },
        {
          "id": "26",
          "name": "VÄ©nh PhÃºc",
          "name_en": "Vinh Phuc",
          "full_name": "Tá»‰nh VÄ©nh PhÃºc",
          "full_name_en": "Vinh Phuc Province",
          "latitude": "21.3778689",
          "longitude": "105.5758286"
        },
        {
          "id": "15",
          "name": "YÃªn BÃ¡i",
          "name_en": "Yen Bai",
          "full_name": "Tá»‰nh YÃªn BÃ¡i",
          "full_name_en": "Yen Bai Province",
          "latitude": "21.8268679",
          "longitude": "104.663122"
        },
        {
          "id": "48",
          "name": "ÄÃ  Náºµng",
          "name_en": "Da Nang",
          "full_name": "ThÃ nh phá»‘ ÄÃ  Náºµng",
          "full_name_en": "Da Nang City",
          "latitude": "16.068",
          "longitude": "108.212"
        },
        {
          "id": "66",
          "name": "Äáº¯k Láº¯k",
          "name_en": "Dak Lak",
          "full_name": "Tá»‰nh Äáº¯k Láº¯k",
          "full_name_en": "Dak Lak Province",
          "latitude": "12.8292274",
          "longitude": "108.2999058"
        },
        {
          "id": "67",
          "name": "Äáº¯k NÃ´ng",
          "name_en": "Dak Nong",
          "full_name": "Tá»‰nh Äáº¯k NÃ´ng",
          "full_name_en": "Dak Nong Province",
          "latitude": "12.2818851",
          "longitude": "107.7302484"
        },
        {
          "id": "11",
          "name": "Äiá»‡n BiÃªn",
          "name_en": "Dien Bien",
          "full_name": "Tá»‰nh Äiá»‡n BiÃªn",
          "full_name_en": "Dien Bien Province",
          "latitude": "21.6546566",
          "longitude": "103.2168632"
        },
        {
          "id": "75",
          "name": "Äá»“ng Nai",
          "name_en": "Dong Nai",
          "full_name": "Tá»‰nh Äá»“ng Nai",
          "full_name_en": "Dong Nai Province",
          "latitude": "11.0355624",
          "longitude": "107.1881076"
        },
        {
          "id": "87",
          "name": "Äá»“ng ThÃ¡p",
          "name_en": "Dong Thap",
          "full_name": "Tá»‰nh Äá»“ng ThÃ¡p",
          "full_name_en": "Dong Thap Province",
          "latitude": "10.590424",
          "longitude": "105.6802341"
        }
      ]
};
// Endpoint API
router.get('/', (req, res) => {
    res.json(provincesData);
});
module.exports = router;

```

### api\account\login.js
```js
const express = require('express');
const router = express.Router();
const User = require('../../models/User');
const jwt = require('jsonwebtoken');
const cookieParser = require('cookie-parser');
const { validateLogin, sanitizeInput } = require('../../middleware/validation');
const { loginLimiter } = require('../../middleware/rateLimiter');

// Sá»­ dá»¥ng cookie-parser
router.use(cookieParser());

// Route ÄÄƒng nháº­p ngÆ°á»i dÃ¹ng vá»›i rate limiting vÃ  validation
router.post('/login', loginLimiter, sanitizeInput, validateLogin, async (req, res) => {
  try {
    const { email, password } = req.body;

    // TÃ¬m ngÆ°á»i dÃ¹ng trong cÆ¡ sá»Ÿ dá»¯ liá»‡u
    const user = await User.findOne({ email: email.toLowerCase().trim() });
    if (!user) {
      console.log("Email khÃ´ng tá»“n táº¡i:", email);
      return res.status(400).json({ msg: 'Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng' }); // KhÃ´ng tiáº¿t lá»™ email cÃ³ tá»“n táº¡i hay khÃ´ng
    }

    // So sÃ¡nh máº­t kháº©u
    const isMatch = await user.comparePassword(password);
    if (!isMatch) {
      console.log("Máº­t kháº©u khÃ´ng Ä‘Ãºng cho email:", email);
      return res.status(400).json({ msg: 'Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng' });
    }

    // Táº¡o token vá»›i thá»i gian háº¿t háº¡n ngáº¯n hÆ¡n
    const payload = { userId: user._id, role: user.role }; 
    const token = jwt.sign(payload, process.env.JWT_SECRET, { expiresIn: '24h' });

    // Gá»­i token cho client qua cookie vá»›i cÃ¡c thiáº¿t láº­p báº£o máº­t
    res.cookie('token', token, { 
      httpOnly: true, 
      secure: process.env.NODE_ENV === 'production', // Chá»‰ HTTPS trong production
      sameSite: 'strict', // Chá»‘ng CSRF
      maxAge: 24 * 60 * 60 * 1000 // 24 giá»
    });
    
    // Tráº£ vá» thÃ´ng bÃ¡o Ä‘Äƒng nháº­p thÃ nh cÃ´ng
    res.json({ 
      msg: 'ÄÄƒng nháº­p thÃ nh cÃ´ng',
      user: {
        id: user._id,
        name: user.name,
        email: user.email,
        role: user.role
      }
    });

  } catch (err) {
    console.error("Lá»—i server:", err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

module.exports = router;

```

### api\account\profile.js
```js
const express = require('express');
const router = express.Router();
const User = require('../../models/User'); // Äiá»u chá»‰nh Ä‘Æ°á»ng dáº«n náº¿u cáº§n
const jwt = require('jsonwebtoken');
const multer = require('multer');
const cookieParser = require('cookie-parser');
const nodemailer = require('nodemailer');
const crypto = require('crypto');
const bcrypt = require('bcryptjs');
const auth = require('../../middleware/auth');
const { uploadAvatar } = require('../../middleware/upload'); // Sá»­ dá»¥ng uploadAvatar
const cloudinary = require('cloudinary').v2;
// Sá»­ dá»¥ng cookie-parser
router.use(cookieParser());


// HÃ m láº¥y publicId tá»« URL cá»§a Cloudinary
const getPublicIdFromUrl = (url) => {
  const matches = url.match(/\/v\d+\/(.+)\.(jpg|jpeg|png|gif|webp)/);
  return matches ? matches[1] : null;
};

// Cáº­p nháº­t áº£nh Ä‘áº¡i diá»‡n
router.post('/upload-avatar', auth, uploadAvatar.single('avatar'), async (req, res) => {
  if (!req.file) {
    return res.status(400).json({ msg: 'KhÃ´ng cÃ³ file nÃ o Ä‘Æ°á»£c táº£i lÃªn.' });
  }

  try {
    const imageUrl = req.file.path; // Sá»­ dá»¥ng path Ä‘á»ƒ láº¥y URL tá»« req.file
    const userId = req.userId; // Láº¥y ID ngÆ°á»i dÃ¹ng tá»« middleware

    // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tÃ¬m tháº¥y.' });
    }

    // Náº¿u ngÆ°á»i dÃ¹ng Ä‘Ã£ cÃ³ avatar, xÃ³a áº£nh cÅ© trÃªn Cloudinary
    if (user.avatar) {
      const publicId = getPublicIdFromUrl(user.avatar);
      if (publicId) {
        await cloudinary.uploader.destroy(publicId); // XÃ³a áº£nh cÅ©
      }
    }

    // Cáº­p nháº­t avatar má»›i vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u
    await updateUserAvatar(userId, { imageUrl: imageUrl });

    res.status(200).json({ msg: 'Táº£i lÃªn thÃ nh cÃ´ng', imageUrl: imageUrl });
  } catch (error) {
    console.error('Lá»—i táº£i lÃªn:', error);
    res.status(500).json({ msg: 'Lá»—i server', error: error.message });
  }
});
const updateUserAvatar = async (userId, { imageUrl }) => {
  try {
    await User.findByIdAndUpdate(userId, { avatar: imageUrl }, { new: true }); // Cháº¯c cháº¯n ráº±ng báº¡n cáº­p nháº­t Ä‘Ãºng trÆ°á»ng
  } catch (error) {
    throw new Error('Lá»—i khi cáº­p nháº­t avatar');
  }
};
// Route Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
router.get('/me',auth, async (req, res) => {
  try {
    // Láº¥y token tá»« cookie
    const token = req.cookies.token;
    if (!token) {
      return res.status(401).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y token' });
    }

    // XÃ¡c thá»±c token
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    const user = await User.findById(decoded.userId).select('-password'); // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng trá»« máº­t kháº©u
    if (!user) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i' });
    }

    // Tráº£ vá» thÃ´ng tin ngÆ°á»i dÃ¹ng
    res.json(user);
  } catch (err) {
    console.error("Lá»—i xÃ¡c thá»±c:", err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

// API chá»‰nh sá»­a há»“ sÆ¡ ngÆ°á»i dÃ¹ng
router.patch('/edit', auth, async (req, res) => {
  const token = req.cookies.token;
  if (!token) {
    return res.status(401).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y token' });
  }

  const decoded = jwt.verify(token, process.env.JWT_SECRET);

  try {
    const updatedUser = await User.findByIdAndUpdate(decoded.userId, req.body, { new: true, runValidators: true }).select('-password');
    if (!updatedUser) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i' });
    }
    res.json(updatedUser);
  } catch (err) {
    console.error("Lá»—i cáº­p nháº­t há»“ sÆ¡:", err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

// API Ä‘á»ƒ thay Ä‘á»•i máº­t kháº©u
router.patch('/change-password', auth, async (req, res) => {
  const token = req.cookies.token;
  if (!token) {
    return res.status(401).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y token' });
  }

  const decoded = jwt.verify(token, process.env.JWT_SECRET);
  const { currentPassword, newPassword } = req.body;

  try {
    const user = await User.findById(decoded.userId);
    if (!user) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i' });
    }

    // Kiá»ƒm tra máº­t kháº©u hiá»‡n táº¡i
    const isMatch = await user.comparePassword(currentPassword); // Giáº£ sá»­ báº¡n cÃ³ phÆ°Æ¡ng thá»©c nÃ y trong model User
    if (!isMatch) {
      return res.status(400).json({ msg: 'Máº­t kháº©u hiá»‡n táº¡i khÃ´ng Ä‘Ãºng' });
    }

    // Cáº­p nháº­t máº­t kháº©u má»›i
    user.password = newPassword; // Giáº£ sá»­ báº¡n Ä‘Ã£ mÃ£ hÃ³a máº­t kháº©u trong model
    await user.save();

    res.json({ msg: 'Äá»•i máº­t kháº©u thÃ nh cÃ´ng' });
  } catch (err) {
    console.error("Lá»—i thay Ä‘á»•i máº­t kháº©u:", err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

router.post('/logout', (req, res) => {
  res.clearCookie('token'); // XÃ³a cookie token
  res.json({ msg: 'ÄÄƒng xuáº¥t thÃ nh cÃ´ng' });
});

router.post('/forgot-password', async (req, res) => {
  const { email } = req.body;

  try {
    const user = await User.findOne({ email });
    if (!user) {
      return res.status(404).json({ msg: 'Email khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng' });
    }

    // Táº¡o token Ä‘áº·t láº¡i máº­t kháº©u
    const resetToken = crypto.randomBytes(32).toString('hex');
    user.resetPasswordToken = resetToken;
    user.resetPasswordExpires = Date.now() + 3600000; // hiá»‡u lá»±c trong 1 giá»
    await user.save();

    // Táº¡o transporter Ä‘á»ƒ gá»­i email
    const transporter = nodemailer.createTransport({
      service: 'Gmail', // hoáº·c má»™t dá»‹ch vá»¥ email khÃ¡c
      auth: {
        user: 'minhnguyen11234321@gmail.com',
        pass: 'joddlkxcfnuabcpi', // Máº­t kháº©u á»©ng dá»¥ng
      },
    });

    // Ná»™i dung email
    const mailOptions = {
      from: 'minhnguyen11234321@gmail.com',
      to: email,
      subject: 'Äáº·t láº¡i máº­t kháº©u',
      text: `Vui lÃ²ng nháº¥n vÃ o liÃªn káº¿t sau Ä‘á»ƒ Ä‘áº·t láº¡i máº­t kháº©u cá»§a báº¡n: \n\n
             http://localhost:3000/ResetPassword/${resetToken} \n\n
             Náº¿u báº¡n khÃ´ng yÃªu cáº§u Ä‘áº·t láº¡i máº­t kháº©u, vui lÃ²ng bá» qua email nÃ y.`,
    };

    // Gá»­i email
    transporter.sendMail(mailOptions, (error, info) => {
      if (error) {
        console.error('Lá»—i gá»­i email:', error);
        return res.status(500).json({ msg: 'KhÃ´ng thá»ƒ gá»­i email Ä‘áº·t láº¡i máº­t kháº©u' });
      } else {
        res.status(200).json({ msg: 'LiÃªn káº¿t Ä‘áº·t láº¡i máº­t kháº©u Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n email cá»§a báº¡n' });
      }
    });
  } catch (err) {
    console.error(err);
    res.status(500).json({ msg: 'ÄÃ£ xáº£y ra lá»—i, vui lÃ²ng thá»­ láº¡i sau' });
  }
});

// API Ä‘áº·t láº¡i máº­t kháº©u
router.post('/reset', async (req, res) => {
  const { token, newPassword } = req.body;

  try {
    const user = await User.findOne({
      resetPasswordToken: token,
      resetPasswordExpires: { $gt: Date.now() } // Kiá»ƒm tra token cÃ²n hiá»‡u lá»±c
    });

    if (!user) {
      return res.status(400).json({ msg: 'LiÃªn káº¿t Ä‘Ã£ háº¿t háº¡n hoáº·c khÃ´ng há»£p lá»‡.' });
    }

    // Äáº·t máº­t kháº©u má»›i 
    user.password = newPassword;

    // XÃ³a token reset vÃ  thá»i gian háº¿t háº¡n sau khi Ä‘áº·t láº¡i thÃ nh cÃ´ng
    user.resetPasswordToken = undefined;
    user.resetPasswordExpires = undefined;

    await user.save();

    res.status(200).json({ msg: 'Äáº·t láº¡i máº­t kháº©u thÃ nh cÃ´ng.' });
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

module.exports = router;

```

### api\account\register.js
```js
const express = require('express');
const router = express.Router();
const User = require('../../models/User');
const { validateRegister, sanitizeInput } = require('../../middleware/validation');

// Route ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng
router.post('/register', sanitizeInput, validateRegister, async (req, res) => {
  try {
    const { name, email, password, role, registrationDate } = req.body;

    // Kiá»ƒm tra xem email cÃ³ tá»“n táº¡i khÃ´ng
    let user = await User.findOne({ email });
    if (user) {
      return res.status(400).json({ msg: 'Email Ä‘Ã£ tá»“n táº¡i' });
    }

    // Táº¡o ngÆ°á»i dÃ¹ng má»›i
    user = new User({ 
      name: name.trim(), 
      email: email.toLowerCase().trim(), 
      password, 
      role: role || 'Customer', // Máº·c Ä‘á»‹nh lÃ  Customer
      registrationDate 
    });

    // LÆ°u ngÆ°á»i dÃ¹ng vÃ o database
    await user.save();

    res.status(201).json({ msg: 'ÄÄƒng kÃ½ thÃ nh cÃ´ng' });
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

module.exports = router;

```

### api\admin\adminSetup.js
```js
const express = require('express');
const User = require('../../models/User');
const router = express.Router();

// API táº¡o tÃ i khoáº£n admin (chá»‰ dÃ¹ng trong development)
router.post('/create-admin', async (req, res) => {
  try {
    // Kiá»ƒm tra mÃ´i trÆ°á»ng (chá»‰ cho phÃ©p trong development)
    if (process.env.NODE_ENV === 'production') {
      return res.status(403).json({
        success: false,
        message: 'TÃ­nh nÄƒng nÃ y khÃ´ng kháº£ dá»¥ng trong mÃ´i trÆ°á»ng production'
      });
    }

    const { name, email, password } = req.body;

    // Validation
    if (!name || !email || !password) {
      return res.status(400).json({
        success: false,
        message: 'Vui lÃ²ng cung cáº¥p Ä‘áº§y Ä‘á»§ thÃ´ng tin: name, email, password'
      });
    }

    // Kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i chÆ°a
    const existingUser = await User.findOne({ email });
    if (existingUser) {
      return res.status(400).json({
        success: false,
        message: 'Email Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng'
      });
    }

    // Táº¡o admin user
    const adminUser = new User({
      name,
      email,
      password, // Sáº½ Ä‘Æ°á»£c hash tá»± Ä‘á»™ng
      role: 'Admin',
      isVerified: true,
      age: 30,
      avatar: '/LogoCheckInnReal.png'
    });

    await adminUser.save();

    // Tráº£ vá» thÃ´ng tin (khÃ´ng bao gá»“m password)
    const { password: _, ...userInfo } = adminUser.toObject();

    res.status(201).json({
      success: true,
      message: 'TÃ i khoáº£n admin Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng',
      user: userInfo
    });

  } catch (error) {
    console.error('Error creating admin:', error);
    res.status(500).json({
      success: false,
      message: 'Lá»—i server khi táº¡o tÃ i khoáº£n admin'
    });
  }
});

// API kiá»ƒm tra danh sÃ¡ch admin
router.get('/list-admins', async (req, res) => {
  try {
    const admins = await User.find({ role: 'Admin' }).select('-password');
    
    res.json({
      success: true,
      count: admins.length,
      admins
    });

  } catch (error) {
    console.error('Error fetching admins:', error);
    res.status(500).json({
      success: false,
      message: 'Lá»—i server khi láº¥y danh sÃ¡ch admin'
    });
  }
});

module.exports = router;
```

### api\booking\booking.js
```js
const express = require("express");
const router = express.Router();
const Booking = require("../../models/Booking");
const User = require("../../models/User");
const Hotel = require("../../models/Hotel");
const Room = require("../../models/Room");
const auth = require("../../middleware/auth");
const axios = require("axios");
router.get("/", auth, async (req, res) => {
  try {
    const userId = req.userId;

    // Truy váº¥n cÃ¡c booking cá»§a ngÆ°á»i dÃ¹ng vÃ  láº¥y thÃ´ng tin Room vÃ  Hotel liÃªn quan
    const bookings = await Booking.find({ user: userId })
      .populate({
        path: "room",
        select: "type price imageroom hotel", // Láº¥y thÃªm `hotel` tá»« Room
        populate: {
          path: "hotel", // Populate Hotel qua Room
          select: "name location description stars imagehotel ", // Chá»n cÃ¡c trÆ°á»ng tá»« Hotel
        },
      })
      .select(
        "checkInDate checkOutDate phoneBooking emailBooking paymentStatus orderId bookingDate priceBooking"
      );

    // Kiá»ƒm tra náº¿u khÃ´ng cÃ³ Ä‘áº·t phÃ²ng nÃ o Ä‘Æ°á»£c tÃ¬m tháº¥y
    if (!bookings || bookings.length === 0) {
      return res.status(404).json({ message: "KhÃ´ng tÃ¬m tháº¥y Ä‘áº·t phÃ²ng nÃ o" });
    }

    // Tráº£ vá» dá»¯ liá»‡u booking bao gá»“m thÃ´ng tin Room vÃ  Hotel
    res.json(bookings);
  } catch (error) {
    console.error("Lá»—i khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng" });
  }
});
// Äoáº¡n mÃ£ cho API láº¥y danh sÃ¡ch khÃ¡ch sáº¡n cá»§a ngÆ°á»i quáº£n lÃ½
router.get("/hotelbooking", auth, async (req, res) => {
  try {
    const managerId = req.userId; // Láº¥y userId tá»« middleware

    const hotels = await Hotel.find({ manager: managerId }).populate(
      "manager",
      "name email"
    );

    res.status(200).json(hotels);
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: "Lá»—i server" });
  }
});

router.get("/booking/admin", auth, async (req, res) => {
  try {
    const userId = req.userId;

    // Truy váº¥n Ä‘á»ƒ láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng, bao gá»“m cáº£ vai trÃ²
    const user = await User.findById(userId).select("role"); // Chá»‰ láº¥y trÆ°á»ng role

    if (!user) {
      return res.status(404).json({ message: "NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i" });
    }

    const userRole = user.role; // Láº¥y vai trÃ² tá»« thÃ´ng tin ngÆ°á»i dÃ¹ng

    let bookings;

    // Láº¥y táº¥t cáº£ booking náº¿u lÃ  Admin
    if (userRole === "Admin") {
      bookings = await Booking.find()
        .populate({
          path: "room",
          select: "type price imageroom hotel",
          populate: {
            path: "hotel",
            select: "name location description stars imagehotel",
          },
        })
        .select(
          "checkInDate checkOutDate phoneBooking emailBooking paymentStatus orderId bookingDate priceBooking"
        );

      // Kiá»ƒm tra náº¿u khÃ´ng cÃ³ Ä‘áº·t phÃ²ng nÃ o Ä‘Æ°á»£c tÃ¬m tháº¥y
      if (!bookings || bookings.length === 0) {
        return res
          .status(404)
          .json({ message: "KhÃ´ng tÃ¬m tháº¥y Ä‘áº·t phÃ²ng nÃ o" });
      }

      // Tráº£ vá» dá»¯ liá»‡u booking bao gá»“m thÃ´ng tin Room vÃ  Hotel
      return res.json(bookings);
    } else {
      return res
        .status(403)
        .json({ message: "Báº¡n khÃ´ng cÃ³ quyá»n truy cáº­p vÃ o dá»¯ liá»‡u nÃ y" });
    }
  } catch (error) {
    console.error("Lá»—i khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng" });
  }
});
// API Ä‘á»ƒ láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng
router.get("/booking/manager", auth, async (req, res) => {
  try {
    const userId = req.userId;

    // TÃ¬m cÃ¡c khÃ¡ch sáº¡n mÃ  ngÆ°á»i dÃ¹ng sá»Ÿ há»¯u
    const hotels = await Hotel.find({ manager: userId }).select("_id rooms"); // Láº¥y khÃ¡ch sáº¡n theo manager

    if (!hotels || hotels.length === 0) {
      return res
        .status(404)
        .json({ message: "KhÃ´ng tÃ¬m tháº¥y khÃ¡ch sáº¡n nÃ o mÃ  báº¡n sá»Ÿ há»¯u." });
    }

    // Láº¥y táº¥t cáº£ roomIds tá»« cÃ¡c khÃ¡ch sáº¡n
    const roomIds = hotels.flatMap((hotel) => hotel.rooms);

    // TÃ¬m cÃ¡c booking cÃ³ phÃ²ng thuá»™c cÃ¡c khÃ¡ch sáº¡n mÃ  ngÆ°á»i dÃ¹ng sá»Ÿ há»¯u
    const bookings = await Booking.find({ room: { $in: roomIds } })
      .populate({
        path: "room",
        select: "type price imageroom hotel",
        populate: {
          path: "hotel",
          select: "name location description stars imagehotel",
        },
      })
      .select(
        "checkInDate checkOutDate phoneBooking emailBooking paymentStatus orderId bookingDate user priceBooking"
      ); // Láº¥y user trong booking

    // Kiá»ƒm tra náº¿u khÃ´ng cÃ³ Ä‘áº·t phÃ²ng nÃ o Ä‘Æ°á»£c tÃ¬m tháº¥y
    if (!bookings || bookings.length === 0) {
      return res.status(404).json({ message: "KhÃ´ng tÃ¬m tháº¥y Ä‘áº·t phÃ²ng nÃ o." });
    }

    // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng cho má»—i booking
    const bookingsWithUserData = await Promise.all(
      bookings.map(async (booking) => {
        const user = await User.findById(booking.user).select("name email"); // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
        return {
          ...booking.toObject(),
          user: user || { name: "NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i", email: "" }, // Náº¿u khÃ´ng tÃ¬m tháº¥y ngÆ°á»i dÃ¹ng, tráº£ vá» thÃ´ng bÃ¡o
        };
      })
    );

    // Tráº£ vá» dá»¯ liá»‡u booking bao gá»“m thÃ´ng tin Room, Hotel vÃ  User
    res.json(bookingsWithUserData);
  } catch (error) {
    console.error("Lá»—i khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi láº¥y danh sÃ¡ch Ä‘áº·t phÃ²ng." });
  }
});
// Cáº­p nháº­t tráº¡ng thÃ¡i booking
router.put("/:id/update-status", async (req, res) => {
  const { status } = req.body;
  try {
    const booking = await Booking.findByIdAndUpdate(
      req.params.id,
      { paymentStatus: status },
      { new: true }
    );
    res.json(booking);
  } catch (error) {
    res.status(500).send("Error updating status");
  }
});

// Cáº­p nháº­t booking theo ID
router.put("/:id/update", async (req, res) => {
  const { email, phoneBooking, checkInDate, checkOutDate, totalPrice } =
    req.body;

  try {
    // TÃ¬m booking theo ID
    const booking = await Booking.findById(req.params.id);
    if (!booking) {
      return res
        .status(404)
        .json({ message: "KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘áº·t phÃ²ng" });
    }

    // Cáº­p nháº­t thÃ´ng tin booking
    booking.emailBooking = email || booking.emailBooking;
    booking.phoneBooking = phoneBooking || booking.phoneBooking;

    // Validate vÃ  cáº­p nháº­t ngÃ y check-in, check-out náº¿u cÃ³
    if (checkInDate && !isNaN(new Date(checkInDate).getTime())) {
      booking.checkInDate = new Date(checkInDate);
    }
    if (checkOutDate && !isNaN(new Date(checkOutDate).getTime())) {
      booking.checkOutDate = new Date(checkOutDate);
    }

    // Láº¥y room vÃ  tÃ­nh toÃ¡n láº¡i tá»•ng tiá»n náº¿u cÃ³ thay Ä‘á»•i vá» ngÃ y lÆ°u trÃº
    const room = await Room.findById(booking.room);
    if (room && checkInDate && checkOutDate) {
      const days =
        (new Date(checkOutDate) - new Date(checkInDate)) /
        (1000 * 60 * 60 * 24);
      if (days > 0) {
        booking.priceBooking = totalPrice || days * room.price; // TÃ­nh tá»•ng tiá»n dá»±a trÃªn sá»‘ ngÃ y lÆ°u trÃº
      } else {
        return res
          .status(400)
          .json({ message: "NgÃ y tráº£ phÃ²ng pháº£i trÆ°á»›c ngÃ y Ä‘áº·t phÃ²ng" });
      }
    } else if (totalPrice) {
      booking.priceBooking = totalPrice; // Náº¿u totalPrice Ä‘Æ°á»£c truyá»n vÃ o, sá»­ dá»¥ng giÃ¡ Ä‘Ã³
    }

    // LÆ°u láº¡i booking Ä‘Ã£ cáº­p nháº­t
    await booking.save();

    // Tráº£ vá» káº¿t quáº£ sau khi cáº­p nháº­t
    res.status(200).json(booking);
  } catch (error) {
    console.error("Error updating booking:", error);
    res.status(500).json({ message: "Server error" });
  }
});

// XÃ³a booking theo ID
router.delete("/:id", async (req, res) => {
  const bookingId = req.params.id;

  try {
    const deletedBooking = await Booking.findByIdAndDelete(bookingId);
    if (!deletedBooking) {
      return res.status(404).json({ message: "Booking not found" });
    }
    res.status(200).json({ message: "Booking deleted successfully" });
  } catch (error) {
    console.error("Error deleting booking:", error);
    res.status(500).json({ message: "Server error" });
  }
});

// API Ä‘á»ƒ láº¥y tá»•ng sá»‘ Ä‘Æ¡n, tá»•ng sá»‘ Pending, tá»•ng sá»‘ Done vÃ  tá»•ng tiá»n
router.get("/booking/total", auth, async (req, res) => {
  try {
    const userId = req.userId;

    // TÃ¬m cÃ¡c khÃ¡ch sáº¡n mÃ  ngÆ°á»i dÃ¹ng sá»Ÿ há»¯u
    const hotels = await Hotel.find({ manager: userId }).select("_id rooms");

    if (!hotels || hotels.length === 0) {
      return res
        .status(404)
        .json({ message: "KhÃ´ng tÃ¬m tháº¥y khÃ¡ch sáº¡n nÃ o mÃ  báº¡n sá»Ÿ há»¯u." });
    }

    // Láº¥y táº¥t cáº£ roomIds tá»« cÃ¡c khÃ¡ch sáº¡n
    const roomIds = hotels.flatMap((hotel) => hotel.rooms);

    // TÃ¬m cÃ¡c booking cÃ³ phÃ²ng thuá»™c cÃ¡c khÃ¡ch sáº¡n mÃ  ngÆ°á»i dÃ¹ng sá»Ÿ há»¯u
    const bookings = await Booking.find({ room: { $in: roomIds } }).select(
      "paymentStatus priceBooking"
    );

    if (!bookings || bookings.length === 0) {
      return res.status(404).json({ message: "KhÃ´ng tÃ¬m tháº¥y Ä‘áº·t phÃ²ng nÃ o." });
    }

    // TÃ­nh tá»•ng sá»‘ Ä‘Æ¡n
    const totalBookings = bookings.length;

    // TÃ­nh tá»•ng sá»‘ Ä‘Æ¡n Pending vÃ  Done
    const pendingBookings = bookings.filter(
      (booking) => booking.paymentStatus === "Pending"
    ).length;

    const doneBookings = bookings.filter(
      (booking) => booking.paymentStatus === "Done"
    ).length;

    // TÃ­nh tá»•ng tiá»n
    const totalAmount = bookings.reduce((sum, booking) => {
      return sum + booking.priceBooking;
    }, 0);

    // Tráº£ vá» káº¿t quáº£ tá»•ng quan
    res.json({
      totalBookings,
      pendingBookings,
      doneBookings,
      totalAmount,
    });
  } catch (error) {
    console.error("Lá»—i khi láº¥y tá»•ng thÃ´ng tin Ä‘áº·t phÃ²ng:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi láº¥y tá»•ng thÃ´ng tin Ä‘áº·t phÃ²ng." });
  }
});

router.post("/booking/check-availability", async (req, res) => {
  const { roomId, checkInDate, checkOutDate } = req.body;

  const overlappingBookings = await Booking.find({
    room: roomId,
    $or: [
      { checkInDate: { $lt: checkOutDate, $gte: checkInDate } },
      { checkOutDate: { $gt: checkInDate, $lte: checkOutDate } },
      {
        checkInDate: { $lte: checkInDate },
        checkOutDate: { $gte: checkOutDate },
      },
    ],
  });

  if (overlappingBookings.length > 0) {
    return res.status(200).json({ available: false });
  }

  return res.status(200).json({ available: true });
});
// dat phong
router.get("/booking/room-availability/:roomId", async (req, res) => {
  const { roomId } = req.params;

  try {
    // Láº¥y danh sÃ¡ch cÃ¡c láº§n Ä‘áº·t phÃ²ng cá»§a phÃ²ng cá»¥ thá»ƒ, loáº¡i bá» booking cÃ³ paymentStatus lÃ  'Done'
    const bookings = await Booking.find({
      room: roomId,
      paymentStatus: { $ne: "Done" }, // Loáº¡i bá» nhá»¯ng booking Ä‘Ã£ hoÃ n táº¥t
    });

    // TrÃ­ch xuáº¥t cÃ¡c ngÃ y Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t tá»« booking chÆ°a hoÃ n táº¥t
    const bookedDates = bookings.flatMap((booking) => {
      const dates = [];
      let currentDate = new Date(booking.checkInDate);
      const endDate = new Date(booking.checkOutDate);

      while (currentDate <= endDate) {
        dates.push(new Date(currentDate).toISOString().split("T")[0]); // LÆ°u á»Ÿ dáº¡ng YYYY-MM-DD
        currentDate.setDate(currentDate.getDate() + 1);
      }
      return dates;
    });

    res.status(200).json({ bookedDates });
  } catch (error) {
    res.status(500).json({ message: "Lá»—i khi láº¥y thÃ´ng tin phÃ²ng", error });
  }
});

router.post("/booking/check-availability", async (req, res) => {
  const { roomId, checkInDate, checkOutDate } = req.body;

  const overlappingBookings = await Booking.find({
    room: roomId,
    $or: [
      { checkInDate: { $lt: checkOutDate, $gte: checkInDate } },
      { checkOutDate: { $gt: checkInDate, $lte: checkOutDate } },
      {
        checkInDate: { $lte: checkInDate },
        checkOutDate: { $gte: checkOutDate },
      },
    ],
  });

  if (overlappingBookings.length > 0) {
    return res.status(200).json({ available: false });
  }

  return res.status(200).json({ available: true });
});

router.get("/room-availability/:roomId", async (req, res) => {
  const { roomId } = req.params;

  try {
    // Láº¥y danh sÃ¡ch cÃ¡c láº§n Ä‘áº·t phÃ²ng cá»§a phÃ²ng cá»¥ thá»ƒ
    const bookings = await Booking.find({ room: roomId });

    // TrÃ­ch xuáº¥t cÃ¡c ngÃ y Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t
    const bookedDates = bookings.flatMap((booking) => {
      const dates = [];
      let currentDate = new Date(booking.checkInDate);
      const endDate = new Date(booking.checkOutDate);

      while (currentDate <= endDate) {
        dates.push(new Date(currentDate).toISOString().split("T")[0]); // LÆ°u á»Ÿ dáº¡ng YYYY-MM-DD
        currentDate.setDate(currentDate.getDate() + 1);
      }
      return dates;
    });

    res.status(200).json({ bookedDates });
  } catch (error) {
    res.status(500).json({ message: "Lá»—i khi láº¥y thÃ´ng tin phÃ²ng", error });
  }
});
module.exports = router;

```

### api\checkout\checkout.js
```js
const express = require("express");
const router = express.Router();
const Room = require("../../models/Room"); // Model Room
const Booking = require("../../models/Booking"); // Model Booking
const axios = require("axios");
const crypto = require("crypto");

// API láº¥y thÃ´ng tin chi tiáº¿t phÃ²ng dá»±a trÃªn roomId
router.get("/:roomId", async (req, res) => {
  try {
    const room = await Room.findById(req.params.roomId);
    if (!room) {
      return res.status(404).json({ message: "PhÃ²ng khÃ´ng tá»“n táº¡i" });
    }
    res.json(room);
  } catch (error) {
    console.error("Lá»—i khi láº¥y thÃ´ng tin phÃ²ng:", error);
    res.status(500).json({ message: "CÃ³ lá»—i xáº£y ra khi láº¥y thÃ´ng tin phÃ²ng" });
  }
});

// API thanh toÃ¡n qua MoMo
router.post("/payment", async (req, res) => {
  const accessKey = "F8BBA842ECF85";
  const secretKey = "K951B6PE1waDMi640xX08PD3vg6EkVlz";
  const orderInfo = "pay with MoMo";
  const partnerCode = "MOMO";
  const redirectUrl = "http://localhost:3000/success"; // Chuyá»ƒn hÆ°á»›ng trang thÃ nh cÃ´ng
  const ipnUrl = "payWithMethod";
  const requestType = "payWithMethod";
  const amount = req.body.amount;
  const orderId = partnerCode + new Date().getTime(); // Táº¡o orderId duy nháº¥t
  const requestId = orderId;
  const extraData = "";
  const autoCapture = true;
  const lang = "vi";

  const rawSignature = `accessKey=${accessKey}&amount=${amount}&extraData=${extraData}&ipnUrl=${ipnUrl}&orderId=${orderId}&orderInfo=${orderInfo}&partnerCode=${partnerCode}&redirectUrl=${redirectUrl}&requestId=${requestId}&requestType=${requestType}`;
  const signature = crypto
    .createHmac("sha256", secretKey)
    .update(rawSignature)
    .digest("hex");

  const requestBody = JSON.stringify({
    partnerCode: partnerCode,
    partnerName: "Test",
    storeId: "MomoTestStore",
    requestId: requestId,
    amount: amount,
    orderId: orderId,
    orderInfo: orderInfo,
    redirectUrl: redirectUrl,
    ipnUrl: ipnUrl,
    lang: lang,
    requestType: requestType,
    autoCapture: autoCapture,
    extraData: extraData,
    signature: signature,
  });

  const options = {
    method: "POST",
    url: "https://test-payment.momo.vn/v2/gateway/api/create",
    headers: {
      "Content-Type": "application/json",
      "Content-Length": Buffer.byteLength(requestBody),
    },
    data: requestBody,
  };

  try {
    const response = await axios(options);
    const confirmResponse = await axios.post(
      "http://localhost:5000/api/checkout/confirm",
      {
        userId: req.body.userId,
        roomId: req.body.roomId,
        checkInDate: req.body.checkInDate,
        checkOutDate: req.body.checkOutDate,
        phoneBooking: req.body.phoneBooking,
        emailBooking: req.body.emailBooking,
        paymentStatus: "Pending",
        orderId: orderId,
        priceBooking: req.body.amount, // LÆ°u giÃ¡ vÃ o booking
      }
    );

    res.json({
      payUrl: response.data.payUrl,
      orderId: orderId,
      bookingId: confirmResponse.data.bookingId,
    });
  } catch (error) {
    console.error("Lá»—i khi thanh toÃ¡n:", error);
    res.status(500).json({ message: "CÃ³ lá»—i xáº£y ra khi thanh toÃ¡n" });
  }
});

/// Äá»‹nh nghÄ©a API xÃ¡c nháº­n booking
router.post("/confirmchange", async (req, res) => {
  const { orderId } = req.body;

  if (!orderId) {
    return res.status(400).json({ message: "MÃ£ Ä‘Æ¡n hÃ ng khÃ´ng Ä‘Æ°á»£c cung cáº¥p" });
  }

  try {
    // TÃ¬m booking dá»±a trÃªn orderId
    const booking = await Booking.findOne({ orderId: orderId });

    if (!booking) {
      return res.status(404).json({ message: "KhÃ´ng tÃ¬m tháº¥y booking" });
    }

    // Náº¿u tÃ¬m tháº¥y booking, báº¡n cÃ³ thá»ƒ láº¥y _id
    const bookingId = booking._id; // KhÃ³a chÃ­nh cá»§a booking

    // Cáº­p nháº­t paymentStatus tá»« Pending thÃ nh Complete
    booking.paymentStatus = "Complete";
    await booking.save();

    return res.status(200).json({
      message: "XÃ¡c nháº­n booking thÃ nh cÃ´ng",
      bookingId: bookingId, // Tráº£ vá» bookingId náº¿u cáº§n
      booking, // Tráº£ vá» thÃ´ng tin booking Ä‘Ã£ cáº­p nháº­t
    });
  } catch (error) {
    console.error("Lá»—i khi xÃ¡c nháº­n booking:", error);
    return res
      .status(500)
      .json({ message: "ÄÃ£ xáº£y ra lá»—i trong quÃ¡ trÃ¬nh xÃ¡c nháº­n booking" });
  }
});

// API xÃ¡c nháº­n vÃ  lÆ°u booking sau khi thanh toÃ¡n thÃ nh cÃ´ng
router.post("/confirm", async (req, res) => {
  const {
    userId,
    roomId,
    checkInDate,
    checkOutDate,
    phoneBooking,
    emailBooking,
    paymentStatus,
    orderId,
    priceBooking,
  } = req.body;

  const newBooking = new Booking({
    user: userId || undefined,
    room: roomId,
    bookingDate: new Date(),
    checkInDate: new Date(checkInDate),
    checkOutDate: new Date(checkOutDate),
    phoneBooking: phoneBooking,
    emailBooking: emailBooking,
    paymentStatus: paymentStatus || "Pending",
    orderId: orderId,
    priceBooking: priceBooking,
  });

  try {
    const savedBooking = await newBooking.save();
    await room.save();
    res
      .status(201)
      .json({ message: "Äáº·t phÃ²ng thÃ nh cÃ´ng", bookingId: savedBooking._id });
  } catch (error) {
    console.error("Lá»—i khi lÆ°u booking:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi lÆ°u thÃ´ng tin Ä‘áº·t phÃ²ng" });
  }
});
router.post("/confirmpaid", async (req, res) => {
  const {
    userId,
    roomId,
    checkInDate,
    checkOutDate,
    phoneBooking,
    emailBooking,
    paymentStatus,
    orderId,
    priceBooking,
  } = req.body;

  const newBooking = new Booking({
    user: userId || undefined,
    room: roomId,
    bookingDate: new Date(),
    checkInDate: new Date(checkInDate),
    checkOutDate: new Date(checkOutDate),
    phoneBooking: phoneBooking,
    emailBooking: emailBooking,
    paymentStatus: paymentStatus || "Pending", // Tráº¡ng thÃ¡i thanh toÃ¡n
    orderId: orderId,
    priceBooking: priceBooking,
  });

  try {
    const savedBooking = await newBooking.save();
    const room = await Room.findById(roomId);
    await room.save();
    res
      .status(201)
      .json({ message: "Äáº·t phÃ²ng thÃ nh cÃ´ng", bookingId: savedBooking._id });
  } catch (error) {
    console.error("Lá»—i khi lÆ°u booking:", error);
    res
      .status(500)
      .json({ message: "CÃ³ lá»—i xáº£y ra khi lÆ°u thÃ´ng tin Ä‘áº·t phÃ²ng" });
  }
});

// API kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n
router.get("/payment-status/:orderId", async (req, res) => {
  const { orderId } = req.params;
  try {
    const booking = await Booking.findOne({ orderId: orderId });
    if (booking) {
      res.json({ paymentStatus: booking.paymentStatus });
    } else {
      res.status(404).json({ message: "KhÃ´ng tÃ¬m tháº¥y booking" });
    }
  } catch (error) {
    console.error("Lá»—i khi kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n:", error);
    res.status(500).json({ message: "CÃ³ lá»—i xáº£y ra khi kiá»ƒm tra tráº¡ng thÃ¡i" });
  }
});

module.exports = router;

```

### api\dashboard\usertable.js
```js
const express = require('express');
const router = express.Router();
const User = require('../../models/User');
const adminAuth = require('../../middleware/adminAuth');

// Route láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng - CHá»ˆ Admin
router.get('/', adminAuth, async (req, res) => {
    try {
        const users = await User.find().select('-password'); // KhÃ´ng tráº£ vá» password
        res.json(users);
    } catch (error) {
        res.status(500).json({ message: error.message });
    }
});

// Route xÃ³a ngÆ°á»i dÃ¹ng - CHá»ˆ Admin
router.delete('/:id', adminAuth, async (req, res) => {
    try {
        const user = await User.findByIdAndDelete(req.params.id);
        if (!user) return res.status(404).json({ message: 'KhÃ´ng tÃ¬m tháº¥y ngÆ°á»i dÃ¹ng' });
        res.json({ message: 'NgÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c xÃ³a' });
    } catch (error) {
        res.status(500).json({ message: error.message });
    }
});

// Route cáº­p nháº­t ngÆ°á»i dÃ¹ng - CHá»ˆ Admin
router.put('/:id', adminAuth, async (req, res) => {
    const { name, email, role } = req.body;
    try {
        const user = await User.findById(req.params.id);
        if (!user) return res.status(404).json({ message: 'KhÃ´ng tÃ¬m tháº¥y ngÆ°á»i dÃ¹ng' });

        user.name = name;
        user.email = email;
        user.role = role;

        await user.save();
        res.json(user);
    } catch (error) {
        res.status(500).json({ message: error.message });
    }
});

// Route láº¥y dá»¯ liá»‡u tÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng theo thÃ¡ng
router.get('/growth', async (req, res) => {
    try {
        const users = await User.find();
        const userGrowthData = [];

        const monthCounts = {};

        users.forEach(user => {
            const date = new Date(user.registrationDate);
            const month = date.toLocaleString('default', { month: 'short' });
            if (!monthCounts[month]) {
                monthCounts[month] = 0;
            }
            monthCounts[month]++;
        });

        for (const [month, count] of Object.entries(monthCounts)) {
            userGrowthData.push({ month, users: count });
        }

        userGrowthData.sort((a, b) => new Date(`${a.month} 1, 2024`) - new Date(`${b.month} 1, 2024`));

        res.json(userGrowthData);
    } catch (error) {
        res.status(500).json({ message: error.message });
    }
});

module.exports = router;

```

### api\detail\detail.js
```js
// routes/detail/order.js
const express = require('express');
const router = express.Router();
const Hotel = require('../../models/Hotel');
const Rate = require('../../models/Rate');
const Room = require('../../models/Room'); // Import mÃ´ hÃ¬nh Room
const auth = require("../../middleware/auth");
// GET hotel details by ID
router.get('/:hotelId', async (req, res) => {
  try {
    const hotel = await Hotel.findById(req.params.hotelId);
    if (!hotel) {
      return res.status(404).json({ message: 'Hotel not found' });
    }

    const ratings = await Rate.find({ hotel: hotel._id });
    const averageRating = ratings.length > 0 
      ? ratings.reduce((acc, rate) => acc + rate.rating, 0) / ratings.length 
      : 0;

    // TÃ¬m giÃ¡ phÃ²ng tháº¥p nháº¥t cá»§a khÃ¡ch sáº¡n
    const rooms = await Room.find({ hotel: hotel._id });
    const lowestPrice = rooms.length > 0 
      ? Math.min(...rooms.map(room => room.price)) 
      : 0;
    res.json({
      hotel,
      averageRating,
      totalRatings: ratings.length,
      lowestPrice // GiÃ¡ phÃ²ng tháº¥p nháº¥t
    });
  } catch (error) {
    res.status(500).json({ message: 'Server error' });
  }
});

// Láº¥y thÃ´ng tin hÃ¬nh áº£nh cá»§a khÃ¡ch sáº¡n vÃ  hÃ¬nh áº£nh cÃ¡c phÃ²ng theo ID
router.get('/:hotelId/image', async (req, res) => {
  const { hotelId } = req.params;

  if (!hotelId) {
    return res.status(400).json({ message: 'KhÃ¡ch sáº¡n ID khÃ´ng há»£p lá»‡.' });
  }

  try {
    // TÃ¬m khÃ¡ch sáº¡n
    const hotel = await Hotel.findById(hotelId).select('imagehotel');
    if (!hotel) {
      return res.status(404).json({ message: 'KhÃ¡ch sáº¡n khÃ´ng tÃ¬m tháº¥y.' });
    }

    // TÃ¬m táº¥t cáº£ cÃ¡c phÃ²ng cá»§a khÃ¡ch sáº¡n
    const rooms = await Room.find({ hotel: hotelId }).select('imageroom');
    
    // Táº¡o máº£ng chá»©a táº¥t cáº£ hÃ¬nh áº£nh
    const images = {
      hotelImages: hotel.imagehotel.slice(0, 5), // Láº¥y tá»‘i Ä‘a 5 hÃ¬nh áº£nh khÃ¡ch sáº¡n
      roomImages: rooms.flatMap(room => room.imageroom), // Láº¥y táº¥t cáº£ hÃ¬nh áº£nh phÃ²ng
    };

    // Kiá»ƒm tra náº¿u khÃ´ng cÃ³ hÃ¬nh áº£nh nÃ o
    if (images.hotelImages.length === 0 && images.roomImages.length === 0) {
      return res.status(204).json({ message: 'KhÃ¡ch sáº¡n khÃ´ng cÃ³ áº£nh nÃ o.' }); // 204 No Content
    }

    res.json(images); // Tráº£ vá» hÃ¬nh áº£nh khÃ¡ch sáº¡n vÃ  phÃ²ng
  } catch (error) {
    console.error('Error fetching hotel and room images:', error);
    res.status(500).json({ message: 'CÃ³ lá»—i xáº£y ra khi láº¥y thÃ´ng tin.', error: error.message });
  }
});

router.get('/:hotelId/rooms', async (req, res) => {
  const { hotelId } = req.params;

  try {
    // TÃ¬m khÃ¡ch sáº¡n theo hotelId
    const hotel = await Hotel.findById(hotelId);
    if (!hotel) {
      return res.status(404).json({ message: 'KhÃ¡ch sáº¡n khÃ´ng tá»“n táº¡i' });
    }

    // Láº¥y danh sÃ¡ch phÃ²ng liÃªn quan Ä‘áº¿n khÃ¡ch sáº¡n
    const rooms = await Room.find({ hotel: hotelId }); // Giáº£ sá»­ báº¡n Ä‘Ã£ cÃ³ trÆ°á»ng 'hotel' trong model Room
    res.status(200).json(rooms);
  } catch (error) {
    console.error('Error fetching rooms:', error);
    res.status(500).json({ message: 'ÄÃ£ xáº£y ra lá»—i khi láº¥y thÃ´ng tin phÃ²ng' });
  }
});

module.exports = router;

// Láº¥y táº¥t cáº£ cÃ¡c Ä‘Ã¡nh giÃ¡ theo hotelId
router.get('/:hotelId/ratings', async (req, res) => {
  try {
    const { hotelId } = req.params;
    const ratings = await Rate.find({ hotel: hotelId })
      .populate('user', 'name avatar') // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng
      .exec();

    res.json(ratings);
  } catch (error) {
    res.status(500).json({ message: 'CÃ³ lá»—i xáº£y ra khi láº¥y Ä‘Ã¡nh giÃ¡' });
  }
});

// ÄÃ¡nh giÃ¡ khÃ¡ch sáº¡n
router.post('/rate', auth, async (req, res) => {
  const { hotel, rating, comment } = req.body;
  const userId = req.userId;

  try {
    // Kiá»ƒm tra xem ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Ã¡nh giÃ¡ khÃ¡ch sáº¡n nÃ y chÆ°a
    const existingRate = await Rate.findOne({ hotel, user: userId });
    if (existingRate) {
      return res.status(400).json({ message: 'Báº¡n Ä‘Ã£ Ä‘Ã¡nh giÃ¡ khÃ¡ch sáº¡n nÃ y rá»“i!' });
    }

    // Táº¡o Ä‘Ã¡nh giÃ¡ má»›i
    const newRate = new Rate({
      hotel,
      user: userId,
      rating,
      comment,
    });

    await newRate.save();
    res.status(201).json({ message: 'ÄÃ¡nh giÃ¡ thÃ nh cÃ´ng!', rate: newRate });
  } catch (err) {
    console.error(err);
    res.status(500).json({ message: 'CÃ³ lá»—i xáº£y ra!' });
  }
});

// Láº¥y Ä‘Ã¡nh giÃ¡
router.get('/rate/:hotelId', auth, async (req, res) => {
  const { hotelId } = req.params;

  // Kiá»ƒm tra náº¿u khÃ¡ch sáº¡n cÃ³ tá»“n táº¡i
  const hotel = await Hotel.findById(hotelId);
  if (!hotel) {
    return res.status(404).json({ msg: 'KhÃ¡ch sáº¡n khÃ´ng tá»“n táº¡i' });
  }

  try {
    // Láº¥y Ä‘Ã¡nh giÃ¡ cá»§a ngÆ°á»i dÃ¹ng cho khÃ¡ch sáº¡n nÃ y
    const rate = await Rate.findOne({ hotel: hotelId, user: req.userId });
    if (!rate) {
      return res.status(404).json({ msg: 'Báº¡n chÆ°a Ä‘Ã¡nh giÃ¡ khÃ¡ch sáº¡n nÃ y' });
    }

    return res.status(200).json({ rate });
  } catch (err) {
    console.error(err);
    return res.status(500).json({ msg: 'Lá»—i server' });
  }
});

module.exports = router;

```

### api\favorite\favorite.js
```js
const express = require('express');
const mongoose = require('mongoose');
const Favorite = require('../../models/Favorite');
const Hotel = require('../../models/Hotel');  // Model Hotel
const Room = require('../../models/Room');  // Model Room
const auth = require('../../middleware/auth'); // Middleware xÃ¡c thá»±c

const router = express.Router();

// ThÃªm khÃ¡ch sáº¡n vÃ o danh sÃ¡ch yÃªu thÃ­ch
router.post('/', auth, async (req, res) => {
  const { hotelId } = req.body;
  const userId = req.userId; // Láº¥y userId tá»« middleware

  try {
    // Kiá»ƒm tra náº¿u khÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c yÃªu thÃ­ch
    const exists = await Favorite.exists({ userId, hotelId });
    if (exists) return res.status(400).json({ message: 'KhÃ¡ch sáº¡n nÃ y Ä‘Ã£ Ä‘Æ°á»£c yÃªu thÃ­ch' });

    // Táº¡o yÃªu thÃ­ch má»›i
    const favorite = new Favorite({ userId, hotelId });
    await favorite.save();
    res.status(201).json({ message: 'ThÃªm vÃ o danh sÃ¡ch yÃªu thÃ­ch thÃ nh cÃ´ng' });
  } catch (error) {
    res.status(500).json({ message: 'Lá»—i server', error });
  }
});

// Kiá»ƒm tra tráº¡ng thÃ¡i yÃªu thÃ­ch cá»§a má»™t khÃ¡ch sáº¡n
router.get('/:hotelId', auth, async (req, res) => {
  const { hotelId } = req.params;
  const userId = req.userId; // Láº¥y userId tá»« middleware

  try {
    // Kiá»ƒm tra náº¿u yÃªu thÃ­ch tá»“n táº¡i trong cÆ¡ sá»Ÿ dá»¯ liá»‡u
    const favorite = await Favorite.findOne({ userId, hotelId });

    // Náº¿u khÃ´ng tÃ¬m tháº¥y yÃªu thÃ­ch, máº·c Ä‘á»‹nh lÃ  chÆ°a yÃªu thÃ­ch (false)
    const isFavorite = favorite ? true : false;

    res.status(200).json({ isFavorite });
  } catch (error) {
    res.status(500).json({ message: 'Lá»—i server', error });
  }
});

// Há»§y yÃªu thÃ­ch khÃ¡ch sáº¡n
router.delete('/:hotelId', auth, async (req, res) => {
  const { hotelId } = req.params;
  const userId = req.userId; // Láº¥y userId tá»« middleware

  try {
    await Favorite.deleteOne({ userId, hotelId });
    res.status(200).json({ message: 'Há»§y yÃªu thÃ­ch thÃ nh cÃ´ng' });
  } catch (error) {
    res.status(500).json({ message: 'Lá»—i server', error });
  }
});

router.get('/', auth, async (req, res) => {
  try {
    const userId = req.userId; // Láº¥y userId tá»« middleware xÃ¡c thá»±c

    // TÃ¬m táº¥t cáº£ cÃ¡c yÃªu thÃ­ch cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
    const favorites = await Favorite.find({ userId }).populate('hotelId');

    // Xá»­ lÃ½ Ä‘á»ƒ láº¥y thÃ´ng tin khÃ¡ch sáº¡n vÃ  giÃ¡ phÃ²ng
    const favoriteHotels = await Promise.all(
      favorites.map(async (favorite) => {
        const hotel = await Hotel.findById(favorite.hotelId).lean();        
        // TÃ¬m giÃ¡ phÃ²ng tháº¥p nháº¥t vÃ  cao nháº¥t cá»§a khÃ¡ch sáº¡n
        const prices = await Room.find({ hotel: hotel._id })
          .select('price')
          .lean();
          
        const roomPrices = prices.map(room => room.price);
        const minPrice = Math.min(...roomPrices);
        const maxPrice = Math.max(...roomPrices);

        return {
          hotelId: hotel._id,
          name: hotel.name,
          location: hotel.location,
          imagehotel: hotel.imagehotel,
          stars: hotel.stars,
          minPrice,
          maxPrice,
        };
      })
    );

    res.json(favoriteHotels);
  } catch (error) {
    console.error(error);
    res.status(500).json({ msg: 'Lá»—i mÃ¡y chá»§' });
  }
});

module.exports = router;

```

### api\homepage\soft.js
```js
const express = require('express');
const router = express.Router();
const Hotel = require('../../models/Hotel');
const Rate = require('../../models/Rate');
const Room = require('../../models/Room');

// Route láº¥y 4 khÃ¡ch sáº¡n cÃ³ nhiá»u Ä‘Ã¡nh giÃ¡ nháº¥t, Ä‘Ã¡nh giÃ¡ cao nháº¥t
router.get('/top4hotel', async (req, res) => {
  try {
    const topHotels = await Hotel.aggregate([
      {
        $lookup: {
          from: 'rates',
          localField: '_id',
          foreignField: 'hotel',
          as: 'reviews'
        }
      },
      {
        $project: {
          name: 1,
          location: 1,
          description: 1,
          imagehotel: 1,
          reviewsCount: { $size: '$reviews' }, 
          averageRating: { $avg: '$reviews.rating' } 
        }
      },
      { 
        $sort: { reviewsCount: -1, averageRating: -1 } // Sáº¯p xáº¿p theo sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ vÃ  Ä‘iá»ƒm trung bÃ¬nh
      },
      { 
        $limit: 4 //tráº£ vá» 4 khÃ¡ch sáº¡n
      }
    ]);

    // Láº¥y giÃ¡ phÃ²ng tháº¥p nháº¥t vÃ  cao nháº¥t
    const hotelsWithPriceRange = await Promise.all(
      topHotels.map(async hotel => {
        const rooms = await Room.find({ hotel: hotel._id }).sort({ price: 1 }); // Sáº¯p xáº¿p giÃ¡ phÃ²ng tá»« tháº¥p Ä‘áº¿n cao
        const lowestPrice = rooms.length > 0 ? rooms[0].price : null;
        const highestPrice = rooms.length > 0 ? rooms[rooms.length - 1].price : null;
        return {
          ...hotel,
          lowestPrice,  // GiÃ¡ tháº¥p nháº¥t
          highestPrice  // GiÃ¡ cao nháº¥t
        };
      })
    );
    if (hotelsWithPriceRange.length === 0) {
      return res.status(404).json({ msg: 'KhÃ´ng cÃ³ khÃ¡ch sáº¡n nÃ o' });
    }
    res.status(200).json(hotelsWithPriceRange); // Tráº£ vá» danh sÃ¡ch 4 khÃ¡ch sáº¡n kÃ¨m giÃ¡ tháº¥p nháº¥t vÃ  cao nháº¥t
  } catch (err) {
    console.error('Lá»—i server:', err);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});


router.get('/random-hotel', async (req, res) => {
  try {
    // Láº¥y ngáº«u nhiÃªn 4 khÃ¡ch sáº¡n tá»« collection
    const randomHotels = await Hotel.aggregate([
      { $sample: { size: 4 } } // Random láº¥y 4 khÃ¡ch sáº¡n báº¥t ká»³
    ]);

    // Láº¥y giÃ¡ phÃ²ng tháº¥p nháº¥t vÃ  cao nháº¥t cho má»—i khÃ¡ch sáº¡n
    const hotelsWithPriceRange = await Promise.all(
      randomHotels.map(async hotel => {
        const rooms = await Room.find({ hotel: hotel._id }).sort({ price: 1 }); // Sáº¯p xáº¿p giÃ¡ phÃ²ng tá»« tháº¥p Ä‘áº¿n cao
        const lowestPrice = rooms.length > 0 ? rooms[0].price : null;
        const highestPrice = rooms.length > 0 ? rooms[rooms.length - 1].price : null;

        return {
          ...hotel,
          lowestPrice,  // GiÃ¡ tháº¥p nháº¥t
          highestPrice  // GiÃ¡ cao nháº¥t
        };
      })
    );

    if (hotelsWithPriceRange.length === 0) {
      return res.status(404).json({ msg: 'KhÃ´ng cÃ³ khÃ¡ch sáº¡n nÃ o' });
    }

    res.status(200).json(hotelsWithPriceRange); // Tráº£ vá» danh sÃ¡ch khÃ¡ch sáº¡n kÃ¨m giÃ¡ tháº¥p nháº¥t vÃ  cao nháº¥t
  } catch (err) {
    console.error('Lá»—i server:', err);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});


module.exports = router;

```

### api\hotel_manager\hotel.js
```js
// routes/hotel_manager/hotel.js
const express = require('express');
const router = express.Router();
const Hotel = require('../../models/Hotel');
const User = require('../../models/User');
const auth = require('../../middleware/auth'); 
const { uploadHotel } = require('../../middleware/upload'); // Sá»­ dá»¥ng uploadHotel
const cloudinary = require('cloudinary').v2;
const bcrypt = require('bcrypt'); // Äá»ƒ kiá»ƒm tra máº­t kháº©u náº¿u cáº§n

// HÃ m láº¥y publicId tá»« URL cá»§a Cloudinary
const getPublicIdFromUrl = (url) => {
  const matches = url.match(/\/v\d+\/(.+)\.(jpg|jpeg|png|gif|webp)/);
  return matches ? matches[1] : null;
};

// Route thÃªm khÃ¡ch sáº¡n
// ThÃªm khÃ¡ch sáº¡n
router.post('/addhotel', auth, uploadHotel.array('imagehotel', 5), async (req, res) => {
  const { name, location, description, rooms, stars } = req.body;
  try {
    const managerId = req.userId; // Láº¥y userId
    // Kiá»ƒm tra xem cÃ³ tá»‡p nÃ o khÃ´ng
    if (!req.files || req.files.length === 0) {
      return res.status(400).json({ msg: 'KhÃ´ng cÃ³ tá»‡p nÃ o Ä‘Æ°á»£c táº£i lÃªn' });
    }
    // Láº¥y Ä‘Æ°á»ng dáº«n áº£nh sau khi upload
    const imageUrls = req.files.map(file => file.path);  
    // Táº¡o khÃ¡ch sáº¡n má»›i theo mÃ´ hÃ¬nh
    const newHotel = new Hotel({
      name,
      location,
      description,
      manager: managerId,
      rooms: rooms ? rooms.split(',') : [],  // Chuyá»ƒn Ä‘á»•i tá»« chuá»—i thÃ nh máº£ng náº¿u cáº§n
      imagehotel: imageUrls,
      stars: stars || 3  // Máº·c Ä‘á»‹nh sá»‘ sao lÃ  3 náº¿u khÃ´ng cÃ³ giÃ¡ trá»‹
    });
    await newHotel.save();
    res.status(201).json({ msg: 'KhÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng', hotel: newHotel });
  } catch (err) {
    res.status(500).json({ msg: 'Lá»—i server', error: err.message });
  }
});




// Route láº¥y danh sÃ¡ch khÃ¡ch sáº¡n cá»§a ngÆ°á»i dÃ¹ng hiá»‡n táº¡i
router.get('/myhotels', auth, async (req, res) => {
  try {
    const managerId = req.userId; // Láº¥y userId tá»« middleware

    const hotels = await Hotel.find({ manager: managerId })
      .populate('manager', 'name email'); 

    res.status(200).json(hotels);
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});
router.get('/api/hotel', async (req, res) => {
  try {
    const hotels = await Hotel.find().populate('manager');

    const hotelWithLowestPrice = await Promise.all(
      hotels.map(async (hotel) => {
        const rooms = await Room.find({ hotel: hotel._id });
        const lowestRoomPrice = rooms.length > 0 ? Math.min(...rooms.map(room => room.price)) : null;
        
        return {
          ...hotel.toObject(),
          lowestRoomPrice,
        };
      })
    );

    res.json(hotelWithLowestPrice);
  } catch (error) {
    console.error("Error fetching hotels:", error);
    res.status(500).json({ message: "Internal server error" });
  }
});

// Route láº¥y thÃ´ng tin khÃ¡ch sáº¡n cá»¥ thá»ƒ
router.get('/:hotelId', auth, async (req, res) => {
  try {
    const hotelId = req.params.hotelId;
    const hotel = await Hotel.findById(hotelId);

    if (!hotel) {
      return res.status(404).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y khÃ¡ch sáº¡n' });
    }

    res.json(hotel);
  } catch (error) {
    res.status(500).json({ msg: 'Lá»—i server', error });
  }
});

// Route xÃ³a khÃ¡ch sáº¡n
router.delete('/:hotelId', auth, async (req, res) => {
  const { hotelId } = req.params;
  const userId = req.userId; // Láº¥y userId tá»« middleware auth
  const { password } = req.body; // Láº¥y máº­t kháº©u tá»« body

  try {
    // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng tá»« model User
    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i' });
    }

    // Kiá»ƒm tra máº­t kháº©u náº¿u cáº§n
    const isMatch = await bcrypt.compare(password, user.password); // Kiá»ƒm tra máº­t kháº©u
    if (!isMatch) {
      return res.status(403).json({ msg: 'Máº­t kháº©u khÃ´ng Ä‘Ãºng' });
    }

    const hotel = await Hotel.findById(hotelId);
    if (!hotel) {
      return res.status(404).json({ msg: 'KhÃ¡ch sáº¡n khÃ´ng tá»“n táº¡i' });
    }

    // Kiá»ƒm tra quyá»n
    const isAdmin = user.role === 'Admin';
    const isManager = user.role === 'HotelManager';
    
    if (isManager && !hotel.manager.equals(user._id)) {
      return res.status(403).json({ msg: 'Báº¡n khÃ´ng cÃ³ quyá»n xÃ³a khÃ¡ch sáº¡n nÃ y' });
    }

    if (!isAdmin && !isManager) {
      return res.status(403).json({ msg: 'Báº¡n khÃ´ng cÃ³ quyá»n xÃ³a khÃ¡ch sáº¡n' });
    }

    await Hotel.findByIdAndDelete(hotelId);
    return res.json({ msg: 'KhÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng' });

  } catch (error) {
    console.error('Lá»—i khi xÃ³a khÃ¡ch sáº¡n:', error);
    return res.status(500).json({ msg: 'ÄÃ£ xáº£y ra lá»—i trong quÃ¡ trÃ¬nh xÃ³a khÃ¡ch sáº¡n' });
  }
});

// Route cáº­p nháº­t khÃ¡ch sáº¡n
router.put('/:hotelId', auth, uploadHotel.array('imagehotel', 5), async (req, res) => {
  const { hotelId } = req.params;
  const { name, location, description, stars, removedImages = [] } = req.body;

  try {
    const hotel = await Hotel.findById(hotelId);
    if (!hotel) {
      return res.status(404).json({ msg: 'KhÃ¡ch sáº¡n khÃ´ng tá»“n táº¡i' });
    }

    const imageHotelUrls = req.files ? req.files.map(file => file.path) : [];

    hotel.name = name || hotel.name;
    hotel.location = location || hotel.location;
    hotel.description = description !== undefined ? description : hotel.description;
    hotel.stars = stars || hotel.stars;


    hotel.imagehotel = [...hotel.imagehotel, ...imageHotelUrls];

    // XÃ³a áº£nh Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u
    if (Array.isArray(removedImages) && removedImages.length > 0) {
      const publicIdsToRemove = removedImages.map(url => getPublicIdFromUrl(url)).filter(id => id);
    
      for (const publicId of publicIdsToRemove) {
        try {
          await cloudinary.uploader.destroy(publicId);
        } catch (error) {
          console.error('Lá»—i khi xÃ³a áº£nh khá»i Cloudinary:', error);
        }
      }
    
      hotel.imagehotel = hotel.imagehotel.filter(image => !removedImages.includes(image));
    }
    
    await hotel.save();
    res.status(200).json({ msg: 'KhÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng', hotel });
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

// Route láº¥y táº¥t cáº£ khÃ¡ch sáº¡n vá»›i tÃªn quáº£n lÃ½
router.get('/', async (req, res) => {
  try {
    const hotels = await Hotel.find().populate('manager', 'name');
    res.json(hotels);
  } catch (error) {
    res.status(500).json({ message: 'Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n', error });
  }
});

// Route xÃ³a hÃ¬nh áº£nh
router.put('/:hotelId/remove-image', auth, async (req, res) => {
  const { hotelId } = req.params;
  const { imageUrl } = req.body;

  try {
    const hotel = await Hotel.findById(hotelId);
    if (!hotel) {
      return res.status(404).json({ message: 'KhÃ´ng tÃ¬m tháº¥y khÃ¡ch sáº¡n' });
    }

    const publicId = getPublicIdFromUrl(imageUrl);
    if (publicId) {
      await cloudinary.uploader.destroy(publicId);
    }

    const updatedHotel = await Hotel.findByIdAndUpdate(
      hotelId,
      { $pull: { imagehotel: imageUrl } },
      { new: true }
    );

    res.json(updatedHotel);
  } catch (error) {
    console.error(error.message);
    res.status(500).json({ message: 'ÄÃ£ xáº£y ra lá»—i' });
  }
});



module.exports = router;
```

### api\hotel_manager\room.js
```js
const express = require('express');
const router = express.Router();
const cloudinary = require('cloudinary').v2;
const Room = require('../../models/Room');
const Hotel = require('../../models/Hotel');
const auth = require('../../middleware/auth'); // Middleware xÃ¡c thá»±c
const { uploadRoom } = require('../../middleware/upload'); // Sá»­ dá»¥ng uploadRoom

// HÃ m láº¥y publicId tá»« URL cá»§a Cloudinary
const getPublicIdFromUrl = (url) => {
  const matches = url.match(/\/v\d+\/(.+)\.(jpg|jpeg|png|gif|webp)/);
  return matches ? matches[1] : null;
};

// Route thÃªm phÃ²ng
router.post('/:hotelId/add-room', auth, uploadRoom.array('imageroom', 5), async (req, res) => {
  const { hotelId } = req.params;
  const { type, price, availability, remainingRooms } = req.body;

  try {
    const hotel = await Hotel.findById(hotelId);
    if (!hotel) {
      return res.status(404).json({ msg: 'KhÃ¡ch sáº¡n khÃ´ng tá»“n táº¡i' });
    }

    const imageRoomUrls = req.files.map(file => file.path); // Láº¥y URL áº£nh tá»« Cloudinary

    const newRoom = new Room({
      hotel: hotelId,
      type,
      price,
      availability,
      imageroom: imageRoomUrls,
      remainingRooms,
    });

    await newRoom.save();
    hotel.rooms.push(newRoom._id);
    await hotel.save();

    res.status(201).json({ msg: 'PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng', room: newRoom });
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

// Route Ä‘á»ƒ láº¥y danh sÃ¡ch phÃ²ng cho má»™t khÃ¡ch sáº¡n
router.get('/:hotelId/rooms', auth, async (req, res) => {
  const { hotelId } = req.params;

  try {
    const rooms = await Room.find({ hotel: hotelId });
    if (!rooms.length) {
      return res.status(404).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y phÃ²ng nÃ o' });
    }

    res.status(200).json(rooms);
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});

// Láº¥y chi tiáº¿t phÃ²ng theo roomId
router.get('/:roomId', auth, async (req, res) => {
  try {
    const roomId = req.params.roomId;
    const room = await Room.findById(roomId);

    if (!room) {
      return res.status(404).json({ msg: 'KhÃ´ng tÃ¬m tháº¥y phÃ²ng' });
    }
    res.json(room);
  } catch (error) {
    res.status(500).json({ msg: 'Lá»—i server', error });
  }
});

// Route cáº­p nháº­t phÃ²ng
router.put('/:roomId', auth, uploadRoom.array('imageroom', 5), async (req, res) => {
  const { roomId } = req.params;
  const { type, price, availability, remainingRooms, removedImages =[] } = req.body;

  try {
    const room = await Room.findById(roomId);
    if (!room) {
      return res.status(404).json({ msg: 'PhÃ²ng khÃ´ng tá»“n táº¡i' });
    }

    // Láº¥y URL áº£nh má»›i
    const imageRoomUrls = req.files ? req.files.map(file => file.path) : [];

    // Cáº­p nháº­t thÃ´ng tin phÃ²ng
    room.type = type || room.type;
    room.price = price || room.price;
    room.availability = availability !== undefined ? availability : room.availability;
    room.remainingRooms = remainingRooms !== undefined ? remainingRooms : room.remainingRooms; // Cáº­p nháº­t sá»‘ phÃ²ng cÃ²n trá»‘ng

    // Gá»™p áº£nh cÅ© vÃ  áº£nh má»›i
    room.imageroom = [...room.imageroom, ...imageRoomUrls];

     // XÃ³a áº£nh Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u
     if (Array.isArray(removedImages) && removedImages.length > 0) {
      const publicIdsToRemove = removedImages.map(url => getPublicIdFromUrl(url)).filter(id => id);
      
      // XÃ³a áº£nh khá»i Cloudinary
      for (const publicId of publicIdsToRemove) {
        try {
          await cloudinary.uploader.destroy(publicId);
        } catch (error) {
          console.error('Lá»—i khi xÃ³a áº£nh khá»i Cloudinary:', error);
          return res.status(500).json({ msg: 'Lá»—i khi xÃ³a áº£nh khá»i Cloudinary' });
        }
      }

      // XÃ³a URL áº£nh khá»i máº£ng imageroom
      room.imageroom = room.imageroom.filter(image => !removedImages.includes(image));
    }

    await room.save();
    res.status(200).json({ msg: 'PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng', room });
  } catch (err) {
    console.error(err.message);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});



// XÃ³a phÃ²ng
router.delete('/:roomId', auth, async (req, res) => {
  try {
    await Room.findByIdAndDelete(req.params.roomId);
    res.json({ message: 'PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c xÃ³a' });
  } catch (error) {
    res.status(500).json({ message: 'Lá»—i khi xÃ³a phÃ²ng' });
  }
});


// Route xÃ³a hÃ¬nh áº£nh
router.put('/:roomId/remove-image', async (req, res) => {
  const { roomId } = req.params;
  const { imageUrl } = req.body;

  try {
    const room = await Room.findById(roomId);
    if (!room) {
      return res.status(404).json({ message: 'KhÃ´ng tÃ¬m tháº¥y phÃ²ng' });
    }

    const publicId = getPublicIdFromUrl(imageUrl);
    if (publicId) {
      await cloudinary.uploader.destroy(publicId);
    }

    const updatedRoom = await Room.findByIdAndUpdate(
                roomId,
                { $pull: { imageroom: imageUrl } },
                { new: true }
            );

            res.json(updatedRoom);
          } catch (error) {
              console.error(error);
              res.status(500).json({ message: 'ÄÃ£ xáº£y ra lá»—i' });
          }
        });
        router.get('/', async (req, res) => {
          try {
            // Láº¥y danh sÃ¡ch khÃ¡ch sáº¡n cÃ¹ng vá»›i cÃ¡c phÃ²ng liÃªn quan
            const hotels = await Hotel.find()
              .populate('manager', 'name')  // Láº¥y tÃªn ngÆ°á»i quáº£n lÃ½
              .populate({
                path: 'rooms',  // Láº¥y cÃ¡c phÃ²ng cá»§a khÃ¡ch sáº¡n
                select: 'type price availability imageroom remainingRooms',  // Chá»n cÃ¡c trÆ°á»ng cáº§n thiáº¿t tá»« báº£ng Room
              });
        
            // Truy váº¥n thÃ´ng tin chi tiáº¿t cho tá»«ng phÃ²ng dá»±a vÃ o roomId
            for (const hotel of hotels) {
              for (const room of hotel.rooms) {
                // TÃ¬m thÃ´ng tin loáº¡i phÃ²ng dá»±a vÃ o roomId
                const roomDetails = await Room.findById(room._id).select('type price availability');
                room.type = roomDetails.type;  // Cáº­p nháº­t loáº¡i phÃ²ng vÃ o room
              }
            }       
            res.json(hotels); // Tráº£ vá» thÃ´ng tin cÃ¡c khÃ¡ch sáº¡n vá»›i phÃ²ng Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t
          } catch (error) {
            res.status(500).json({ message: 'Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n', error });
          }
        });        
module.exports = router;

```

### api\search\searchhotel.js
```js
const express = require('express');
const router = express.Router();
const Hotel = require('../../models/Hotel');
const Room = require('../../models/Room');
router.get('/Search', async (req, res) => {
  try {
    const allHotels = await Hotel.aggregate([
      {
        $lookup: {
          from: 'rates',
          localField: '_id',
          foreignField: 'hotel',
          as: 'reviews'
        }
      },
      {
        $project: {
          name: 1,
          location: 1,
          description: 1,
          imagehotel: 1,
          reviewsCount: { $size: '$reviews' },
          averageRating: { $avg: '$reviews.rating' }
        }
      }
    ]);

    const hotelsWithRoomDetails = await Promise.all(
      allHotels.map(async hotel => {
        const rooms = await Room.find({ hotel: hotel._id }).sort({ price: 1 });
        const roomDetails = rooms.map(room => ({
          roomType: room.roomType,
          price: room.price,
          amenities: room.amenities,
          description: room.description
        }));

        // TÃ­nh giÃ¡ tháº¥p nháº¥t vÃ  giÃ¡ cao nháº¥t
        const lowestRoomPrice = rooms.length > 0 ? rooms[0].price : null;
        const highestRoomPrice = rooms.length > 0 ? rooms[rooms.length - 1].price : null;

        return { ...hotel, lowestRoomPrice, highestRoomPrice, rooms: roomDetails };
      })
    );

    if (hotelsWithRoomDetails.length === 0) {
      return res.status(404).json({ msg: 'KhÃ´ng cÃ³ khÃ¡ch sáº¡n nÃ o' });
    }

    res.status(200).json(hotelsWithRoomDetails);
  } catch (err) {
    console.error('Lá»—i server:', err);
    res.status(500).json({ msg: 'Lá»—i server' });
  }
});




module.exports = router;

```

### client\postcss.config.js
```js
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

```

### client\tailwind.config.js
```js
/** @type {import('tailwindcss').Config} */
export default {
	content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
	theme: {
		extend: {},
	},
	plugins: [],
};

```

### client\vite.config.js
```js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
})

```

### client\src\App.js
```js
import React, { useState, useEffect } from "react";
import {
  BrowserRouter as Router,
  Routes,
  Route,
  useLocation,
  Navigate,
} from "react-router-dom";
import axios from "axios";
import HomePage from "./pages/HomePage";
import NotFoundPage from "./pages/NotFoundPage";
import Login from "./components/account/Login";
import Register from "./components/account/Register";

import ForgetPassword from "./components/account/ForgetPassword";
import ResetPassword from "./components/account/Resetpassword";
import Profile from "./components/account/profilevip";
import ProfilePage from "./pages/ProfilePage";
// Admin
import Sidebar from "./components/dashboard/common/Sidebar";
import OverviewPage from "./pages/OverviewPage";
import HotelManagerPage from "./pages/Admin/HotelManagerPage";
import UsersPage from "./pages/Admin/UsersPage";
import SalesPage from "./pages/Admin/SalesPage";
import OrdersPage from "./pages/Admin/OrdersPage";
import AnalyticsPage from "./pages/Admin/AnalyticsPage";
import SettingsPage from "./pages/Admin/SettingsPage";
import SearchPage from "./pages/SearchPage";
// Hotel Manager
import HotelAdd from "./components/hotel_manager/AddHotel";
import MyHotel from "./components/hotel_manager/MyHotel";
import HotelDetail from "./components/hotel_manager/HotelDetail"; 
import AddRoom from "./components/dashboard/hotelmanage/AddRoom";
import HotelRooms from "./components/hotel_manager/HotelRooms"; 
import RoomDetail from "./components/hotel_manager/RoomDetail";
import SearchPlaces from "./components/HomePage/SearchPlaces";
import Success from "./components/Checkout/Success";
import ConfirmPayment from "./components/Checkout/confirm-payment";
import DetailHotelPage from "./pages/DetailHotelPage";
import DetailRoomPage from "./pages/DetailRoomPage"; 
import HotelImage from "./components/DetailHotel/HotelImage";
import FavoritesPage from "./components/FavoritesPage/FavoritesPage";
import CheckoutPage from "./pages/CheckoutPage";
import BookingStatusPage from "./pages/BookingStatusPage";

const AppContent = () => {
  const location = useLocation();
  const [role, setRole] = useState(""); // LÆ°u role ngÆ°á»i dÃ¹ng
  const [isLoading, setIsLoading] = useState(true); // Kiá»ƒm soÃ¡t tráº¡ng thÃ¡i loading

  // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng tá»« API
  useEffect(() => {
    const fetchUserRole = async () => {
      try {
        const response = await axios.get("/api/profile/me", {
          withCredentials: true, // Gá»­i cookie Ä‘á»ƒ xÃ¡c thá»±c
        });
        const userRole = response.data.role;
        setRole(userRole);
      } catch (error) {
        console.error("Lá»—i khi láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng:", error);
      } finally {
        setIsLoading(false); // Táº¯t loading khi hoÃ n thÃ nh
      }
    };

    fetchUserRole();
  }, []);

  const isAdminPage = [
    "/settings",
    "/analytics",
    "/orders",
    "/sales",
    "/users",
    "/hotelmanager",
    "/overview",
  ].includes(location.pathname);

  // CÃ¡c trang mÃ  HotelManager khÃ´ng Ä‘Æ°á»£c phÃ©p truy cáº­p
  const restrictedPagesForHotelManager = [
    "/users",

  ].includes(location.pathname);

  if (isLoading) {
    return <div>Loading...</div>; // Hiá»ƒn thá»‹ loading trong khi chá» dá»¯ liá»‡u
  }

  // Náº¿u khÃ´ng pháº£i Admin hoáº·c HotelManager mÃ  truy cáº­p vÃ o trang admin
  if (isAdminPage && role !== "Admin" && role !== "HotelManager") {
    return <Navigate to="/" />; // Äiá»u hÆ°á»›ng vá» trang chá»§
  }

  // Náº¿u lÃ  HotelManager vÃ  cá»‘ gáº¯ng truy cáº­p vÃ o trang bá»‹ háº¡n cháº¿
  if (restrictedPagesForHotelManager && role === "HotelManager") {
    return <Navigate to="/overview" />; // Äiá»u hÆ°á»›ng vá» trang trÆ°á»›c Ä‘Ã³
  }

  return (
    <div
    className={`${
        isAdminPage ? "flex h-screen bg-blue-900" : "bg-white"
      } text-gray-100 overflow-hidden`}
    >
      {isAdminPage && (
        <div className="fixed inset-0 z-0">
          <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 opacity-80" />
          <div className="absolute inset-0 backdrop-blur-sm" />
        </div>
      )}
      {isAdminPage && <Sidebar userRole={role} />}
      <Routes>
        <Route path="/ResetPassword/:token" element={<ResetPassword />} />
        <Route path="/ForgetPassword" element={<ForgetPassword />} />
        <Route path="/" element={<HomePage />} />
        <Route path="/myprofile" element={<ProfilePage />} />
        <Route path="/login" element={<Login />} />
        <Route path="/register" element={<Register />} />
        <Route path="/profile" element={<Profile />} />
        <Route path="/overview" element={<OverviewPage />} />
        <Route path="/hotelmanager" element={<HotelManagerPage />} />
        <Route path="/sales" element={<SalesPage />} />
        <Route path="/orders" element={<OrdersPage />} />
        <Route path="/users" element={<UsersPage />} />
        <Route path="/analytics" element={<AnalyticsPage />} />
        <Route path="/settings" element={<SettingsPage />} />
        <Route path="/addhotel" element={<HotelAdd />} />
        <Route path="/hotels/:hotelId/add-room" element={<AddRoom />} />
        <Route path="/myhotel" element={<MyHotel />} />
        <Route path="/hotels/:hotelId/rooms" element={<HotelRooms />} />
        <Route path="/room/:roomId" element={<RoomDetail />} />
        <Route path="/hotels/:hotelId" element={<HotelDetail />} />
        <Route path="/searchplaces" element={<SearchPlaces />} />
        <Route path="/SearchPage" element={<SearchPage />} />
        <Route path="/t2/:hotelId" element={<HotelImage />} />
        <Route path="/detailhotel/:hotelId" element={<DetailHotelPage />} />
        <Route path="/detailroom/:hotelId" element={<DetailRoomPage />} />
        <Route path="/detailroom/:hotelId/checkout/:roomId" element={<CheckoutPage />} />
        <Route path="/success" element={<Success/>} />
        <Route path="/confirmpayment" element={<ConfirmPayment/>} />
        <Route path="/bookingstatus" element={<BookingStatusPage/>} />
        <Route path="/favorites" element={<FavoritesPage/>} /> //
        <Route path="*" element={<NotFoundPage />} />
      </Routes>
    </div>
  );
};

const App = () => {
  return (
    <Router>
      <AppContent />
    </Router>
  );
};

export default App;

```

### client\src\App.test.js
```js
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});

```

### client\src\index.js
```js
// src/index.js
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
import { Provider } from 'react-redux';
import store from './redux/store';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>
);

reportWebVitals();

```

### client\src\main.jsx
```jsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App.jsx";
import "./index.css";

import { BrowserRouter } from "react-router-dom";

ReactDOM.createRoot(document.getElementById("root")).render(
	<React.StrictMode>
		<BrowserRouter>
			<App />
		</BrowserRouter>
	</React.StrictMode>
);

```

### client\src\reportWebVitals.js
```js
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;

```

### client\src\setupTests.js
```js
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';

```

### client\src\components\account\BookingHistory.jsx
```jsx
import React, { useState } from "react";
import { Table } from "antd";
import { Eye, EyeOff } from "lucide-react";

const BookingHistory = ({
  bookingHistory,
  currentPage,
  itemsPerPage,
  onPageChange,
  formatDate,
  isOrderIdVisible,
  toggleOrderIdVisibility,
}) => {
  const [filterCurrentBookings, setFilterCurrentBookings] = useState(false);

  // HÃ m lá»c cÃ¡c booking Ä‘ang cÃ²n hiá»‡u lá»±c (chÆ°a check out vÃ  chÆ°a hoÃ n thÃ nh)
  const filteredBookings = filterCurrentBookings
    ? bookingHistory.filter(
        (booking) =>
          new Date(booking.checkOutDate) > new Date() &&
          booking.paymentStatus !== "Done"
      )
    : bookingHistory;

  // Cáº¥u hÃ¬nh cÃ¡c cá»™t cá»§a báº£ng
  const columns = [
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">MÃ£ Äáº·t PhÃ²ng</span>
          <button
            onClick={toggleOrderIdVisibility}
            className="hover:opacity-75"
          >
            {isOrderIdVisible ? <EyeOff size={16} /> : <Eye size={16} />}
          </button>
        </div>
      ),
      dataIndex: "orderId",
      key: "orderId",
      filterMultiple: false,
      onFilter: (value, record) => record.orderId.includes(value),
      filters: bookingHistory.map((booking) => ({
        text: booking.orderId,
        value: booking.orderId,
      })),
      render: (text) => (isOrderIdVisible ? text : "*********"),
    },
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">TÃªn KhÃ¡ch Sáº¡n</span>
        </div>
      ),
      dataIndex: ["room", "hotel", "name"],
      key: "hotelName",
      filterMultiple: true,
      onFilter: (value, record) => record.room.hotel.name.includes(value),
      filters: Array.from(
        new Set(bookingHistory.map((booking) => booking.room.hotel.name))
      )
        .sort()
        .map((name) => ({ text: name, value: name })),
      render: (name) => name,
    },
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">Loáº¡i PhÃ²ng</span>
        </div>
      ),
      dataIndex: ["room", "type"],
      key: "roomType",
      onFilter: (value, record) => record.room.type.includes(value),
      filters: Array.from(
        new Set(bookingHistory.map((booking) => booking.room.type))
      )
        .sort()
        .map((type) => ({ text: type, value: type })),
      render: (type) => type,
    },
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">NgÃ y Nháº­n PhÃ²ng</span>
        </div>
      ),
      dataIndex: "checkInDate",
      key: "checkInDate",
      render: (date) => formatDate(date),
      sorter: (a, b) => new Date(a.checkInDate) - new Date(b.checkInDate),
    },
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">NgÃ y Tráº£ PhÃ²ng</span>
        </div>
      ),
      dataIndex: "checkOutDate",
      key: "checkOutDate",
      render: (date) => formatDate(date),
      sorter: (a, b) => new Date(a.checkOutDate) - new Date(b.checkOutDate),
    },
    {
      title: (
        <div className="flex items-center justify-center space-x-2">
          <span className="font-semibold text-gray-700">TÃ¬nh Tráº¡ng</span>
        </div>
      ),
      dataIndex: "paymentStatus",
      key: "paymentStatus",
      onFilter: (value, record) => record.paymentStatus === value,
      filters: [
        { text: "ÄÃ£ thanh toÃ¡n", value: "Complete" },
        { text: "ChÆ°a thanh toÃ¡n", value: "Pending" },
        { text: "Nháº­n phÃ²ng", value: "CheckIn" },
        { text: "HoÃ n thÃ nh", value: "Done" },
      ],
      render: (status) => {
        let color = "";
        let text = "";

        switch (status) {
          case "Complete":
            color = "#38a169"; // Xanh lÃ¡ cÃ¢y cho tráº¡ng thÃ¡i ÄÃ£ thanh toÃ¡n
            text = "ÄÃ£ thanh toÃ¡n";
            break;
          case "Pending":
            color = "#e53e3e"; // Äá» cho tráº¡ng thÃ¡i ChÆ°a thanh toÃ¡n
            text = "ChÆ°a thanh toÃ¡n";
            break;
          case "CheckIn":
            color = "#3182ce"; // Xanh dÆ°Æ¡ng cho tráº¡ng thÃ¡i Nháº­n phÃ²ng
            text = "Nháº­n phÃ²ng";
            break;
          case "Done":
            color = "#805ad5"; // TÃ­m cho tráº¡ng thÃ¡i HoÃ n thÃ nh
            text = "HoÃ n thÃ nh";
            break;
          default:
            color = "#718096"; // MÃ u xÃ¡m cho tráº¡ng thÃ¡i khÃ´ng xÃ¡c Ä‘á»‹nh
            text = "KhÃ´ng xÃ¡c Ä‘á»‹nh";
        }

        return (
          <span
            style={{
              color: color,
              fontWeight: "bold",
            }}
          >
            {text}
          </span>
        );
      },
    },
  ];

  return (
    <div className="relative mx-auto px-4">
      <h2 className="text-2xl font-ROBOTO text-black mb-2">
        <span>Lá»ŠCH Sá»¬ Äáº¶T PHÃ’NG</span>
      </h2>
      <div className="mb-4">
        <button
          onClick={() => setFilterCurrentBookings(!filterCurrentBookings)}
          className="px-4 py-2 text-white bg-gray-800 rounded-md hover:bg-brown-700 focus:outline-none focus:ring-2 focus:ring-brown-500 transition-all duration-200"
        >
          {filterCurrentBookings ? "Hiá»ƒn thá»‹ táº¥t cáº£" : "PhÃ²ng Ä‘ang Ä‘áº·t"}
        </button>
      </div>
      <div className="overflow-x-auto">
        <Table
          columns={columns}
          dataSource={filteredBookings}
          pagination={{
            current: currentPage,
            pageSize: itemsPerPage,
            total: filteredBookings.length,
            onChange: onPageChange,
          }}
          rowKey="id"
          rowClassName="ant-table-row-hover"
          className="ant-table-bordered"
          scroll={{ x: "max-content" }} // Enable horizontal scroll on smaller screens
        />
      </div>
    </div>
  );
};

export default BookingHistory;
```

### client\src\components\account\ChangePasswordDrawer.jsx
```jsx
import React, { useState } from 'react';
import { Drawer, TextField, Button, IconButton, Box, Typography } from '@mui/material';
import { X as CloseIcon } from 'lucide-react';

const ChangePasswordDrawer = ({ visible, onClose, onPasswordSubmit }) => {
    const [formData, setFormData] = useState({
        currentPassword: '',
        newPassword: '',
        confirmPassword: '',
    });

    const [error, setError] = useState('');

    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData({
            ...formData,
            [name]: value,
        });
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        const { newPassword, confirmPassword } = formData;

        // Kiá»ƒm tra xem máº­t kháº©u má»›i vÃ  xÃ¡c nháº­n máº­t kháº©u cÃ³ trÃ¹ng khá»›p khÃ´ng
        if (newPassword !== confirmPassword) {
            setError('Máº­t kháº©u má»›i vÃ  xÃ¡c nháº­n máº­t kháº©u khÃ´ng khá»›p');
            return;
        }

        // Kiá»ƒm tra máº­t kháº©u má»›i cÃ³ chá»©a kÃ­ tá»± Ä‘áº·c biá»‡t khÃ´ng
        const specialCharRegex = /[!@#$%^&*(),.?":{}|<>]/;
        if (!specialCharRegex.test(newPassword)) {
            setError('Máº­t kháº©u má»›i pháº£i chá»©a Ã­t nháº¥t má»™t kÃ­ tá»± Ä‘áº·c biá»‡t');
            return;
        }

        // Gá»i hÃ m onPasswordSubmit Ä‘á»ƒ xá»­ lÃ½ máº­t kháº©u má»›i
        onPasswordSubmit(formData);
    };

    return (
        <Drawer
            anchor="right"
            open={visible}
            onClose={onClose}
            sx={{
                '& .MuiDrawer-paper': {
                    width: '400px',
                    padding: '20px',
                    backgroundColor: '#fff',
                    borderRadius: '10px 0 0 10px',
                    boxShadow: '0 4px 15px rgba(0, 0, 0, 0.2)',
                    overflow: 'hidden',
                },
            }}
        >
            <Box display="flex" justifyContent="space-between" alignItems="center">
                <Typography variant="h6" sx={{ fontSize: '1.5rem', color: '#1E90FF', fontWeight: 'bold' }}>
                    Äá»•i máº­t kháº©u
                </Typography>
                <IconButton onClick={onClose} sx={{ color: '#000' }}>
                    <CloseIcon size={24} />
                </IconButton>
            </Box>

            <form onSubmit={handleSubmit}>
                <Box mt={3}>
                    <TextField
                        label="Máº­t kháº©u hiá»‡n táº¡i"
                        name="currentPassword"
                        type="password"
                        fullWidth
                        variant="outlined"
                        required
                        value={formData.currentPassword}
                        onChange={handleChange}
                        sx={{
                            marginBottom: 2,
                            borderRadius: '8px',
                            '& .MuiInputBase-root': {
                                backgroundColor: '#FFFAF0',
                                boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',
                                color: '#000',  // Äáº·t mÃ u chá»¯ cá»§a Ã´ nháº­p thÃ nh mÃ u Ä‘en
                            },
                            '& .MuiInputLabel-root': {
                                color: '#000',
                            }
                        }}
                    />
                    <TextField
                        label="Máº­t kháº©u má»›i"
                        name="newPassword"
                        type="password"
                        fullWidth
                        variant="outlined"
                        required
                        value={formData.newPassword}
                        onChange={handleChange}
                        sx={{
                            marginBottom: 2,
                            borderRadius: '8px',
                            '& .MuiInputBase-root': {
                                backgroundColor: '#FFFAF0',
                                boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',
                                color: '#000',
                            },
                            '& .MuiInputLabel-root': {
                                color: '#000',
                            }
                        }}
                    />
                    <TextField
                        label="XÃ¡c nháº­n máº­t kháº©u má»›i"
                        name="confirmPassword"
                        type="password"
                        fullWidth
                        variant="outlined"
                        required
                        value={formData.confirmPassword}
                        onChange={handleChange}
                        sx={{
                            marginBottom: 2,
                            borderRadius: '8px',
                            '& .MuiInputBase-root': {
                                backgroundColor: '#FFFAF0',
                                boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',
                                color: '#000',
                            },
                            '& .MuiInputLabel-root': {
                                color: '#000',
                            }
                        }}
                    />
                    {error && (
                        <Typography color="error" sx={{ marginTop: '10px' }}>
                            {error}
                        </Typography>
                    )}
                </Box>

                <Button
                    type="submit"
                    variant="contained"
                    fullWidth
                    sx={{
                        marginTop: 3,
                        backgroundColor: '#1E90FF',
                        color: '#fff',
                        borderRadius: '8px',
                        '&:hover': {
                            backgroundColor: '#4682B4',
                        },
                        boxShadow: '0 4px 10px rgba(0, 0, 0, 0.2)',
                    }}
                >
                    Äá»•i máº­t kháº©u
                </Button>
            </form>
        </Drawer>
    );
};

export default ChangePasswordDrawer;

```

### client\src\components\account\EditProfileDrawer.jsx
```jsx
import React, { useState, useEffect } from 'react';
import { Drawer, Button, TextField, Typography, IconButton, Divider } from '@mui/material';
import { Save as SaveIcon } from '@mui/icons-material';
import { Lock } from 'lucide-react';  // Import cÃ¡c icon tá»« lucide-react

const EditProfileDrawer = ({ visible, onClose, user, onEditSubmit, onPasswordChange }) => {
    const [formData, setFormData] = useState({
        name: '',
        email: '',
        age: '',  // ThÃªm trÆ°á»ng tuá»•i vÃ o formData
    });

    const [ageError, setAgeError] = useState('');  // State Ä‘á»ƒ lÆ°u lá»—i cho tuá»•i

    // Khi Drawer má»Ÿ ra vÃ  user cÃ³ dá»¯ liá»‡u, cáº­p nháº­t láº¡i formData
    useEffect(() => {
        if (user) {
            setFormData({
                name: user.name || '',
                email: user.email || '',
                age: user.age || '',  // Cáº­p nháº­t tuá»•i tá»« user náº¿u cÃ³
            });
        }
    }, [user, visible]); // Cháº¡y láº¡i khi user hoáº·c visible thay Ä‘á»•i

    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData({
            ...formData,
            [name]: value,
        });
    };

    const validateAge = (age) => {
        const ageNumber = parseInt(age, 10);
        if (isNaN(ageNumber) || ageNumber < 18 || ageNumber > 120) {
            setAgeError('Tuá»•i pháº£i tá»« 18 Ä‘áº¿n 120');
            return false;
        } else {
            setAgeError('');
            return true;
        }
    };

    const handleSubmit = (e) => {
        e.preventDefault();

        // Kiá»ƒm tra Ä‘á»™ tuá»•i trÆ°á»›c khi gá»­i dá»¯ liá»‡u
        if (validateAge(formData.age)) {
            onEditSubmit(formData);  // Gá»­i dá»¯ liá»‡u chá»‰nh sá»­a
        }
    };

    return (
        <Drawer
            anchor="right"
            open={visible}
            onClose={onClose}
            sx={{ width: 400 }}
        >
            <div style={{ padding: '20px', width: '100%' }}>
                <Typography variant="h6" gutterBottom>
                    Chá»‰nh sá»­a há»“ sÆ¡
                </Typography>

                <form onSubmit={handleSubmit}>
                    {/* TrÆ°á»ng chá»‰nh sá»­a tÃªn */}
                    <TextField
                        label="TÃªn"
                        name="name"
                        value={formData.name}
                        onChange={handleChange}
                        fullWidth
                        margin="normal"
                        variant="outlined"
                    />

                    {/* TrÆ°á»ng chá»‰nh sá»­a email */}
                    <TextField
                        label="Email"
                        name="email"
                        value={formData.email}
                        onChange={handleChange}
                        fullWidth
                        margin="normal"
                        variant="outlined"
                    />

                    {/* TrÆ°á»ng chá»‰nh sá»­a tuá»•i */}
                    <TextField
                        label="Tuá»•i"
                        name="age"
                        value={formData.age}
                        onChange={handleChange}
                        fullWidth
                        margin="normal"
                        variant="outlined"
                        type="number"  // Giá»›i háº¡n kiá»ƒu dá»¯ liá»‡u lÃ  sá»‘
                        inputProps={{
                            min: 18,
                            max: 120,
                        }}
                        error={!!ageError}  // Hiá»ƒn thá»‹ lá»—i náº¿u cÃ³
                        helperText={ageError}  // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
                    />

                    {/* Button Ä‘á»ƒ má»Ÿ form thay Ä‘á»•i máº­t kháº©u */}
                    <div style={{ marginTop: '10px' }}>
                        <Button
                            variant="text"
                            onClick={onPasswordChange}
                            startIcon={<Lock />}
                            sx={{ color: '#1976d2' }}
                        >
                            Thay Ä‘á»•i máº­t kháº©u
                        </Button>
                    </div>

                    <Divider sx={{ margin: '20px 0' }} />

                    {/* NÃºt cáº­p nháº­t */}
                    <Button
                        variant="contained"
                        color="primary"
                        type="submit"
                        startIcon={<SaveIcon />}
                        sx={{ marginRight: '10px' }}
                    >
                        Cáº­p nháº­t
                    </Button>
                </form>
            </div>
        </Drawer>
    );
};

export default EditProfileDrawer;

```

### client\src\components\account\ForgetPassword.jsx
```jsx
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Input, Spin, notification } from 'antd'; // Import Spin component from Ant Design
import { motion } from 'framer-motion';

const ForgotPassword = () => {
  const [email, setEmail] = useState('');
  const [success, setSuccess] = useState(null);
  const [error, setError] = useState(null);
  const [isCooldown, setIsCooldown] = useState(false); // Track cooldown state
  const [countdown, setCountdown] = useState(30); // Track the countdown timer
  const [isLoading, setIsLoading] = useState(false); // Track loading state
  const navigate = useNavigate();

  // Start countdown when the user submits the email
  useEffect(() => {
    let timer;
    if (isCooldown) {
      timer = setInterval(() => {
        setCountdown((prevCountdown) => {
          if (prevCountdown <= 1) {
            clearInterval(timer);
            setIsCooldown(false);
            setCountdown(30);
          }
          return prevCountdown - 1;
        });
      }, 1000);
    }
    return () => clearInterval(timer);
  }, [isCooldown]);

  const handleForgotPassword = async (e) => {
    e.preventDefault();
    setError(null);
    setSuccess(null);

    // If cooldown is active, prevent submission
    if (isCooldown) {
      setError('Vui lÃ²ng Ä‘á»£i ' + countdown + ' giÃ¢y trÆ°á»›c khi thá»­ láº¡i.');
      return;
    }

    setIsLoading(true); // Start loading

    try {
      const response = await fetch('/api/profile/forgot-password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email }),
      });

      const data = await response.json();
      if (response.ok) {
        notification.success({
          message: "ThÃ nh CÃ´ng.",
          description: "ÄÃ£ gá»­i liÃªn káº¿t Ä‘áº·t láº¡i máº­t kháº©u vÃ o email cá»§a báº¡n.",
        });
        setIsCooldown(true); // Start cooldown after successful request
      } else {
        setError(data.msg || 'CÃ³ lá»—i xáº£y ra');
      }
    } catch (err) {
      console.error('Lá»—i máº¡ng hoáº·c server:', err);
      notification.error({
        message: "Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
        } finally {
      setIsLoading(false); // Stop loading
    }
  };

  return (
    <motion.div 
      className="absolute inset-0 flex flex-col justify-center items-center px-4 py-8 md:px-16 md:py-16 bg-gradient-to-r from-gray-100 to-white"
      initial={{ opacity: 0, y: -50 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: 50 }}
      transition={{ duration: 0.5 }}
    >
      <div className="w-full max-w-5xl flex flex-col md:flex-row items-start gap-6 p-12 bg-white shadow-md rounded-lg">
        {/* Form Section */}
        <div className="flex flex-col w-full md:w-1/2 gap-6">
          <h2 className="text-black text-4xl font-normal text-left">Báº¡n quÃªn máº­t kháº©u?</h2>
          <p className="text-left text-gray-700 text-base">
            Äá»«ng lo láº¯ng, Ä‘iá»u nÃ y xáº£y ra vá»›i táº¥t cáº£ chÃºng ta. Nháº­p email cá»§a báº¡n dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ khÃ´i phá»¥c máº­t kháº©u cá»§a báº¡n.
          </p>

          {error && <div className="text-red-500 mb-4 text-left">{error}</div>}
          {success && <div className="text-green-500 mb-4 text-left">{success}</div>}

          <form onSubmit={handleForgotPassword} className="flex flex-col gap-6 w-full">
            <div className="flex flex-col w-full">
              <label className="text-[#1c1b1f] text-sm font-medium">Email</label>
              <Input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full h-14 input-field border border-gray-300 rounded-md px-4 focus:outline-none"
                required
              />
            </div>

            <div className="flex items-center justify-center w-full">
              <button 
                type="submit" 
                className="w-full h-12 bg-black text-white py-2 rounded-md text-lg hover:bg-gray-800 transition duration-300 ease-in-out"
                disabled={isCooldown || isLoading} // Disable button if cooldown or loading is active
              >
                {isLoading ? (
                  <Spin size="small" className="mr-2" /> // Show spinner when loading
                ) : (
                  isCooldown ? `Vui lÃ²ng Ä‘á»£i ${countdown} giÃ¢y` : 'Gá»­i'
                )}
              </button>
            </div>
          </form>

          <div className="flex justify-center items-center w-full gap-4 mt-4">
            <div className="flex-grow h-[0.5px] bg-gray-300 opacity-50"></div>
            <p className="text-sm text-gray-700">Or login with</p>
            <div className="flex-grow h-[0.5px] bg-gray-300 opacity-50"></div>
          </div>

          <div className="grid grid-cols-3 w-full gap-4 mt-4">
            <div className="w-[145px] h-[56px] px-4 py-2 rounded border border-[#8dd3bb] flex justify-center items-center justify-self-start">
              <img src="../fb.png" alt="Facebook Icon" className="w-6 h-6" />
            </div>

            <div className="w-[145px] h-[56px] px-4 py-2 rounded border border-[#8dd3bb] flex justify-center items-center justify-self-center">
              <img src="../gg.png" alt="Google Icon" className="w-6 h-6" />
            </div>

            <div className="w-[145px] h-[56px] px-4 py-2 rounded border border-[#8dd3bb] flex justify-center items-center justify-self-end">
              <img src="../apple.png" alt="Apple Icon" className="w-6 h-6" />
            </div>
          </div>

          <div className="flex justify-center w-full mt-4">
            <p className="text-sm text-black">
              Quay láº¡i trang 
              <a href="/login" className="text-red-500 ml-1">ÄÄƒng nháº­p</a>
            </p>
          </div>
        </div>

        {/* Image Section */}
        <div className="hidden md:flex md:w-1/2 justify-center items-center">
          <img 
            className="w-[325px] h-[492px] rounded-[15px]" 
            src="../bg.png" 
            alt="Placeholder"
          />
        </div>
      </div>
    </motion.div>
  );
};

export default ForgotPassword;

```

### client\src\components\account\LoadingModal.jsx
```jsx
// LoadingModal.jsx
import React from 'react';
import { Modal, Spin } from 'antd';

const LoadingModal = ({ loading }) => {
    return (
        <Modal
            visible={loading}
            footer={null}
            closable={false}
            bodyStyle={{ textAlign: 'center' }}
            style={{ borderRadius: '10px', padding: '20px' }}
        >
            <Spin size="large" tip="Äang táº£i..." />
            <h3 style={{ marginTop: '20px' }}>Äang táº£i...</h3>
        </Modal>
    );
};

export default LoadingModal;

```

### client\src\components\account\Login.jsx
```jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Input } from 'antd';
import { motion } from 'framer-motion';

const Login = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState(null);
  const navigate = useNavigate();

  const handleLogin = async (e) => {
    e.preventDefault();
    setError(null);
    try {
      const response = await fetch('/api/users/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password }),
      });
      const data = await response.json();
      if (response.ok) {
        localStorage.setItem('token', data.token);
        localStorage.setItem('user', JSON.stringify(data.user));
        navigate("/");
      } else {
        setError(data.msg || 'CÃ³ lá»—i xáº£y ra');
      }
    } catch (err) {
      console.error('Lá»—i máº¡ng hoáº·c server:', err);
      setError('CÃ³ lá»—i xáº£y ra, vui lÃ²ng thá»­ láº¡i sau.');
    }
  };

  return (
    <motion.div
      className="absolute inset-0 flex flex-col md:flex-row justify-center items-start px-4 py-8 md:px-16 md:py-16"
      initial={{ opacity: 0, y: -50 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: 50 }}
      transition={{ duration: 0.5 }}
    >
      {/* Pháº§n táº¥m hÃ¬nh */}
      <div 
        className="hidden sm:block w-1/4 h-fit relative mb-8 md:mb-0 shadow-lg rounded-lg overflow-hidden"
      >
        <img
          className="w-full h-auto rounded-lg"
          src="/image.png"
          alt="Login"
        />
      </div>

      {/* Pháº§n form Ä‘Äƒng nháº­p */}
      <div className="w-fit md:w-fit flex flex-col justify-start items-start gap-6 ml-11 p-6 shadow-md rounded-lg bg-white">
        <h2 className="text-black text-4xl font-normal text-center md:text-left">
          ÄÄƒng Nháº­p <br /> TÃ i Khoáº£n Cá»§a Báº¡n
        </h2>
        {error && <div className="text-red-500 mb-4 text-center">{error}</div>}
        <form onSubmit={handleLogin} className="flex flex-col gap-6">
          <div className="flex flex-col">
            <label className="text-[#1c1b1f] text-sm">Email</label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-[123%] input-field px-4 py-2 border border-gray-300 rounded-md focus:outline-none"
              style={{ color: 'black' }}
              required
            />
          </div>
          <div className="flex flex-col">
            <label className="text-[#1c1b1f] text-sm">Máº­t kháº©u</label>
            <Input.Password
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-[123%] input-field h-12 border border-gray-300 rounded-md focus:outline-none"
              required
            />
            <a href="/ForgetPassword" className="text-red-500 text-sm text-left mt-1">
              QuÃªn máº­t kháº©u?
            </a>
          </div>
          <div className="flex items-center justify-center">
            <button
              type="submit"
              className="w-full bg-black text-white py-2 rounded-md text-lg h-12 hover:bg-gray-800 transition duration-300 ease-in-out"
            >
              ÄÄƒng Nháº­p
            </button>
          </div>
        </form>
        <div className="flex justify-center">
          <p className="text-sm text-black">
            Báº¡n chÆ°a cÃ³ tÃ i khoáº£n? 
            <a href="/register" className="text-red-500 ml-1">ÄÄƒng kÃ½</a>
          </p>
        </div>
      </div>
    </motion.div>
  );
};

export default Login;
```

### client\src\components\account\profilevip.jsx
```jsx
/* eslint-disable no-unused-vars */
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { UploadOutlined } from '@ant-design/icons';
import { Button, message, Modal } from 'antd';
import axios from 'axios'; // Import axios
import AvatarEdit from 'react-avatar-edit'; // Nháº­p thÆ° viá»‡n
import BookingHistory from './BookingHistory'; // Import BookingHistory component
import EditProfileDrawer from './EditProfileDrawer'; // Import EditProfileDrawer
import ChangePasswordDrawer from './ChangePasswordDrawer'; // Import ChangePasswordDrawer
import LoadingModal from './LoadingModal'; // Import LoadingModal
import './Profilevip.css'; // Äáº£m báº£o táº¡o file CSS vÃ  nháº­p vÃ o
import { CheckCircle, XCircle } from 'lucide-react'; 
import { Tooltip } from '@mui/material';
const ProfileVip = () => {
    const [user, setUser] = useState(null);
    const [editVisible, setEditVisible] = useState(false);
    const [changePasswordVisible, setChangePasswordVisible] = useState(false);
    const [avatarSrc, setAvatarSrc] = useState(null);
    const [showCropper, setShowCropper] = useState(false);
    const [avatarUrl, setAvatarUrl] = useState(null); 
    const [loading, setLoading] = useState(false); // Tráº¡ng thÃ¡i Ä‘á»ƒ theo dÃµi quÃ¡ trÃ¬nh táº£i lÃªn
    const [bookingHistory, setBookingHistory] = useState([]); // State cho lá»‹ch sá»­ Ä‘áº·t phÃ²ng
    const navigate = useNavigate();
    //phÃ¢n trang
    const [currentPage, setCurrentPage] = useState(1);
    const [itemsPerPage] = useState(5); // Sá»‘ dÃ²ng hiá»ƒn thá»‹ trÃªn má»—i trang
     const [isOrderIdVisible, setIsOrderIdVisible] = useState(true); // Tráº¡ng thÃ¡i hiá»ƒn thá»‹ cá»§a cá»™t MÃ£ Äáº·t PhÃ²ng
    
    // Toggle function
    const toggleOrderIdVisibility = () => setIsOrderIdVisible(!isOrderIdVisible);

    //láº¥y dá»¯ liá»‡u ngÆ°á»i dÃ¹ng
    useEffect(() => {
        const fetchProfile = async () => {
            const token = localStorage.getItem('token');

            try {
                const response = await fetch('/api/profile/me', {
                    headers: { 'Authorization': `Bearer ${token}` },
                });
                const data = await response.json();
                if (response.ok) {
                    setUser(data);
                    setAvatarUrl(data.avatar);
                    fetchBookingHistory(token); // Gá»i hÃ m láº¥y lá»‹ch sá»­ Ä‘áº·t phÃ²ng
                } else {
                    navigate('/login');
                }
            } catch (err) {
                console.error('Lá»—i máº¡ng hoáº·c server:', err);
                navigate('/login');
            }
        };
        
            //láº¥y dá»¯ liá»‡u lá»‹ch sá»­ Ä‘áº·t phÃ²ng
        const fetchBookingHistory = async (token) => {
            try {
                const response = await fetch('/api/booking', {
                    headers: { 'Authorization': `Bearer ${token}` },
                });
                const data = await response.json();
        
                if (response.ok) {
                    // Sáº¯p xáº¿p `bookingHistory` theo `bookingDate` tá»« má»›i nháº¥t Ä‘áº¿n cÅ© nháº¥t
                    const sortedData = data.sort((a, b) => new Date(b.bookingDate) - new Date(a.bookingDate));
                    setBookingHistory(sortedData); // Cáº­p nháº­t lá»‹ch sá»­ Ä‘áº·t phÃ²ng vá»›i dá»¯ liá»‡u Ä‘Ã£ sáº¯p xáº¿p
                } else {
                    console.error('KhÃ´ng thá»ƒ láº¥y lá»‹ch sá»­ Ä‘áº·t phÃ²ng');
                }
            } catch (err) {
                console.error('Lá»—i máº¡ng hoáº·c server:', err);
            }
        };
        

        fetchProfile();
    }, [navigate]);



    // HÃ m Ä‘á»‹nh dáº¡ng ngÃ y
    const formatDate = (dateString) => {
        const date = new Date(dateString);
        return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`;
    };

        // TÃ­nh toÃ¡n chá»‰ má»¥c dá»¯ liá»‡u cho má»—i trang
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const currentBookings = bookingHistory.slice(startIndex, endIndex);
    
        // Xá»­ lÃ½ sá»± kiá»‡n thay Ä‘á»•i trang
        const onPageChange = (page) => {
            setCurrentPage(page);
        };

    //chá»‰nh sá»­a thÃ´ng tin cÃ¡ nhÃ¢n
    const handleEditSubmit = async (values) => {
        const token = localStorage.getItem('token');
        try {
            const response = await fetch('/api/profile/edit', {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`,
                },
                body: JSON.stringify({ ...values, avatar: avatarUrl }), // Include avatar URL in submission
            });

            if (response.ok) {
                const updatedUser = await response.json();
                setUser(updatedUser);
                message.success('Cáº­p nháº­t thÃ´ng tin thÃ nh cÃ´ng!');
                setEditVisible(false);
            } else {
                message.error('Cáº­p nháº­t thÃ´ng tin tháº¥t báº¡i!');
            }
        } catch (err) {
            console.error('Lá»—i:', err);
            message.error('ÄÃ£ xáº£y ra lá»—i!');
        }
    };

    //thay Ä‘á»•i máº­t kháº©u
    const handleChangePasswordSubmit = async (values) => {
        const token = localStorage.getItem('token');
        try {
            const response = await fetch('/api/profile/change-password', {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`,
                },
                body: JSON.stringify(values),
            });

            if (response.ok) {
                message.success('Äá»•i máº­t kháº©u thÃ nh cÃ´ng!');
                setChangePasswordVisible(false);
            } else {
                message.error('Äá»•i máº­t kháº©u tháº¥t báº¡i!');
            }
        } catch (err) {
            console.error('Lá»—i:', err);
            message.error('ÄÃ£ xáº£y ra lá»—i!');
        }
    };


    //thay Ä‘á»•i áº£nh Ä‘áº¡i diá»‡n
    const onCrop = (preview) => {
        setAvatarSrc(preview); // LÆ°u hÃ¬nh áº£nh Ä‘Ã£ cáº¯t vÃ o state
    };
    const onClose = () => {
        setShowCropper(false);
    };
    const handleUpload = async () => {
        if (!avatarSrc) return; // Náº¿u khÃ´ng cÃ³ áº£nh Ä‘Ã£ cáº¯t thÃ¬ khÃ´ng lÃ m gÃ¬ cáº£

        setLoading(true);
        const formData = new FormData();
        const blob = await fetch(avatarSrc).then(res => res.blob());
        formData.append('avatar', blob, 'avatar.png'); // ThÃªm blob vÃ o formData

        try {
            const response = await axios.post('/api/profile/upload-avatar', formData, {
                headers: {
                    'Content-Type': 'multipart/form-data',
                },
            });

            if (response.data && response.data.imageUrl) {
                setAvatarUrl(response.data.imageUrl);
                message.success('Táº£i lÃªn áº£nh thÃ nh cÃ´ng!');
                window.location.reload();
            }
        } catch (error) {
            message.error('Táº£i lÃªn áº£nh tháº¥t báº¡i!');
        } finally {
            setLoading(false);
        }
    };

    return (
        <main className="profile-page">
            <section className="relative block h-96 overflow-hidden">
                <div
                    className="absolute top-0 w-full h-full bg-center bg-cover"
                    style={{
                        backgroundImage: "url('https://res.cloudinary.com/dackig67m/image/upload/v1730394983/ebeab5a5-cc06-4d0c-a700-4c6aa3114d05_oetdts.gif')",
                    }}
                >
                    <span id="blackOverlay" className="w-full h-full absolute opacity-50 bg-black"></span>
                </div>
            </section>

            <section className="relative py-16 bg-gray-100">
            <div className="container mx-auto px-4">
            <div className="relative flex flex-col min-w-0 break-words bg-white w-full mb-5 shadow-xl rounded-lg -mt-60">
            <div className="flex flex-wrap justify-between items-center px-6 py-4">
    <div className='flex items-center'>
        <div className="avatar-container flex items-center">
            <div className="relative p-1 bg-white rounded-full shadow-lg transition-all duration-300 hover:shadow-2xl">
                <img
                    alt="Avatar"
                    src={avatarUrl || user?.avatar || 'https://res.cloudinary.com/dackig67m/image/upload/v1730489645/5db7d294a77fbe0fbfca4eb233afc01b_vt0x30.jpg'}
                    className="rounded-full h-32 w-32 object-cover align-middle border-none max-w-full"
                />
                <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300 cursor-pointer">
                    <UploadOutlined onClick={() => setShowCropper(true)} style={{ fontSize: '24px', color: 'white', opacity: 0.8 }} />
                </div>
            </div>
        </div>
        <div className="user-info text-left ml-4">
            <h3 className="text-2xl font-semibold leading-normal mb-2 text-black">
                {user ? user.name : 'Táº£i thÃ´ng tin...'}
            </h3>
            <div className="email-status flex items-center">
                <p className="text-gray-600 mr-2">{user ? user.email : 'Äang táº£i email...'}</p>
                
                {user?.isVerified ? (
                    <Tooltip title="ÄÃ£ xÃ¡c nháº­n" placement="top">
                        <CheckCircle className="text-green-500 cursor-pointer" size={18} />
                    </Tooltip>
                ) : (
                    <Tooltip title="ChÆ°a xÃ¡c nháº­n" placement="top">
                        <XCircle className="text-red-500 cursor-pointer" size={18} />
                    </Tooltip>
                )}
            </div>
        </div>
    </div>
    <div className="edit-button text-right">
        <Button
            className="custom-button"
            type="primary"
            onClick={() => setEditVisible(true)}
        >
            Chá»‰nh sá»­a há»“ sÆ¡
        </Button>
    </div>
</div>
        </div>
    </div>
            </section>
            {/* Sá»­ dá»¥ng EditProfileDrawer */}
            <EditProfileDrawer
                visible={editVisible}
                onClose={() => setEditVisible(false)}
                user={user}  // Truyá»n user vÃ o
                onEditSubmit={handleEditSubmit}
                onPasswordChange={() => setChangePasswordVisible(true)}
            />


             {/* Sá»­ dá»¥ng ChangePasswordDrawer */}
             <ChangePasswordDrawer
                visible={changePasswordVisible}
                onClose={() => setChangePasswordVisible(false)}
                onPasswordSubmit={handleChangePasswordSubmit}
            />

              {/* BookingHistory component */}
            <BookingHistory
                bookingHistory={bookingHistory}
                currentPage={currentPage}
                itemsPerPage={itemsPerPage}
                onPageChange={onPageChange}
                formatDate={formatDate}
                isOrderIdVisible={isOrderIdVisible}
                toggleOrderIdVisibility={toggleOrderIdVisibility}
            />

             {/* Modal cho AvatarEdit */}
            <Modal
                width={1000}
                visible={showCropper}
                onCancel={onClose}
                onOk={handleUpload}
                title="Chá»‰nh sá»­a áº£nh Ä‘áº¡i diá»‡n"
                footer={[
                    <Button key="cancel" onClick={onClose} className="cancel-button">
                        Há»§y
                    </Button>,
                    <Button key="save" type="primary" onClick={handleUpload} className="save-button">
                        LÆ°u
                    </Button>,
                ]}
                className="avatar-modal"
            >
                <div className="avatar-edit-container">
                    <AvatarEdit
                        width={900}
                        height={400}
                        onCrop={onCrop}
                        onClose={onClose}
                    />
                </div>
            </Modal>

            {/* Modal for loading */}
            <LoadingModal loading={loading} />

        </main>
    );
};



export default ProfileVip;




```

### client\src\components\account\RatingComponent.jsx
```jsx
import React, { useState } from "react";
import axios from "axios";
import { Modal, Rate, Button, message, Input } from "antd";

const { TextArea } = Input;

const RatingComponent = ({ hotelId, onClose }) => {
  const [rating, setRating] = useState(0); // LÆ°u rating cá»§a ngÆ°á»i dÃ¹ng
  const [comment, setComment] = useState(""); // LÆ°u nháº­n xÃ©t cá»§a ngÆ°á»i dÃ¹ng
  const [isSubmitting, setIsSubmitting] = useState(false); // Tráº¡ng thÃ¡i gá»­i Ä‘Ã¡nh giÃ¡

  // HÃ m gá»­i Ä‘Ã¡nh giÃ¡ Ä‘áº¿n API
  const submitRating = async () => {
    if (rating === 0) {
      message.error("Vui lÃ²ng chá»n má»©c Ä‘Ã¡nh giÃ¡.");
      return;
    }

    console.log("Submitting Rating...");
    console.log("Hotel ID:", hotelId);  // Log hotelId
    const userId = localStorage.getItem("userId");
    console.log("User ID:", userId); // Log userId, giáº£ sá»­ userId lÆ°u trong localStorage

    // Kiá»ƒm tra hotelId vÃ  userId
    if (!hotelId) {
      message.error("ThÃ´ng tin khÃ¡ch sáº¡n khÃ´ng Ä‘áº§y Ä‘á»§ Ä‘á»ƒ gá»­i Ä‘Ã¡nh giÃ¡.");
      return;
    }
    if (!userId) {
      message.error("Báº¡n chÆ°a Ä‘Äƒng nháº­p. Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ gá»­i Ä‘Ã¡nh giÃ¡.");
      return;
    }

    setIsSubmitting(true); // Báº­t tráº¡ng thÃ¡i Ä‘ang gá»­i
    try {
      // Gá»i API Ä‘á»ƒ gá»­i rating vÃ  comment
      const response = await axios.post(
        `/api/rating/${hotelId}`,
        { rating, comment } // Dá»¯ liá»‡u gá»­i Ä‘i (khÃ´ng cÃ³ bookingId)
      );

      if (response.status === 201) {
        message.success("ÄÃ¡nh giÃ¡ cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c gá»­i!");
        onClose(); // ÄÃ³ng modal sau khi gá»­i thÃ nh cÃ´ng
      } else {
        message.error(response.data.msg || "ÄÃ£ xáº£y ra lá»—i khi gá»­i Ä‘Ã¡nh giÃ¡.");
      }
    } catch (error) {
      console.error("API Error:", error);  // Log lá»—i náº¿u cÃ³
      message.error("Lá»—i káº¿t ná»‘i. Vui lÃ²ng thá»­ láº¡i.");
    } finally {
      setIsSubmitting(false); // Táº¯t tráº¡ng thÃ¡i gá»­i
    }
  };

  return (
    <Modal
      title="ÄÃ¡nh giÃ¡ khÃ¡ch sáº¡n"
      visible={true}
      onCancel={onClose}
      footer={null} // KhÃ´ng hiá»ƒn thá»‹ nÃºt máº·c Ä‘á»‹nh
    >
      <div className="flex flex-col items-center">
        <h3 className="text-lg font-semibold mb-4">ÄÃ¡nh giÃ¡ khÃ¡ch sáº¡n</h3>
        
        {/* Chá»n Ä‘Ã¡nh giÃ¡ sao */}
        <Rate
          onChange={(value) => setRating(value)} // Cáº­p nháº­t rating khi ngÆ°á»i dÃ¹ng chá»n
          value={rating}
          style={{ fontSize: "24px", marginBottom: "20px" }}
        />

        {/* Nháº­p nháº­n xÃ©t */}
        <TextArea
          rows={4}
          value={comment}
          onChange={(e) => setComment(e.target.value)} // Cáº­p nháº­t nháº­n xÃ©t khi ngÆ°á»i dÃ¹ng nháº­p
          placeholder="Nháº­p nháº­n xÃ©t cá»§a báº¡n..."
          style={{ marginBottom: "20px", width: "100%" }}
        />

        <div className="flex justify-center space-x-4">
          <Button onClick={onClose} disabled={isSubmitting}>
            Há»§y
          </Button>
          <Button
            type="primary"
            onClick={submitRating}
            loading={isSubmitting}
            disabled={isSubmitting}
          >
            Gá»­i ÄÃ¡nh GiÃ¡
          </Button>
        </div>
      </div>
    </Modal>
  );
};

export default RatingComponent;

```

### client\src\components\account\Register.jsx
```jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Input, Checkbox } from 'antd';
import { motion } from 'framer-motion';
import '../../assets/css/Register.css';

const Register = () => {
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [error, setError] = useState(null);
  const [agreeTerms, setAgreeTerms] = useState(false);
  const navigate = useNavigate();

  const handleRegister = async (e) => {
    e.preventDefault();
    setError(null);

    if (password !== confirmPassword) {
      setError('Máº­t kháº©u vÃ  máº­t kháº©u nháº­p láº¡i khÃ´ng khá»›p');
      return;
    }

    if (!agreeTerms) {
      setError('Báº¡n cáº§n Ä‘á»“ng Ã½ vá»›i cÃ¡c Ä‘iá»u khoáº£n vÃ  chÃ­nh sÃ¡ch quyá»n riÃªng tÆ°');
      return;
    }

    const registrationDate = new Date().toISOString();
    const name = `${firstName} ${lastName}`;

    try {
      const response = await fetch('/api/users/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, password, registrationDate }),
      });

      const data = await response.json();
      if (response.ok) {
        localStorage.setItem('token', data.token);
        localStorage.setItem('user', JSON.stringify(data.user));
        navigate('/login');
      } else {
        setError(data.msg || 'CÃ³ lá»—i xáº£y ra');
      }
    } catch (err) {
      console.error('Lá»—i máº¡ng hoáº·c server:', err);
      setError('CÃ³ lá»—i xáº£y ra, vui lÃ²ng thá»­ láº¡i sau.');
    }
  };

  return (
    <div className="absolute inset-0 flex flex-col md:flex-row justify-center items-start px-4 py-8 md:px-16 md:py-16 bg-gradient-to-r from-gray-100 to-white">
      <motion.div 
        className="register-form flex flex-col md:flex-row max-w-3xl gap-6 bg-white p-6 rounded-lg shadow-md"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
      >
        <div className="register-image w-[350px] relative mr-8">
          <img
            className="w-[100%] h-auto rounded-lg shadow-md"
            src="/register.png"
            alt="Register"
          />
        </div>

        <div className="flex flex-col w-[400px] justify-start items-start gap-6">
          <h2 className="text-black text-4xl font-normal text-center md:text-left">Táº¡o tÃ i khoáº£n cá»§a báº¡n</h2>
          {error && <div className="text-red-500 mb-4 text-center">{error}</div>}
          <form onSubmit={handleRegister} className="flex flex-col gap-6">
            <div className="flex flex-col md:flex-row gap-4">
              <div className="flex flex-col w-full">
                <label className="text-[#1c1b1f] text-sm">Há»</label>
                <input
                  type="text"
                  value={firstName}
                  onChange={(e) => setFirstName(e.target.value)}
                  className="w-full px-4 input-field border rounded-md focus:outline-none "
                  required
                  placeholder=""
                />
              </div>
              <div className="flex flex-col w-full">
                <label className="text-[#1c1b1f] text-sm">TÃªn</label>
                <input
                  type="text"
                  value={lastName}
                  onChange={(e) => setLastName(e.target.value)}
                  className="w-full px-4 input-field border rounded-md focus:outline-none "
                  required
                  placeholder=""
                />
              </div>
            </div>

            <div className="flex flex-col">
              <label className="text-[#1c1b1f] text-sm">Email</label>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full px-4 input-field border rounded-md focus:outline-none "
                required
                style={{ color: 'black' }}
                placeholder=""
              />
            </div>

            <div className="flex flex-col">
              <label className="text-[#1c1b1f] text-sm">Máº­t kháº©u</label>
              <Input.Password
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="w-full input-field border rounded-md focus:outline-none "
                required
                placeholder=""
              />
            </div>

            <div className="flex flex-col">
              <label className="text-[#1c1b1f] text-sm">Nháº­p láº¡i máº­t kháº©u</label>
              <Input.Password
                value={confirmPassword}
                onChange={(e) => setConfirmPassword(e.target.value)}
                className="w-full input-field border rounded-md focus:outline-none "
                required
                placeholder=""
              />
            </div>

            <div className="flex items-center border-black">
              <Checkbox
                checked={agreeTerms}
                onChange={(e) => setAgreeTerms(e.target.checked)}
                className="checkbox "
              />
              <span className="text-sm " style={{ color: 'black' }}>
                  TÃ´i Ä‘á»“ng Ã½ vá»›i táº¥t cáº£ cÃ¡c Äiá»u khoáº£n vÃ  ChÃ­nh sÃ¡ch quyá»n riÃªng tÆ°
              </span>
            </div>

            <div className="flex items-center justify-center">
              <button 
                type="submit" 
                className="w-full bg-black text-white py-2 rounded-md hover:bg-gray-800 transition duration-300 ease-in-out"
              >
                ÄÄƒng KÃ½
              </button>
            </div>
          </form>
        </div>
      </motion.div>
    </div>
  );
};

export default Register;

```

### client\src\components\account\Resetpassword.jsx
```jsx
import React, { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Input, Button, notification } from 'antd';
import { motion } from 'framer-motion';

const ResetPassword = () => {
  const { token } = useParams();
  const navigate = useNavigate();
  const [newPassword, setNewPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  const handleResetPassword = async () => {
    setError(null);
    setSuccess(null);

    if (newPassword !== confirmPassword) {
      setError('Máº­t kháº©u khÃ´ng khá»›p!');
      return;
    }

    try {
      const response = await fetch('/api/profile/reset', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token, newPassword }),
      });

      const data = await response.json();
      if (response.ok) {
        notification.success({
          message: "ThÃ nh CÃ´ng.",
          description: "Máº­t kháº©u Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng!",
        });
        setTimeout(() => navigate('/login'), 600);
      } else {
        notification.error({
          message: "Tháº¥t Báº¡i.",
          description: "Cáº­p nháº­t máº­t kháº©u tháº¥t báº¡i, vui lÃ²ng thá»­ láº¡i sau!",
        });
      }
    } catch (err) {
      console.error('Lá»—i máº¡ng hoáº·c server:', err);
      setError('CÃ³ lá»—i xáº£y ra, vui lÃ²ng thá»­ láº¡i sau.');
    }
  };

  return (
    <motion.div
      className="absolute inset-0 flex flex-col md:flex-row justify-center items-center px-4 py-8 md:px-16 md:py-16 bg-gradient-to-r from-gray-100 to-white"
      initial={{ opacity: 0, y: -50 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: 50 }}
      transition={{ duration: 0.5 }}
    >
      <div className="w-full max-w-4xl flex flex-col md:flex-row justify-start items-start gap-6 p-6 bg-white shadow-md rounded-lg">
        {/* Form Section */}
        <div className="w-full md:w-1/2 flex flex-col gap-6">
          <h2 className="text-black text-4xl font-normal text-left">Äáº·t láº¡i máº­t kháº©u</h2>
          {error && <div className="text-red-500 mb-4 text-left">{error}</div>}
          {success && <div className="text-green-500 mb-4 text-left">{success}</div>}
          <div className="flex flex-col gap-6">
            <div className="flex flex-col">
              <label className="text-[#1c1b1f] text-sm">Máº­t kháº©u má»›i</label>
              <Input
                type="password"
                value={newPassword}
                onChange={(e) => setNewPassword(e.target.value)}
                className="w-full input-field border border-gray-300 rounded-md focus:outline-none"
                required
              />
            </div>
            <div className="flex flex-col">
              <label className="text-[#1c1b1f] text-sm">XÃ¡c nháº­n máº­t kháº©u</label>
              <Input
                type="password"
                value={confirmPassword}
                onChange={(e) => setConfirmPassword(e.target.value)}
                className="w-full input-field border border-gray-300 rounded-md focus:outline-none"
                required
              />
            </div>
            <div className="flex items-center justify-center">
              <Button
                onClick={handleResetPassword}
                className="w-full bg-black text-white py-2 rounded-md text-lg h-12 hover:bg-gray-800 transition duration-300 ease-in-out"
              >
                Äáº·t láº¡i máº­t kháº©u
              </Button>
            </div>
          </div>
          <div className="flex justify-center">
            <p className="text-sm text-black">
              Quay láº¡i trang
              <a href="/login" className="text-red-500 ml-1">ÄÄƒng nháº­p</a>
            </p>
          </div>
        </div>

        {/* Image Section */}
        <div className="w-full md:w-1/2 flex justify-center items-center">
          <img
            src="../bg.png"
            alt="Reset Password"
            className="rounded-lg shadow-md"
            style={{ width: '315px', height: '480px' }} // Äiá»u chá»‰nh kÃ­ch thÆ°á»›c táº¡i Ä‘Ã¢y
          />  
        </div>
      </div>
    </motion.div>
  );
};

export default ResetPassword;

```

### client\src\components\BookingStatus\BookingCard.jsx
```jsx
import React, { useState, useEffect } from 'react';
import { Drawer, List, ListItem, ListItemText, Grid, Typography, Pagination, Button } from '@mui/material';
import { HiX } from 'react-icons/hi';
import axios from 'axios';
import { motion } from 'framer-motion';
import { useNavigate } from 'react-router-dom';
import 'animate.css';
import RatingDrawer from './RatingDrawer'; // Import RatingDrawer

const BookingCard = ({ open, onClose }) => {
  const [roomsData, setRoomsData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [currentPage, setCurrentPage] = useState(1);
  const [ratingDrawerOpen, setRatingDrawerOpen] = useState(false); // Quáº£n lÃ½ tráº¡ng thÃ¡i RatingDrawer
  const [selectedHotel, setSelectedHotel] = useState(null); // LÆ°u khÃ¡ch sáº¡n Ä‘Æ°á»£c chá»n
  const roomsPerPage = 4;

  const navigate = useNavigate();

  useEffect(() => {
    if (open) {
      fetchBookedRooms();
    }
  }, [open, currentPage]);

  const fetchBookedRooms = async () => {
    setLoading(true);
    setError(null);
    try {
      const response = await axios.get('/api/booking', {
        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },
      });
      const filteredRooms = response.data.filter(
        (booking) => booking.paymentStatus === 'Done'
      );
      setRoomsData(filteredRooms);
    } catch (err) {
      setError('Lá»—i khi táº£i dá»¯ liá»‡u Ä‘áº·t phÃ²ng.');
    } finally {
      setLoading(false);
    }
  };

  const handleRoomClick = (hotelId) => {
    navigate(`/detailhotel/${hotelId}`);
  };

  const handleOpenRatingDrawer = (hotel) => {
    setSelectedHotel(hotel);
    setRatingDrawerOpen(true);
  };

  const handleCloseRatingDrawer = () => {
    setRatingDrawerOpen(false);
    setSelectedHotel(null);
  };

  const indexOfLastRoom = currentPage * roomsPerPage;
  const indexOfFirstRoom = indexOfLastRoom - roomsPerPage;
  const currentRooms = roomsData.slice(indexOfFirstRoom, indexOfLastRoom);

  const paginate = (event, pageNumber) => {
    setCurrentPage(pageNumber);
  };

  return (
    <>
      <motion.div
        initial={{ x: '100%' }}
        animate={{ x: open ? 0 : '100%' }}
        exit={{ x: '100%' }}
        transition={{ type: 'spring', stiffness: 300, damping: 30 }}
      >
        <Drawer anchor="right" open={open} onClose={onClose}>
          <div className="drawer-container animate__animated animate__fadeInRight">
            <div className="drawer-header">
              <Typography variant="h5" component="h2" style={{ fontWeight: 700 }}>
                Lá»‹ch sá»­ báº¡n Ä‘Ã£ Ä‘áº·t
              </Typography>
              <button onClick={onClose} className="close-button">
                <HiX size={24} />
              </button>
            </div>

            {error && (
              <div className="error-message">
                <Typography variant="body1">{error}</Typography>
              </div>
            )}

            <List>
              {currentRooms.length === 0 ? (
                <ListItem>
                  <ListItemText primary="Báº¡n chÆ°a cÃ³ Ä‘áº·t phÃ²ng nÃ o hoÃ n táº¥t." />
                </ListItem>
              ) : (
                currentRooms.map((booking) => (
                  <div
                    key={booking._id}
                    className="hotel-item animate__animated animate__fadeInUp"
                    onClick={() => handleRoomClick(booking.room.hotel._id)}
                  >
                    <Grid container spacing={2} alignItems="center">
                      <Grid item xs={4} sm={3}>
                        <img
                          src={booking.room.hotel.imagehotel[0]}
                          alt={booking.room.hotel.name}
                          className="hotel-image"
                        />
                      </Grid>

                      <Grid item xs={8} sm={6}>
                        <div className="hotel-info">
                          <Typography variant="h6">{booking.room.hotel.name}</Typography>
                          <Typography variant="body2" className="price">
                            {booking.priceBooking.toLocaleString()} VND
                          </Typography>
                        </div>
                      </Grid>

                      <Grid item xs={12} sm={3}>
                        <Button
                          variant="outlined"
                          color="primary"
                          onClick={(e) => {
                            e.stopPropagation(); // NgÄƒn cháº·n sá»± kiá»‡n click lan ra ngoÃ i
                            handleOpenRatingDrawer(booking.room.hotel);
                          }}
                        >
                          ÄÃ¡nh giÃ¡
                        </Button>
                      </Grid>
                    </Grid>
                    <hr />
                  </div>
                ))
              )}
            </List>

            {roomsData.length > roomsPerPage && (
              <div className="pagination-container">
                <Pagination
                  count={Math.ceil(roomsData.length / roomsPerPage)}
                  page={currentPage}
                  onChange={paginate}
                  color="primary"
                />
              </div>
            )}
          </div>
        </Drawer>
      </motion.div>

      {/* Drawer ÄÃ¡nh giÃ¡ */}
      {selectedHotel && (
        <RatingDrawer
          open={ratingDrawerOpen}
          onClose={handleCloseRatingDrawer}
          hotel={selectedHotel}
        />
      )}
    </>
  );
};

export default BookingCard;

```

### client\src\components\BookingStatus\RatingDrawer.jsx
```jsx
import React, { useState } from 'react';
import {
  Drawer,
  Typography,
  TextField,
  Button,
  CircularProgress,
  Box,
  Slide,
} from '@mui/material';
import axios from 'axios';

const RatingDrawer = ({ open, onClose, hotel }) => {
  const [rating, setRating] = useState(5); // Äiá»ƒm máº·c Ä‘á»‹nh
  const [comment, setComment] = useState('');
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState(null);

  const handleSubmit = async () => {
    setLoading(true);
    setMessage(null);

    try {
      const response = await axios.post(
        '/api/detail/rate',
        { hotel: hotel._id, rating, comment },
        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }
      );

      setMessage(response.data.message);
      setRating(5); // Reset Ä‘Ã¡nh giÃ¡
      setComment(''); // Reset bÃ¬nh luáº­n
    } catch (err) {
      setMessage(err.response?.data?.message || 'CÃ³ lá»—i xáº£y ra!');
    } finally {
      setLoading(false);
    }
  };

  return (
    <Drawer
      anchor="right" // Hiá»ƒn thá»‹ tá»« bÃªn pháº£i
      open={open}
      onClose={onClose}
      PaperProps={{
        sx: {
          width: '400px', // Äá»™ rá»™ng Drawer
          padding: '20px',
          backgroundColor: '#f9f9f9', // MÃ u ná»n
          boxShadow: '0px 4px 20px rgba(0, 0, 0, 0.1)', // Äá»• bÃ³ng
        },
      }}
    >
      <Slide direction="left" in={open} mountOnEnter unmountOnExit>
        <Box>
          <Typography
            variant="h5"
            sx={{ marginBottom: '16px', fontWeight: 'bold', color: '#333' }}
          >
            ÄÃ¡nh giÃ¡ khÃ¡ch sáº¡n: {hotel.name}
          </Typography>

          <TextField
            type="number"
            label="Äiá»ƒm (1-10)"
            value={rating}
            onChange={(e) => setRating(Math.max(1, Math.min(10, Number(e.target.value))))}
            fullWidth
            sx={{ marginBottom: '16px' }}
          />

          <TextField
            label="BÃ¬nh luáº­n"
            multiline
            rows={4}
            value={comment}
            onChange={(e) => setComment(e.target.value)}
            fullWidth
            sx={{ marginBottom: '16px' }}
          />

          {loading ? (
            <CircularProgress sx={{ display: 'block', margin: '0 auto' }} />
          ) : (
            <Button
              variant="contained"
              color="primary"
              onClick={handleSubmit}
              sx={{
                backgroundColor: '#007BFF',
                '&:hover': { backgroundColor: '#0056b3' },
              }}
            >
              XÃ¡c nháº­n
            </Button>
          )}

          {message && (
            <Typography
              variant="body1"
              sx={{
                color: message.includes('thÃ nh cÃ´ng') ? 'green' : 'red',
                marginTop: '16px',
                textAlign: 'center',
              }}
            >
              {message}
            </Typography>
          )}
        </Box>
      </Slide>
    </Drawer>
  );
};

export default RatingDrawer;

```

### client\src\components\Checkout\confirm-payment.jsx
```jsx
import React, { useEffect } from 'react';
import axios from 'axios';

const Success = ({ orderId }) => {
  useEffect(() => {
    const confirmPayment = async () => {
      try {
        const response = await axios.post('http://localhost:5000/api/checkout/confirm', { orderId });
        console.log(response.data.message);
      } catch (error) {
        console.error('Lá»—i khi xÃ¡c nháº­n thanh toÃ¡n:', error);
      }
    };

    confirmPayment();
  }, [orderId]);

  return (
    <div className='text-black'>
      <h1>Thanh toÃ¡n thÃ nh cÃ´ng!</h1>
      <p>ÄÆ¡n hÃ ng cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c nháº­n.</p>
    </div>
  );
};

export default Success;

```

### client\src\components\Checkout\Payment.jsx
```jsx
import React, { useState, useEffect } from "react";
import axios from "axios";
import { notification } from "antd";
import { useNavigate } from "react-router-dom";
import { Modal, Button } from "@mui/material";

const Payment = ({
  roomDetails,
  checkInDate,
  checkOutDate,
  email,
  phone,
  totalPrice,
}) => {
  const [userId, setUserId] = useState(null);
  const [modalOpen, setModalOpen] = useState(false); // Tráº¡ng thÃ¡i cá»§a modal
  const navigate = useNavigate();

  useEffect(() => {
    const fetchUserId = async () => {
      try {
        const response = await axios.get("/api/profile/me", {
          headers: {
            Authorization: `Bearer ${localStorage.getItem("token")}`,
          },
        });
        setUserId(response.data._id);
      } catch (error) {
        console.error("Lá»—i láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng:", error);
        navigate("/login");
      }
    };

    fetchUserId();
  }, [navigate]);

  const handlePaymentMethod = async (method) => {
    if (!checkInDate || !checkOutDate || !email || !phone) {
      notification.info({
        message: "Thiáº¿u ThÃ´ng Tin Äáº·t PhÃ²ng",
        description: "Vui lÃ²ng nháº­p Ä‘á»§ thÃ´ng tin.",
      });
      return;
    }

    try {
      if (method === "Momo") {
        const response = await axios.post("/api/checkout/payment", {
          amount: totalPrice, // GiÃ¡ tiá»n tá»•ng
          checkInDate,
          checkOutDate,
          phoneBooking: phone,
          emailBooking: email,
          userId: userId || undefined,
          roomId: roomDetails._id, // ID phÃ²ng
        });

        window.location.href = response.data.payUrl; // Redirect tá»›i URL thanh toÃ¡n Momo
      } else if (method === "TrucTiep") {
        const orderId = "TIENMAT" + Math.random().toString(36).substring(2, 15); // Táº¡o orderId ngáº«u nhiÃªn cho thanh toÃ¡n tiá»n máº·t

        const response = await axios.post("/api/checkout/confirmpaid", {
          userId: userId || undefined,
          roomId: roomDetails._id,
          checkInDate,
          checkOutDate,
          phoneBooking: phone,
          emailBooking: email,
          paymentStatus: "Pending",
          orderId: orderId,
          priceBooking: totalPrice,
        });

        alert("Äáº·t phÃ²ng thÃ nh cÃ´ng! MÃ£ Ä‘Æ¡n hÃ ng: " + orderId); // Hiá»ƒn thá»‹ mÃ£ Ä‘Æ¡n hÃ ng
        setModalOpen(false); // ÄÃ³ng modal
        navigate("/myprofile");
      }
    } catch (error) {
      console.error("Lá»—i khi thanh toÃ¡n:", error);
      alert("CÃ³ lá»—i xáº£y ra khi thanh toÃ¡n. Vui lÃ²ng thá»­ láº¡i!");
    }
  };

  return (
    <div className="payment bg-white p-4 mt-4 rounded-lg shadow-md">
      <button
        onClick={() => setModalOpen(true)} // Má»Ÿ modal
        className="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition"
      >
        Thanh ToÃ¡n
      </button>

      {/* Modal Ä‘á»ƒ chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n */}
      <Modal
        open={modalOpen}
        onClose={() => setModalOpen(false)} // ÄÃ³ng modal khi thoÃ¡t
      >
        <div className="modal-content p-4 bg-white rounded shadow-lg w-1/3 mx-auto mt-20">
          <h2 className="text-center mb-4">Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n</h2>
          <div className="flex justify-around">
            <Button
              variant="contained"
              color="primary"
              onClick={() => handlePaymentMethod("Momo")}
            >
              Thanh toÃ¡n qua Momo
            </Button>
            <Button
              variant="contained"
              color="secondary"
              onClick={() => handlePaymentMethod("TrucTiep")}
            >
              Thanh toÃ¡n trá»±c tiáº¿p
            </Button>
          </div>
        </div>
      </Modal>
    </div>
  );
};

export default Payment;

```

### client\src\components\Checkout\RoomInfo.jsx
```jsx
import React, { useState, useEffect } from "react";
import { DatePicker, Input, Tooltip } from "antd";
import axios from "axios";

const { RangePicker } = DatePicker;

const RoomInfo = ({
  roomDetails,
  user,
  setCheckInDate,
  setCheckOutDate,
  setEmail,
  setPhone,
  setTotalDays,
}) => {
  const [localEmail, setLocalEmail] = useState("");
  const [localPhone, setLocalPhone] = useState("");
  const [localDateRange, setLocalDateRange] = useState([null, null]);
  const [bookedDates, setBookedDates] = useState([]); // Danh sÃ¡ch cÃ¡c ngÃ y Ä‘Ã£ Ä‘áº·t

  useEffect(() => {
    if (roomDetails) {
      const fetchBookedDates = async () => {
        try {
          const response = await axios.get(
            `/api/booking/booking/room-availability/${roomDetails._id}`
          );
          const formattedDates =
            response.data.bookedDates?.map((date) => date.split("T")[0]) || [];
          setBookedDates(formattedDates);
        } catch (error) {
          console.error("Lá»—i khi láº¥y danh sÃ¡ch ngÃ y Ä‘Ã£ Ä‘áº·t:", error);
        }
      };

      fetchBookedDates();
    }
  }, [roomDetails]);

  const calculateDays = (dates) => {
    if (dates && dates[0] && dates[1]) {
      const checkIn = dates[0].toDate();
      const checkOut = dates[1].toDate();
      const diffTime = Math.abs(checkOut - checkIn);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      setTotalDays(diffDays);
      setCheckInDate(checkIn.toISOString().split("T")[0]);
      setCheckOutDate(checkOut.toISOString().split("T")[0]);
    }
  };

  // Kiá»ƒm tra ngÃ y Ä‘Ã£ qua hoáº·c Ä‘Ã£ Ä‘áº·t
  const disabledDate = (current) => {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const formattedDate = current?.format("YYYY-MM-DD");
    return current && (current < today || bookedDates.includes(formattedDate));
  };

  const dateRender = (current) => {
    const formattedDate = current.format("YYYY-MM-DD");
    const isBooked = bookedDates.includes(formattedDate);

    // Náº¿u ngÃ y Ä‘Ã£ Ä‘áº·t, khÃ´ng cáº§n hiá»ƒn thá»‹ biá»ƒu tÆ°á»£ng, chá»‰ cho phÃ©p chá»n cÃ¡c ngÃ y chÆ°a Ä‘áº·t
    return (
      <Tooltip title={isBooked ? "ÄÃ£ Ä‘áº·t - KhÃ´ng thá»ƒ chá»n" : "CÃ²n trá»‘ng"}>
        <div
          className={`ant-picker-cell-inner flex items-center justify-center rounded-md ${
            isBooked
              ? "bg-red-500 text-white cursor-not-allowed" // NgÃ y Ä‘Ã£ Ä‘áº·t
              : current.isBefore(new Date(), "day")
              ? "bg-gray-200 text-gray-500 cursor-not-allowed" // NgÃ y Ä‘Ã£ qua khÃ´ng thá»ƒ chá»n
              : "bg-green-100 text-green-800 hover:bg-green-200" // NgÃ y cÃ³ thá»ƒ chá»n
          }`}
          style={{
            border: isBooked
              ? "2px solid #ff4d4f"
              : current.isBefore(new Date(), "day")
              ? "2px solid #d9d9d9"
              : "2px solid #52c41a",
            transition: "background 0.3s ease, transform 0.3s ease",
          }}
        >
          {current.date()}
          {!isBooked && !current.isBefore(new Date(), "day") && (
            <span className="ml-1 text-xs">âœ”</span> // Chá»‰ biá»ƒu tÆ°á»£ng cho ngÃ y cÃ³ thá»ƒ chá»n
          )}
        </div>
      </Tooltip>
    );
  };

  if (!roomDetails) {
    return <p>Äang táº£i thÃ´ng tin phÃ²ng...</p>;
  }

  return (
    <div className="room-info bg-white p-4 rounded-lg shadow-md">
      <p>{roomDetails.description}</p>
      <div className="date-picker mt-4">
        <label className="block mb-2">
          NgÃ y nháº­n phÃ²ng vÃ  tráº£ phÃ²ng:
          <RangePicker
            className="w-full text-lg border-2 border-gray-300 rounded-lg p-2"
            value={localDateRange}
            onChange={(dates) => {
              setLocalDateRange(dates);
              calculateDays(dates);
            }}
            disabledDate={disabledDate}
            dateRender={dateRender}
          />
        </label>
      </div>
      {!user && (
        <div className="user-info-input mb-4">
          <label className="block mb-2">
            Email:
            <Input
              type="email"
              value={localEmail}
              onChange={(e) => setLocalEmail(e.target.value)}
              className="w-full p-2 border border-gray-300 rounded-md"
              placeholder="Nháº­p email"
              onBlur={() => setEmail(localEmail)}
            />
          </label>
          <label className="block mb-4">
            Sá»‘ Ä‘iá»‡n thoáº¡i:
            <Input
              type="tel"
              value={localPhone}
              onChange={(e) => setLocalPhone(e.target.value)}
              className="w-full p-2 border border-gray-300 rounded-md"
              placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i"
              onBlur={() => setPhone(localPhone)}
            />
          </label>
        </div>
      )}
    </div>
  );
};

export default RoomInfo;

```

### client\src\components\Checkout\Success.jsx
```jsx
import React, { useEffect } from 'react';
import axios from 'axios';
import { useLocation } from 'react-router-dom';
import { FaCheckCircle } from 'react-icons/fa';

const SuccessPage = () => {
  const location = useLocation();
  const params = new URLSearchParams(location.search);
  const orderId = params.get('orderId');
  const paymentStatus = params.get('paymentStatus');

  useEffect(() => {
    const confirmBooking = async () => {
      try {
        const response = await axios.post('/api/checkout/confirmchange', {
          orderId: orderId,
          // thÃªm cÃ¡c thÃ´ng tin cáº§n thiáº¿t khÃ¡c náº¿u cÃ³
        });
        console.log('XÃ¡c nháº­n booking thÃ nh cÃ´ng:', response.data);
      } catch (error) {
        console.error('Lá»—i khi xÃ¡c nháº­n booking:', error);
      }
    };

    if (orderId) {
      confirmBooking();
    }
  }, [orderId]);

  return (
    <div 
      className="relative flex items-center justify-center min-h-screen bg-cover bg-center bg-no-repeat"
      style={{ backgroundImage: 'url("https://res.cloudinary.com/dackig67m/image/upload/v1731093708/34d7a3bbe7ab056f213e66c7182dd57e_u8wj4s.gif")' }} // thay URL áº£nh á»Ÿ Ä‘Ã¢y
    >
      {/* Overlay Ä‘á»ƒ lÃ m má» áº£nh ná»n */}
      <div className="absolute inset-0 bg-black opacity-40"></div>
      
      <div className="relative bg-white bg-opacity-90 rounded-lg shadow-lg p-6 md:p-8 text-center max-w-md mx-4">
      <div className="flex flex-col items-center justify-center">
        <FaCheckCircle className="text-green-500 text-6xl mb-4" />
        <h1 className="text-2xl font-bold text-gray-800 mb-2">Thanh toÃ¡n thÃ nh cÃ´ng!</h1>
        <p className="text-gray-600 mb-4">Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘áº·t phÃ²ng. MÃ£ Ä‘Æ¡n hÃ ng cá»§a báº¡n lÃ :</p>
        <p className="text-lg font-semibold text-blue-600 mb-6">{orderId}</p>
        
        <button
          onClick={() => window.location.href = "/"}
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105"
        >
          Quay vá» trang chá»§
        </button>
        </div>

      </div>
    </div>
  );
};

export default SuccessPage;

```

### client\src\components\Checkout\Summary.jsx
```jsx
import React, { useState, useEffect } from 'react';

const Summary = ({ roomDetails, totalDays, setTotalPrice }) => {
  const roomPrice = roomDetails ? roomDetails.price : 0;

  useEffect(() => {
    if (roomDetails) {
      setTotalPrice(roomPrice * totalDays);  // Cáº­p nháº­t totalPrice khi roomDetails hoáº·c totalDays thay Ä‘á»•i
    }
  }, [roomDetails, totalDays, setTotalPrice]);

  if (!roomDetails) return null; // Chá»‰ tráº£ vá» null náº¿u chÆ°a cÃ³ roomDetails

  return (
    <div className="summary bg-white p-4 mt-4 rounded-lg shadow-md">
      <h2 className="text-xl font-semibold mb-4">TÃ³m Táº¯t Thanh ToÃ¡n</h2>
      <div className="mb-4">Loáº¡i phÃ²ng: {roomDetails.type}</div>
      <div className="flex justify-between mb-2">
        <span>Tá»•ng tiá»n:</span>
        <span className='price'>{(roomPrice * totalDays).toLocaleString('vi-VN')} VNÄ</span>
      </div>
      <div className="text-sm mt-4">LÆ°u Ã½: giÃ¡ phÃ²ng Ä‘Ã£ bao gá»“m thuáº¿</div>
    </div>
  );
};

export default Summary;

```

### client\src\components\dashboard\analytics\AIPoweredInsights.jsx
```jsx
import { motion } from "framer-motion";
import { TrendingUp, Users, ShoppingBag, DollarSign } from "lucide-react";

const INSIGHTS = [
	{
		icon: TrendingUp,
		color: "text-green-500",
		insight: "Revenue is up 15% compared to last month, driven primarily by a successful email campaign.",
	},
	{
		icon: Users,
		color: "text-blue-500",
		insight: "Customer retention has improved by 8% following the launch of the new loyalty program.",
	},
	{
		icon: ShoppingBag,
		color: "text-purple-500",
		insight: 'Product category "Electronics" shows the highest growth potential based on recent market trends.',
	},
	{
		icon: DollarSign,
		color: "text-yellow-500",
		insight: "Optimizing pricing strategy could potentially increase overall profit margins by 5-7%.",
	},
];

const AIPoweredInsights = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 1.0 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>AI-Powered Insights</h2>
			<div className='space-y-4'>
				{INSIGHTS.map((item, index) => (
					<div key={index} className='flex items-center space-x-3'>
						<div className={`p-2 rounded-full ${item.color} bg-opacity-20`}>
							<item.icon className={`size-6 ${item.color}`} />
						</div>
						<p className='text-gray-300'>{item.insight}</p>
					</div>
				))}
			</div>
		</motion.div>
	);
};
export default AIPoweredInsights;

```

### client\src\components\dashboard\analytics\ChannelPerformance.jsx
```jsx
import { motion } from "framer-motion";
import { PieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer } from "recharts";

const channelData = [
	{ name: "Organic Search", value: 4000 },
	{ name: "Paid Search", value: 3000 },
	{ name: "Direct", value: 2000 },
	{ name: "Social Media", value: 2780 },
	{ name: "Referral", value: 1890 },
	{ name: "Email", value: 2390 },
];
const COLORS = ["#8884d8", "#82ca9d", "#ffc658", "#ff8042", "#0088FE", "#00C49F"];

const ChannelPerformance = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.3 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Channel Performance</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<PieChart>
						<Pie
							data={channelData}
							cx='50%'
							cy='50%'
							outerRadius={80}
							fill='#8884d8'
							dataKey='value'
							label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
						>
							{channelData.map((entry, index) => (
								<Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
							))}
						</Pie>
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
					</PieChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default ChannelPerformance;

```

### client\src\components\dashboard\analytics\CustomerSegmentation.jsx
```jsx
import { motion } from "framer-motion";
import {
	ResponsiveContainer,
	Radar,
	RadarChart,
	PolarGrid,
	PolarAngleAxis,
	PolarRadiusAxis,
	Legend,
	Tooltip,
} from "recharts";

const customerSegmentationData = [
	{ subject: "Engagement", A: 120, B: 110, fullMark: 150 },
	{ subject: "Loyalty", A: 98, B: 130, fullMark: 150 },
	{ subject: "Satisfaction", A: 86, B: 130, fullMark: 150 },
	{ subject: "Spend", A: 99, B: 100, fullMark: 150 },
	{ subject: "Frequency", A: 85, B: 90, fullMark: 150 },
	{ subject: "Recency", A: 65, B: 85, fullMark: 150 },
];

const CustomerSegmentation = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.6 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Customer Segmentation</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<RadarChart cx='50%' cy='50%' outerRadius='80%' data={customerSegmentationData}>
						<PolarGrid stroke='#374151' />
						<PolarAngleAxis dataKey='subject' stroke='#9CA3AF' />
						<PolarRadiusAxis angle={30} domain={[0, 150]} stroke='#9CA3AF' />
						<Radar name='Segment A' dataKey='A' stroke='#8B5CF6' fill='#8B5CF6' fillOpacity={0.6} />
						<Radar name='Segment B' dataKey='B' stroke='#10B981' fill='#10B981' fillOpacity={0.6} />
						<Legend />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
					</RadarChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default CustomerSegmentation;

```

### client\src\components\dashboard\analytics\OverviewCards.jsx
```jsx
import { motion } from "framer-motion";
import { DollarSign, Users, ShoppingBag, Eye, ArrowDownRight, ArrowUpRight } from "lucide-react";

const overviewData = [
	{ name: "Revenue", value: "$1,234,567", change: 12.5, icon: DollarSign },
	{ name: "Users", value: "45,678", change: 8.3, icon: Users },
	{ name: "Orders", value: "9,876", change: -3.2, icon: ShoppingBag },
	{ name: "Page Views", value: "1,234,567", change: 15.7, icon: Eye },
];

const OverviewCards = () => {
	return (
		<div className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'>
			{overviewData.map((item, index) => (
				<motion.div
					key={item.name}
					className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg
            rounded-xl p-6 border border-gray-700
          '
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					transition={{ delay: index * 0.1 }}
				>
					<div className='flex items-center justify-between'>
						<div>
							<h3 className='text-sm font-medium text-gray-400'>{item.name}</h3>
							<p className='mt-1 text-xl font-semibold text-gray-100'>{item.value}</p>
						</div>

						<div
							className={`
              p-3 rounded-full bg-opacity-20 ${item.change >= 0 ? "bg-green-500" : "bg-red-500"}
              `}
						>
							<item.icon className={`size-6  ${item.change >= 0 ? "text-green-500" : "text-red-500"}`} />
						</div>
					</div>
					<div
						className={`
              mt-4 flex items-center ${item.change >= 0 ? "text-green-500" : "text-red-500"}
            `}
					>
						{item.change >= 0 ? <ArrowUpRight size='20' /> : <ArrowDownRight size='20' />}
						<span className='ml-1 text-sm font-medium'>{Math.abs(item.change)}%</span>
						<span className='ml-2 text-sm text-gray-400'>vs last period</span>
					</div>
				</motion.div>
			))}
		</div>
	);
};
export default OverviewCards;

```

### client\src\components\dashboard\analytics\ProductPerformance.jsx
```jsx
import { Bar, BarChart, CartesianGrid, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from "recharts";
import { motion } from "framer-motion";

const productPerformanceData = [
	{ name: "Product A", sales: 4000, revenue: 2400, profit: 2400 },
	{ name: "Product B", sales: 3000, revenue: 1398, profit: 2210 },
	{ name: "Product C", sales: 2000, revenue: 9800, profit: 2290 },
	{ name: "Product D", sales: 2780, revenue: 3908, profit: 2000 },
	{ name: "Product E", sales: 1890, revenue: 4800, profit: 2181 },
];

const ProductPerformance = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.4 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Product Performance</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<BarChart data={productPerformanceData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='name' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Bar dataKey='sales' fill='#8B5CF6' />
						<Bar dataKey='revenue' fill='#10B981' />
						<Bar dataKey='profit' fill='#F59E0B' />
					</BarChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default ProductPerformance;

```

### client\src\components\dashboard\analytics\RevenueChart.jsx
```jsx
import { useState } from "react";
import { motion } from "framer-motion";
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from "recharts";

const revenueData = [
	{ month: "Jan", revenue: 4000, target: 3800 },
	{ month: "Feb", revenue: 3000, target: 3200 },
	{ month: "Mar", revenue: 5000, target: 4500 },
	{ month: "Apr", revenue: 4500, target: 4200 },
	{ month: "May", revenue: 6000, target: 5500 },
	{ month: "Jun", revenue: 5500, target: 5800 },
	{ month: "Jul", revenue: 7000, target: 6500 },
];

const RevenueChart = () => {
	const [selectedTimeRange, setSelectedTimeRange] = useState("This Month");

	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700 mb-8'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.2 }}
		>
			<div className='flex justify-between items-center mb-6'>
				<h2 className='text-xl font-semibold text-gray-100'>Revenue vs Target</h2>
				<select
					className='bg-gray-700 text-white rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500'
					value={selectedTimeRange}
					onChange={(e) => setSelectedTimeRange(e.target.value)}
				>
					<option>This Week</option>
					<option>This Month</option>
					<option>This Quarter</option>
					<option>This Year</option>
				</select>
			</div>

			<div style={{ width: "100%", height: 400 }}>
				<ResponsiveContainer>
					<AreaChart data={revenueData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='month' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{ backgroundColor: "rgba(31, 41, 55, 0.8)", borderColor: "#4B5563" }}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Area type='monotone' dataKey='revenue' stroke='#8B5CF6' fill='#8B5CF6' fillOpacity={0.3} />
						<Area type='monotone' dataKey='target' stroke='#10B981' fill='#10B981' fillOpacity={0.3} />
					</AreaChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default RevenueChart;

```

### client\src\components\dashboard\analytics\UserRetention.jsx
```jsx
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from "recharts";
import { motion } from "framer-motion";

const userRetentionData = [
	{ name: "Week 1", retention: 100 },
	{ name: "Week 2", retention: 75 },
	{ name: "Week 3", retention: 60 },
	{ name: "Week 4", retention: 50 },
	{ name: "Week 5", retention: 45 },
	{ name: "Week 6", retention: 40 },
	{ name: "Week 7", retention: 38 },
	{ name: "Week 8", retention: 35 },
];

const UserRetention = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.5 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>User Retention</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<LineChart data={userRetentionData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='name' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Line type='monotone' dataKey='retention' stroke='#8B5CF6' strokeWidth={2} />
					</LineChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default UserRetention;

```

### client\src\components\dashboard\common\Header.jsx
```jsx
const Header = ({ title }) => {
	return (
		<header className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg border-b border-gray-700'>
			<div className='max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8'>
				<h1 className='text-2xl font-semibold text-gray-100'>{title}</h1>
			</div>
		</header>
	);
};
export default Header;

```

### client\src\components\dashboard\common\Sidebar.jsx
```jsx
import { BarChart2, DollarSign, Menu, Settings, Hotel, ShoppingCart, TrendingUp, Users } from "lucide-react";
import { useState } from "react";
import { AnimatePresence, motion } from "framer-motion";
import { Link, useNavigate } from "react-router-dom";



const SIDEBAR_ITEMS = [
	{
		name: "Tá»•ng quan",
		icon: BarChart2,
		color: "#6366f1",
		href: "/overview",
		roles: ["Admin", "HotelManager"], // Cho phÃ©p cáº£ Admin vÃ  HotelManager
	},
	{
		name: "KhÃ¡ch sáº¡n",
		icon: Hotel,
		color: "#8B5CF6",
		href: "/hotelmanager",
		roles: ["Admin", "HotelManager"],
	},
	{
		name: "NgÆ°á»i dÃ¹ng",
		icon: Users,
		color: "#EC4899",
		href: "/users",
		roles: ["Admin"], // Chá»‰ cho phÃ©p Admin
	},
	{
		name: "Doanh Thu",
		icon: DollarSign,
		color: "#10B981",
		href: "/sales",
		roles: ["Admin", "HotelManager"], 
	},
	{
		name: "Äáº·t phÃ²ng",
		icon: ShoppingCart,
		color: "#F59E0B",
		href: "/orders",
		roles: ["HotelManager"], 
	},
	{
		name: "Analytics",
		icon: TrendingUp,
		color: "#3B82F6",
		href: "/analytics",
		roles: ["", ""], 
	},
	{
		name: "Settings",
		icon: Settings,
		color: "#6EE7B7",
		href: "/settings",
		roles: ["", ""], 
	},
];

const Sidebar = ({ userRole }) => {
	const [isSidebarOpen, setIsSidebarOpen] = useState(true);
	const navigate = useNavigate();



const handleHome = () => {
	navigate("/");
  };

	return (
		<motion.div
			className={`relative z-10 transition-all duration-300 ease-in-out flex-shrink-0 ${
				isSidebarOpen ? "w-64" : "w-20"
			}`}
			animate={{ width: isSidebarOpen ? 256 : 80 }}
		>
			<div className='h-full bg-gray-800 bg-opacity-50 backdrop-blur-md p-4 flex flex-col border-r border-gray-700'>
				<motion.button
					whileHover={{ scale: 1.1 }}
					whileTap={{ scale: 0.9 }}
					onClick={() => setIsSidebarOpen(!isSidebarOpen)}
					className='p-2 rounded-full hover:bg-gray-700 transition-colors max-w-fit'
				>
					<Menu size={24} />
				</motion.button>

				<nav className='mt-8 flex-grow'>
					{SIDEBAR_ITEMS.filter(item => item.roles.includes(userRole)).map((item) => (
						<Link key={item.href} to={item.href}>
							<motion.div className='flex items-center p-4 text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors mb-2'>
								<item.icon size={20} style={{ color: item.color, minWidth: "20px" }} />
								<AnimatePresence>
									{isSidebarOpen && (
										<motion.span
											className='ml-4 whitespace-nowrap'
											initial={{ opacity: 0, width: 0 }}
											animate={{ opacity: 1, width: "auto" }}
											exit={{ opacity: 0, width: 0 }}
											transition={{ duration: 0.2, delay: 0.3 }}
										>
											{item.name}
										</motion.span>
									)}
								</AnimatePresence>
							</motion.div>
						</Link>
					))}
				</nav>
				{/* Logo á»Ÿ cuá»‘i sidebar */}
				<div className="mt-auto p-6 flex justify-center">
					<img src="/LogoCheckInnReal.png" onClick={handleHome} alt="CheckInn Logo" className="h-16 w-fit" />
				</div>
			
			</div>
		</motion.div>
	);
};
export default Sidebar;

```

### client\src\components\dashboard\common\StatCard.jsx
```jsx
import { motion } from "framer-motion";

const StatCard = ({ name, icon: Icon, value, color }) => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md overflow-hidden shadow-lg rounded-xl border border-gray-700'
			whileHover={{ y: -5, boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)" }}
		>
			<div className='px-4 py-5 sm:p-6'>
				<span className='flex items-center text-sm font-medium text-gray-400'>
					<Icon size={20} className='mr-2' style={{ color }} />
					{name}
				</span>
				<p className='mt-1 text-3xl font-semibold text-gray-100'>{value}</p>
			</div>
		</motion.div>
	);
};
export default StatCard;

```

### client\src\components\dashboard\hotelmanage\AddHotelModal.jsx
```jsx
// src/components/AddHotelModal.jsx

import React, { useState } from 'react';
import { Modal, Input, Button, notification, Form, Rate, Upload } from 'antd';
import { UploadOutlined } from '@ant-design/icons';
import axios from 'axios';

const AddHotelModal = ({ visible, onCancel, onAddHotel }) => {
  const [loading, setLoading] = useState(false);
  const [fileList, setFileList] = useState([]);
  const [addHotelForm] = Form.useForm();

  // Xá»­ lÃ½ khi ngÆ°á»i dÃ¹ng táº£i áº£nh lÃªn
  const handleUpload = ({ fileList }) => {
    setFileList(fileList);
  };

  const handleAddHotel = async (values) => {
    setLoading(true);
    const formData = new FormData();
    formData.append('name', values.name);
    formData.append('location', values.location);
    formData.append('description', values.description);
    formData.append('stars', values.stars);

    // ÄÃ­nh kÃ¨m cÃ¡c file áº£nh
    fileList.forEach(file => {
      formData.append('imagehotel', file.originFileObj);
    });

    try {
      const response = await axios.post('/api/hotel/addhotel', formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
        withCredentials: true,
      });

      if (response.status === 201) {
        notification.success({
          message: "ThÃªm KhÃ¡ch Sáº¡n ThÃ nh CÃ´ng.",
          description: "Vui lÃ²ng thÃªm phÃ²ng cho khÃ¡ch sáº¡n.",
        });        
        onAddHotel(); // Gá»i callback Ä‘á»ƒ refresh danh sÃ¡ch khÃ¡ch sáº¡n
        onCancel(); // ÄÃ³ng modal
      }
    } catch (error) {
      notification.error({
        message: "ThÃªm KhÃ¡ch Sáº¡n Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
    } finally {
      setLoading(false);
    }
  };

  return (
    <Modal
      title="ThÃªm KhÃ¡ch Sáº¡n"
      visible={visible}
      onCancel={onCancel}
      footer={null}
    >
      <Form form={addHotelForm} layout="vertical" onFinish={handleAddHotel}>
        <Form.Item
          name="name"
          label="TÃªn khÃ¡ch sáº¡n"
          rules={[{ required: true, message: 'Vui lÃ²ng nháº­p tÃªn khÃ¡ch sáº¡n!' }]}
        >
          <Input />
        </Form.Item>
        <Form.Item
          name="location"
          label="Vá»‹ trÃ­"
          rules={[{ required: true, message: 'Vui lÃ²ng nháº­p vá»‹ trÃ­!' }]}
        >
          <Input />
        </Form.Item>
        <Form.Item name="description" label="MÃ´ táº£">
          <Input.TextArea rows={4} />
        </Form.Item>
        <Form.Item
          name="stars"
          label="Xáº¿p Háº¡ng"
          rules={[{ required: true, message: 'Vui lÃ²ng chá»n xáº¿p háº¡ng!' }]}
        >
          <Rate allowHalf />
        </Form.Item>
        <Form.Item label="HÃ¬nh áº£nh">
          <Upload
            listType="picture"
            fileList={fileList}
            onChange={handleUpload}
            beforeUpload={() => false} // Ngá»«ng tá»± Ä‘á»™ng táº£i lÃªn
            multiple
          >
            <Button icon={<UploadOutlined />}>Táº£i lÃªn</Button>
          </Upload>
        </Form.Item>
        <Form.Item>
          <Button type="primary" htmlType="submit" loading={loading}>
            ThÃªm KhÃ¡ch Sáº¡n
          </Button>
        </Form.Item>
      </Form>
    </Modal>
  );
};

export default AddHotelModal;

```

### client\src\components\dashboard\hotelmanage\AddRoom.jsx
```jsx
/* eslint-disable no-unused-vars */
import React, { useState } from "react";
import axios from "axios";
import {
  Form,
  Button,
  notification,
  InputNumber,
  Switch,
  Upload,
  Select,
} from "antd";
import { UploadOutlined } from "@ant-design/icons";

const { Option } = Select; // Khai bÃ¡o biáº¿n Option Ä‘á»ƒ sá»­ dá»¥ng trong Select

const AddRoom = ({ hotelId, onClose }) => {
  const [type, setType] = useState("");
  const [price, setPrice] = useState(0);
  const [availability, setAvailability] = useState(true);
  const [images, setImages] = useState([]); // Äá»•i thÃ nh images cho nháº¥t quÃ¡n
  const [loading, setLoading] = useState(false); // Tráº¡ng thÃ¡i loading

  const handleAddRoom = async () => {
    setLoading(true); // Báº¯t Ä‘áº§u loading
    const formData = new FormData();
    formData.append("type", type);
    formData.append("price", price);
    formData.append("availability", availability);

    // ThÃªm tá»«ng áº£nh vÃ o formData vá»›i tÃªn trÆ°á»ng 'imageroom'
    images.forEach((file) => {
      formData.append("imageroom", file);
    });

    try {
      const response = await axios.post(
        `/api/room/${hotelId}/add-room`,
        formData,
        {
          headers: {
            "Content-Type": "multipart/form-data",
          },
          withCredentials: true,
        }
      );

      notification.success({
        message: "ThÃªm PhÃ²ng ThÃ nh CÃ´ng.",
      });
      onClose(); // ÄÃ³ng modal sau khi thÃªm thÃ nh cÃ´ng
    } catch (error) {
      notification.error({
        message: "ThÃªm PhÃ²ng Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
    } finally {
      setLoading(false); // Káº¿t thÃºc loading
    }
  };

  const handleFileChange = ({ fileList }) => {
    setImages(fileList.map((file) => file.originFileObj)); // LÆ°u áº£nh dÆ°á»›i dáº¡ng file gá»‘c
  };

  return (
    <div className="max-w-md mx-auto p-5">
      <h2 className="text-xl font-semibold mb-5">ThÃªm PhÃ²ng</h2>
      <Form layout="vertical" onFinish={handleAddRoom}>
        <Form.Item label="Loáº¡i PhÃ²ng" required>
          <Select
            value={type}
            onChange={(value) => setType(value)}
            placeholder="Chá»n loáº¡i phÃ²ng"
            required
          >
            <Option value="PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n">
              PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n
            </Option>
            <Option value="PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»">
              PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»
            </Option>
            <Option value="PhÃ²ng vip 1 giÆ°á»ng lá»›n">
              PhÃ²ng vip 1 giÆ°á»ng lá»›n
            </Option>
            <Option value="PhÃ²ng vip 2 giÆ°á»ng nhá»">
              PhÃ²ng vip 2 giÆ°á»ng nhá»
            </Option>
          </Select>
        </Form.Item>
        <Form.Item label="GiÃ¡ PhÃ²ng" required>
          <InputNumber
            min={0}
            value={price}
            onChange={(value) => setPrice(value)}
            className="w-full"
            placeholder="Nháº­p giÃ¡ phÃ²ng"
            required
          />
        </Form.Item>
        <Form.Item label="TÃ¬nh Tráº¡ng">
          <Switch
            checked={availability}
            onChange={(checked) => setAvailability(checked)}
            checkedChildren="CÃ³ sáºµn"
            unCheckedChildren="Háº¿t phÃ²ng"
          />
        </Form.Item>
        <Form.Item label="áº¢nh PhÃ²ng">
          <Upload
            listType="picture"
            beforeUpload={() => false} // NgÄƒn cháº·n upload tá»± Ä‘á»™ng
            onChange={handleFileChange}
          >
            <Button icon={<UploadOutlined />}>Chá»n áº£nh</Button>
          </Upload>
        </Form.Item>
        <Button type="primary" htmlType="submit" loading={loading}>
          {loading ? "Äang thÃªm phÃ²ng..." : "ThÃªm PhÃ²ng"}
        </Button>
      </Form>
    </div>
  );
};

export default AddRoom;

```

### client\src\components\dashboard\hotelmanage\EditHotelModal.jsx
```jsx
// EditHotelModal.jsx
import { useState, useEffect } from 'react';
import { Modal, Form, Input, Upload, Button, Rate, notification } from 'antd';
import axios from 'axios';
import { UploadOutlined } from '@ant-design/icons';

const EditHotelModal = ({ hotel, isVisible, onClose, onUpdate }) => {
  const [form] = Form.useForm();
  const [fileList, setFileList] = useState([]);
  const [removedImages, setRemovedImages] = useState([]);
  const [loading, setLoading] = useState(false);  // State to manage loading status

  useEffect(() => {
    if (hotel) {
      form.setFieldsValue({
        name: hotel.name,
        location: hotel.location,
        description: hotel.description,
        stars: hotel.stars,
      });
      setFileList(hotel.imagehotel.map(url => ({ uid: url, url })));
    }
  }, [hotel, form]);

  const handleUpload = ({ fileList }) => {
    setFileList(fileList);
  };

  const handleRemoveImage = async (file) => {
    if (file.uid) {
      setFileList(prev => prev.filter(item => item.uid !== file.uid));
      setRemovedImages(prev => [...prev, file.url]);

      try {
        await axios.put(`/api/hotel/${hotel._id}/remove-image`, { imageUrl: file.url }, { withCredentials: true });
      } catch (error) {
        notification.error({
          message: "XÃ³a áº£nh tháº¥t báº¡i.",
        });
      }
    }
  };

  const handleSave = async (values) => {
    const formData = new FormData();
    formData.append('name', values.name);
    formData.append('location', values.location);
    formData.append('description', values.description);
    formData.append('stars', values.stars);
    
    fileList.forEach((file) => {
      formData.append('imagehotel', file.originFileObj || file);
    });
    
    formData.append('removedImages', JSON.stringify(removedImages));

    setLoading(true);  // Start loading before the request

    try {
        await axios.put(`/api/hotel/${hotel._id}`, formData, {
          headers: {
            'Content-Type': 'multipart/form-data',
          },
          withCredentials: true,
        });
  
        notification.success({
          message: "Chá»‰nh Sá»­a KhÃ¡ch Sáº¡n ThÃ nh CÃ´ng.",
          description: "ThÃ´ng tin chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c lÆ°u.",
        });
        onUpdate();  // Notify the parent component to refresh the list
        onClose();  // Close the modal
      } catch (error) {
        notification.error({
          message: "Chá»‰nh Sá»­a KhÃ¡ch Sáº¡n Tháº¥t Báº¡i.",
          description: "Vui lÃ²ng thá»­ láº¡i sau.",
        });
         } finally {
        setLoading(false);  // Stop loading after the request is completed
      }
    };

  return (
    <Modal
      visible={isVisible}
      title="Chá»‰nh sá»­a khÃ¡ch sáº¡n"
      onCancel={onClose}
      footer={[
        <Button key="cancel" onClick={onClose}>
          Há»§y
        </Button>,
         <Button key="submit" type="primary" onClick={() => form.submit()} loading={loading}>
         LÆ°u
       </Button>,
      ]}
    >
      <Form form={form} onFinish={handleSave}>
        <Form.Item label="TÃªn khÃ¡ch sáº¡n" name="name" rules={[{ required: true, message: 'Vui lÃ²ng nháº­p tÃªn khÃ¡ch sáº¡n!' }]}>
          <Input />
        </Form.Item>
        <Form.Item label="Vá»‹ trÃ­" name="location" rules={[{ required: true, message: 'Vui lÃ²ng nháº­p vá»‹ trÃ­!' }]}>
          <Input />
        </Form.Item>
        <Form.Item label="MÃ´ táº£" name="description">
          <Input.TextArea rows={4} />
        </Form.Item>
        <Form.Item label="Xáº¿p háº¡ng" name="stars" rules={[{ required: true, message: 'Vui lÃ²ng chá»n xáº¿p háº¡ng!' }]}>
          <Rate />
        </Form.Item>
        <Form.Item label="áº¢nh" valuePropName="fileList">
          <Upload
            name="imagehotel"
            action="/upload"
            listType="picture-card"
            fileList={fileList}
            onChange={handleUpload}
            onRemove={handleRemoveImage}
            accept="image/*"
          >
            <div>
              <UploadOutlined />
              <div>Chá»n áº£nh</div>
            </div>
          </Upload>
        </Form.Item>
      </Form>
    </Modal>
  );
};

export default EditHotelModal;

```

### client\src\components\dashboard\hotelmanage\EditRoomDrawer.jsx
```jsx
import React, { useEffect, useState, useCallback } from "react";
import {
  Drawer,
  Button,
  Form,
  Input,
  Checkbox,
  Upload,
  message,
  Select,
  Spin,
  notification,
} from "antd";
import axios from "axios";

const { Option } = Select; // Khai bÃ¡o biáº¿n Option Ä‘á»ƒ sá»­ dá»¥ng trong Select

const EditRoomDrawer = ({ visible, onClose, roomId, fetchRooms }) => {
  const [form] = Form.useForm();
  const [fileList, setFileList] = useState([]);
  const [isUpdating, setIsUpdating] = useState(false);
  const [removedImages, setRemovedImages] = useState([]);
  const [roomData, setRoomData] = useState(null);

  // HÃ m láº¥y thÃ´ng tin phÃ²ng Ä‘á»ƒ hiá»ƒn thá»‹
  const fetchRoomData = useCallback(async () => {
    if (!roomId) {
      message.error("ID phÃ²ng khÃ´ng há»£p lá»‡.");
      return;
    }

    try {
      const response = await axios.get(`/api/room/${roomId}`);
      setRoomData(response.data);
      form.setFieldsValue({
        type: response.data.type,
        price: response.data.price,
        availability: response.data.availability,
      });
      setFileList(
        (response.data.imageroom || []).map((url, index) => ({
          uid: index.toString(),
          name: `Image-${index}`,
          status: "done",
          url,
        }))
      );
      setRemovedImages([]);
    } catch (error) {
      console.error("Error fetching room data:", error);
      notification.error({
        message: "Lá»—i khi táº£i thÃ´ng tin phÃ²ng.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
    }
  }, [roomId, form]); // Äáº£m báº£o ráº±ng hÃ m fetchRoomData chá»‰ thay Ä‘á»•i khi roomId hoáº·c form thay Ä‘á»•i.

  useEffect(() => {
    if (roomId && visible) {
      fetchRoomData();
    }
  }, [roomId, visible, fetchRoomData]); // ThÃªm fetchRoomData vÃ o dependency array

  // HÃ m xá»­ lÃ½ lÆ°u thÃ´ng tin phÃ²ng
  const handleSave = async (values) => {
    setIsUpdating(true);
    try {
      const formData = new FormData();
      formData.append("type", values.type);
      formData.append("price", values.price);
      formData.append("availability", values.availability);

      fileList.forEach((file) => {
        formData.append("imageroom", file);
      });

      formData.append("removedImages", JSON.stringify(removedImages));

      await axios.put(`/api/room/${roomId}`, formData, {
        headers: {
          "Content-Type": "multipart/form-data",
        },
        withCredentials: true,
      });

      notification.success({
        message: "Cáº­p Nháº­t ThÃ´ng Tin PhÃ²ng ThÃ nh CÃ´ng.",
        description: "ThÃ´ng tin cáº­p nháº­t Ä‘Ã£ Ä‘Æ°á»£c lÆ°u.",
      });
      fetchRooms();
      onClose(); // ÄÃ³ng drawer sau khi cáº­p nháº­t thÃ nh cÃ´ng
    } catch (error) {
      notification.error({
        message: "Cáº­p Nháº­t ThÃ´ng Tin PhÃ²ng Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
    } finally {
      setIsUpdating(false);
    }
  };

  // Chá»‰nh sá»­a vÃ  xÃ³a áº£nh
  const handleImageChange = ({ fileList: newFileList }) => {
    setFileList(newFileList.map((file) => file.originFileObj || file));
  };

  const handleRemoveImage = async (file) => {
    setFileList((prev) => prev.filter((item) => item.uid !== file.uid));
    setRemovedImages((prev) => [...prev, file.url]);

    try {
      await axios.put(
        `/api/room/${roomId}/remove-image`,
        { imageUrl: file.url },
        { withCredentials: true }
      );
    } catch (error) {
      message.error("ÄÃ£ xáº£y ra lá»—i khi xÃ³a hÃ¬nh áº£nh");
    }
  };

  const uploadButton = (
    <div>
      <Button>Chá»n hÃ¬nh áº£nh</Button>
    </div>
  );

  return (
    <Drawer
      title="Chá»‰nh sá»­a thÃ´ng tin phÃ²ng"
      visible={visible}
      onClose={onClose}
      footer={null}
      width={520}
    >
      {roomData ? (
        <Form form={form} onFinish={handleSave}>
          <Form.Item label="Loáº¡i PhÃ²ng" name="type" required>
            <Select placeholder="Chá»n loáº¡i phÃ²ng" required>
              <Option value="PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n">
                PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n
              </Option>
              <Option value="PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»">
                PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»
              </Option>
              <Option value="PhÃ²ng vip 1 giÆ°á»ng lá»›n">
                PhÃ²ng vip 1 giÆ°á»ng lá»›n
              </Option>
              <Option value="PhÃ²ng vip 2 giÆ°á»ng nhá»">
                PhÃ²ng vip 2 giÆ°á»ng nhá»
              </Option>
            </Select>
          </Form.Item>
          <Form.Item
            label="GiÃ¡"
            name="price"
            rules={[
              { required: true, message: "Vui lÃ²ng nháº­p giÃ¡ phÃ²ng" },
              {
                validator: (_, value) =>
                  value >= 0
                    ? Promise.resolve()
                    : Promise.reject("Tiá»n khÃ´ng Ä‘Æ°á»£c nhá» hÆ¡n 0"),
              },
            ]}
          >
            <Input type="number" min={0} />
          </Form.Item>
          <Form.Item
            label="TÃ¬nh tráº¡ng"
            name="availability"
            valuePropName="checked"
          >
            <Checkbox>CÃ²n phÃ²ng</Checkbox>
          </Form.Item>
          <Form.Item label="HÃ¬nh áº£nh phÃ²ng">
            <Upload
              listType="picture"
              fileList={fileList}
              beforeUpload={() => false} // NgÄƒn khÃ´ng cho tá»± Ä‘á»™ng upload
              onChange={handleImageChange}
              onRemove={handleRemoveImage}
            >
              {uploadButton}
            </Upload>
          </Form.Item>
          <Form.Item>
            <Button type="primary" htmlType="submit" loading={isUpdating}>
              {isUpdating ? "Äang lÆ°u..." : "LÆ°u"}
            </Button>
          </Form.Item>
        </Form>
      ) : (
        <Spin tip="Äang táº£i thÃ´ng tin phÃ²ng..." />
      )}
    </Drawer>
  );
};

export default EditRoomDrawer;

```

### client\src\components\dashboard\hotelmanage\HotelTable.jsx
```jsx
/* eslint-disable no-unused-vars */
import { useEffect, useState, useCallback } from 'react';
import axios from 'axios';
import { motion } from 'framer-motion';
import { Edit, Trash2 } from 'lucide-react';
import { Modal, Input, Button, Form, notification } from 'antd';
import EditHotelModal from './EditHotelModal';


const HotelTable = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [hotels, setHotels] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [hotelsPerPage] = useState(15);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [currentHotel, setCurrentHotel] = useState(null);
  const [fileList, setFileList] = useState([]);
  const [password, setPassword] = useState('');
  const [form] = Form.useForm();
  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);
  const [setIsAdmin] = useState(false); // Kiá»ƒm tra ngÆ°á»i dÃ¹ng cÃ³ pháº£i admin khÃ´ng

  // Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng Ä‘á»ƒ kiá»ƒm tra quyá»n admin
  useEffect(() => {
    const fetchUserInfo = async () => {
      try {
        const response = await axios.get('/api/profile/me', {
          withCredentials: true, // Náº¿u cáº§n gá»­i cookie Ä‘á»ƒ xÃ¡c thá»±c
        });
        if (response.data && response.data.role) {
          setIsAdmin(response.data.role === 'Admin');
        }
      } catch (error) {
        console.error('Lá»—i khi láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng:', error);
      }
    };

    fetchUserInfo();
  }, []);


  const fetchHotels = useCallback(async () => {
    try {
      const response = await axios.get('/api/hotel', { withCredentials: true });
      setHotels(response.data);
    } catch (error) {
      console.error('Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n:', error);
    }
  }, []);

  useEffect(() => {
    fetchHotels();
  }, [fetchHotels]);

  // Láº¥y danh sÃ¡ch khÃ¡ch sáº¡n tá»« API
  const fetchHotel = useCallback(async () => {
    try {
      const response = await axios.get('/api/hotel');
      setHotels(response.data);
    } catch (error) {
      console.error('Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n:', error);
    }
  }, []);

  useEffect(() => {
    fetchHotel();
  }, [fetchHotel]);

  // Hiá»ƒn thá»‹ modal Ä‘á»ƒ chá»‰nh sá»­a khÃ¡ch sáº¡n
  const showModal = (hotel) => {
    setCurrentHotel(hotel);
    setFileList(hotel.imagehotel.map(url => ({ uid: url, url }))); // Hiá»ƒn thá»‹ hÃ¬nh áº£nh hiá»‡n cÃ³
    form.setFieldsValue({
      name: hotel.name,
      location: hotel.location,
      description: hotel.description,
    });
    setIsModalVisible(true);
  };

  //cáº­p nháº­t khÃ¡ch sáº¡n
  const handleUpdateHotel = () => {
    fetchHotels();  // Refresh the hotel list after updating
  };
  

  

  // Hiá»ƒn thá»‹ modal Ä‘á»ƒ xÃ³a khÃ¡ch sáº¡n
  const showDeleteModal = (hotel) => {
    setCurrentHotel(hotel);
    setIsDeleteModalVisible(true);
  };



  const handleDeleteConfirm = async () => {
    try {
      await axios.delete(`/api/hotel/${currentHotel._id}`, {
        withCredentials: true,
        data: { password }, // Gá»­i máº­t kháº©u vÃ o body
      });
      notification.success({
        message: "XÃ³a KhÃ¡ch Sáº¡n ThÃ nh CÃ´ng.",
        description: "KhÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i danh sÃ¡ch.",
      });      
      setHotels(hotels.filter(hotel => hotel._id !== currentHotel._id));
    } catch (error) {
      console.error('Lá»—i khi xÃ³a khÃ¡ch sáº¡n:', error.response?.data);
      notification.error({
        message: "XÃ³a KhÃ¡ch Sáº¡n Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
      } finally {
      setIsDeleteModalVisible(false); // áº¨n modal
      setPassword(''); // Reset máº­t kháº©u
    }
  };

  // Xá»­ lÃ½ khi ngÆ°á»i dÃ¹ng nháº­p tÃ¬m kiáº¿m
  const handleSearch = (e) => {
    const term = e.target.value.toLowerCase();
    setSearchTerm(term);
    setCurrentPage(1);
  };

  // TÃ¬m kiáº¿m khÃ¡ch sáº¡n
  const filteredHotels = hotels.filter(
    (hotel) => hotel.name.toLowerCase().includes(searchTerm) || hotel.location.toLowerCase().includes(searchTerm)
  );

  // PhÃ¢n trang
  const indexOfLastHotel = currentPage * hotelsPerPage;
  const indexOfFirstHotel = indexOfLastHotel - hotelsPerPage;
  const currentHotels = filteredHotels.slice(indexOfFirstHotel, indexOfLastHotel);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  const pageNumbers = [];
  for (let i = 1; i <= Math.ceil(filteredHotels.length / hotelsPerPage); i++) {
    pageNumbers.push(i);
  }

  return (
    <motion.div
      className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700 mb-8'
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.2 }}
    >
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0">
  <h2 className="text-lg sm:text-xl font-semibold text-gray-100 text-center sm:text-left">
    Danh SÃ¡ch KhÃ¡ch Sáº¡n
  </h2>
  <div className="flex flex-col sm:flex-row sm:space-x-2 space-y-4 sm:space-y-0 items-center">
    <div className="relative w-full sm:w-auto">
      <input
        type="search"
        className="bg-gray-700 text-white placeholder-gray-400 rounded-lg pl-12 pr-4 py-2 w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500"
        onChange={handleSearch}
        value={searchTerm}
        autoComplete="off"
        placeholder="TÃ¬m kiáº¿m khÃ¡ch sáº¡n..."
      />
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
        className="lucide lucide-search absolute left-3 top-2.5 text-gray-400"
      >
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </svg>
    </div>
  </div>
</div>


      <div className='overflow-x-auto'>
        <table className='min-w-full divide-y divide-gray-700'>
          <thead>
            <tr>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>TÃªn</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Vá»‹ trÃ­</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Quáº£n lÃ½</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>HÃ nh Ä‘á»™ng</th>
            </tr>
          </thead>

          <tbody className='divide-y divide-gray-700'>
            {currentHotels.map((hotel) => (
              <tr key={hotel._id}>
                <td className='px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-100'>{hotel.name}</td>
                <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-300'>{hotel.location}</td>
                <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-300'>{hotel.manager.name}</td>
                <td className='px-6 py-4 whitespace-nowrap text-sm font-medium flex space-x-4'>
                  <button
                    className='text-blue-500 hover:text-blue-700'
                    onClick={() => showModal(hotel)}
                  >
                    <Edit size={18} />
                  </button>
                  <button
                    className='text-red-500 hover:text-red-700'
                    onClick={() => showDeleteModal(hotel)}
                  >
                    <Trash2 size={18} />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <div className='flex justify-center mt-6'>
        <ul className='pagination'>
          {pageNumbers.map(number => (
            <li key={number} className='inline-block mx-1'>
              <button
                onClick={() => paginate(number)}
                className={`px-3 py-2 rounded-lg ${currentPage === number ? 'bg-blue-500 text-white' : 'bg-gray-700 text-gray-300'}`}
              >
                {number}
              </button>
            </li>
          ))}
        </ul>
      </div>

      {/* Modal for Edit Hotel */}
      <EditHotelModal
          hotel={currentHotel}
          isVisible={isModalVisible}
          onClose={() => setIsModalVisible(false)}
          onUpdate={handleUpdateHotel}
        />

      {/* Delete Confirmation Modal */}
      <Modal
        title="XÃ¡c nháº­n xÃ³a"
        visible={isDeleteModalVisible}
        onCancel={() => setIsDeleteModalVisible(false)}
        footer={null}
      >
        <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a khÃ¡ch sáº¡n nÃ y khÃ´ng?</p>
        <Input.Password
          placeholder="Nháº­p máº­t kháº©u Ä‘á»ƒ xÃ¡c nháº­n"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />
        <div className="flex justify-end mt-4">
          <Button type="primary" onClick={handleDeleteConfirm}>
            XÃ³a
          </Button>
          <Button onClick={() => setIsDeleteModalVisible(false)} className="ml-2">
            Há»§y
          </Button>
        </div>
      </Modal>


    </motion.div>
  );
};

export default HotelTable;

```

### client\src\components\dashboard\hotelmanage\MyHotelTable.jsx
```jsx
/* eslint-disable no-unused-vars */
import { useEffect, useState, useCallback } from 'react';
import axios from 'axios';
import { motion } from 'framer-motion';
import { Edit, Trash2, PlusCircle, Eye } from 'lucide-react';
import { Modal, Input, Button, Form,Rate, notification } from 'antd';
import RoomListDrawer from './RoomListDrawer'; // Import component
import EditHotelModal from './EditHotelModal';
import AddHotelModal from './AddHotelModal'; // Import AddHotelModal



const MyHotelTable = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [hotels, setHotels] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [hotelsPerPage] = useState(15);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [currentHotel, setCurrentHotel] = useState(null);
  const [fileList, setFileList] = useState([]);
  const [form] = Form.useForm();
  const [isAddModalVisible, setIsAddModalVisible] = useState(false);
  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);
  const [password, setPassword] = useState('');
  const [selectedHotelRooms, setSelectedHotelRooms] = useState([]);
  const [isModalRoomVisible, setIsModalRoomVisible] = useState(false);




//load dá»¯ liá»‡u
  const fetchHotels = useCallback(async () => {
    try {
      const response = await axios.get('/api/hotel/myhotels', { withCredentials: true });
      setHotels(response.data);
    } catch (error) {
      console.error('Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n:', error);
    }
  }, []);

  useEffect(() => {
    fetchHotels();
  }, [fetchHotels]);
  

//hiá»ƒn thá»‹ modal
  const showModal = (hotel) => {
    setCurrentHotel(hotel);
    setFileList(hotel.imagehotel.map(url => ({ uid: url, url })));
    form.setFieldsValue({
      name: hotel.name,
      location: hotel.location,
      description: hotel.description,
      stars: hotel.stars,
    });
    setIsModalVisible(true);
  };

//cáº­p nháº­t khÃ¡ch sáº¡n
  const handleUpdateHotel = () => {
    fetchHotels();  // Refresh the hotel list after updating
  };

//thÃªm khÃ¡ch sáº¡n
  const handleAddHotel = () => {
    fetchHotels(); // Refresh the hotel list after adding a hotel
  };

  
//xem modal xÃ³a khÃ¡ch sáº¡n
  const showDeleteModal = (hotel) => {
    setCurrentHotel(hotel);
    setIsDeleteModalVisible(true);
  };


  //sá»± kiá»‡n xÃ³a khÃ¡ch sáº¡n
  const handleDeleteConfirm = async () => {
    try {
      await axios.delete(`/api/hotel/${currentHotel._id}`, {
        withCredentials: true,
        data: { password },
      });
      notification.success({
        message: "XÃ³a KhÃ¡ch Sáº¡n ThÃ nh CÃ´ng.",
        description: "KhÃ¡ch sáº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i danh sÃ¡ch.",
      });
        setHotels(hotels.filter(hotel => hotel._id !== currentHotel._id));
      fetchHotels();
    } catch (error) {
      notification.error({
        message: "XÃ³a KhÃ¡ch Sáº¡n Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });    } finally {
      setIsDeleteModalVisible(false);
      setPassword('');
    }
  };

  //tÃ¬m kiáº¿m
  const handleSearch = (e) => {
    const term = e.target.value.toLowerCase();
    setSearchTerm(term);
    setCurrentPage(1);
  };



  // Xem danh sÃ¡ch phÃ²ng
  const handleViewRooms = (hotelId) => {
    setSelectedHotelRooms(hotelId);
    setIsModalRoomVisible(true);
};

// ÄÃ³ng danh sÃ¡ch phÃ²ng
  const handleCloseModal = () => {
    setIsModalRoomVisible(false);
    setSelectedHotelRooms([]);
  };

  
  const filteredHotels = hotels.filter(
    (hotel) => hotel.name.toLowerCase().includes(searchTerm) || hotel.location.toLowerCase().includes(searchTerm)
  );

  const indexOfLastHotel = currentPage * hotelsPerPage;
  const indexOfFirstHotel = indexOfLastHotel - hotelsPerPage;
  const currentHotels = filteredHotels.slice(indexOfFirstHotel, indexOfLastHotel);

  const paginate = (pageNumber) => setCurrentPage(pageNumber);

  const pageNumbers = [];
  for (let i = 1; i <= Math.ceil(filteredHotels.length / hotelsPerPage); i++) {
    pageNumbers.push(i);
  }

  return (
    <motion.div
      className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700 mb-8'
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.2 }}
    >
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0">
  <h2 className="text-lg sm:text-xl font-semibold text-gray-100 text-center sm:text-left">
    Danh SÃ¡ch KhÃ¡ch Sáº¡n
  </h2>
  <div className="flex flex-col sm:flex-row sm:space-x-2 space-y-4 sm:space-y-0 items-center">
    <div className="relative w-full sm:w-auto">
      <input
        type="search"
        className="bg-gray-700 text-white placeholder-gray-400 rounded-lg pl-12 pr-4 py-2 w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500"
        onChange={handleSearch}
        value={searchTerm}
        autoComplete="off"
        placeholder="TÃ¬m kiáº¿m khÃ¡ch sáº¡n..."
      />
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
        className="lucide lucide-search absolute left-3 top-2.5 text-gray-400"
      >
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </svg>
    </div>
    <button
      className="text-green-500 hover:text-green-700 flex items-center justify-center"
      onClick={() => setIsAddModalVisible(true)}
    >
      <PlusCircle size={24} />
    </button>
  </div>
</div>


      <div className='overflow-x-auto'>
        <table className='min-w-full divide-y divide-gray-700'>
          <thead>
            <tr>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>TÃªn</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Vá»‹ trÃ­</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Quáº£n lÃ½</th>
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Xáº¿p Háº¡ng</th>              
              <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>HÃ nh Ä‘á»™ng</th>

            </tr>
          </thead>

          <tbody className='divide-y divide-gray-700'>
            {currentHotels.map((hotel) => (
              <tr key={hotel._id}>
                <td className='px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-100'>{hotel.name}</td>
                <td className='px-2 py-2 whitespace-nowrap text-sm text-gray-300' style={{ maxWidth: '150px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>
                {hotel.location}
                </td>
                <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-300'>{hotel.manager.name}</td>
                <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-300'>
                <Rate value={hotel.stars} disabled style={{ fontSize: '18px' }} />
                </td>
               
                <td className='px-6 py-4 whitespace-nowrap text-sm text-gray-300'>
                <button onClick={() => handleViewRooms(hotel._id)} className='text-blue-500 hover:text-blue-700 mr-2'>
                <Eye size={18} />
                </button>

                  <button onClick={() => showModal(hotel)} className='text-yellow-500 hover:text-yellow-700 mr-2'>
                    <Edit size={18} />
                  </button>
                  <button onClick={() => showDeleteModal(hotel)} className='text-red-500 hover:text-red-700'>
                    <Trash2 size={18} />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>

        {pageNumbers.length > 1 && (
          <nav className='mt-4'>
            <ul className='flex justify-center'>
              {pageNumbers.map((number) => (
                <li key={number} className='mx-1'>
                  <button
                    className={`px-3 py-1 rounded-md ${
                      currentPage === number ? 'bg-blue-500 text-white' : 'bg-gray-700 text-gray-300'
                    }`}
                    onClick={() => paginate(number)}
                  >
                    {number}
                  </button>
                </li>
              ))}
            </ul>
          </nav>
        )}
      </div>
      
      {/* RoomListModal to show rooms of selected hotel */}
      <RoomListDrawer
        hotelId={selectedHotelRooms}
        visible={isModalRoomVisible}
        onClose={handleCloseModal}
      />

      {/* Modal for Edit Hotel */}
      <EditHotelModal
          hotel={currentHotel}
          isVisible={isModalVisible}
          onClose={() => setIsModalVisible(false)}
          onUpdate={handleUpdateHotel}
        />

      
     {/* Modal thÃªm khÃ¡ch sáº¡n */}
     <AddHotelModal
        visible={isAddModalVisible}
        onCancel={() => setIsAddModalVisible(false)}
        onAddHotel={handleAddHotel} // Gá»i láº¡i hÃ m refresh sau khi thÃªm khÃ¡ch sáº¡n
      />



      {/* Delete Confirmation Modal */}
      <Modal
        title="XÃ¡c nháº­n xÃ³a"
        visible={isDeleteModalVisible}
        onCancel={() => setIsDeleteModalVisible(false)}
        footer={null}
      >
        <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a khÃ¡ch sáº¡n nÃ y khÃ´ng?</p>
        <Input.Password
          placeholder="Nháº­p máº­t kháº©u Ä‘á»ƒ xÃ¡c nháº­n"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />
        <div className="flex justify-end mt-4">
          <Button type="primary" onClick={handleDeleteConfirm}>
            XÃ³a
          </Button>
          <Button onClick={() => setIsDeleteModalVisible(false)} className="ml-2">
            Há»§y
          </Button>
        </div>
      </Modal>
    </motion.div>
  );
};

export default MyHotelTable;

```

### client\src\components\dashboard\hotelmanage\RoomListDrawer.jsx
```jsx
import React, { useState, useEffect, useCallback } from "react";
import {
  Modal,
  Drawer,
  Button,
  List,
  Image,
  Input,
  Spin,
  Typography,
  Pagination,
  notification,
} from "antd";
import {
  SearchOutlined,
  PlusOutlined,
  EditOutlined,
  DeleteOutlined,
} from "@ant-design/icons";
import axios from "axios";
import AddRoom from "./AddRoom"; // Nháº­p AddRoom
import EditRoomDrawer from "./EditRoomDrawer";

const { Text } = Typography;

const RoomListDrawer = ({ hotelId, visible, onClose }) => {
  const [rooms, setRooms] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");
  const [isAddRoomModalVisible, setIsAddRoomModalVisible] = useState(false);
  const [isEditRoomDrawerVisible, setIsEditRoomDrawerVisible] = useState(false);
  const [selectedRoomId, setSelectedRoomId] = useState(null);
  const [currentPage, setCurrentPage] = useState(1);
  const [roomsPerPage] = useState(10);

  const fetchRooms = useCallback(async () => {
    setLoading(true);
    try {
      const response = await axios.get(`/api/room/${hotelId}/rooms`);
      if (response.data.length === 0) {
        setRooms([]);
      } else {
        setRooms(response.data);
      }
    } catch (error) {
      console.error("Error fetching rooms:", error);
    } finally {
      setLoading(false);
    }
  }, [hotelId]);

  useEffect(() => {
    if (hotelId && visible) {
      fetchRooms();
    }
  }, [hotelId, visible, fetchRooms]);

  const filteredRooms = rooms.filter((room) =>
    room.type.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const indexOfLastRoom = currentPage * roomsPerPage;
  const indexOfFirstRoom = indexOfLastRoom - roomsPerPage;
  const currentRooms = filteredRooms.slice(indexOfFirstRoom, indexOfLastRoom);

  //thÃªm phÃ²ng
  const handleAddRoom = () => {
    setIsAddRoomModalVisible(true);
  };

  const handleAddRoomModalClose = () => {
    setIsAddRoomModalVisible(false);
    fetchRooms();
  };

  //chá»‰nh sá»­a phÃ²ng
  const handleEditRoom = (roomId) => {
    setSelectedRoomId(roomId);
    setIsEditRoomDrawerVisible(true);
  };

  // HÃ m xÃ¡c nháº­n xÃ³a phÃ²ng
  const confirmDeleteRoom = (roomId) => {
    Modal.confirm({
      title: "XÃ¡c nháº­n xÃ³a",
      content: "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a phÃ²ng nÃ y?",
      okText: "CÃ³",
      okType: "danger",
      cancelText: "KhÃ´ng",
      onOk: () => handleDeleteRoom(roomId), // Gá»i hÃ m xÃ³a phÃ²ng náº¿u ngÆ°á»i dÃ¹ng xÃ¡c nháº­n
    });
  };
  // HÃ m xÃ³a phÃ²ng
  const handleDeleteRoom = async (roomId) => {
    try {
      await axios.delete(`/api/room/${roomId}`, { withCredentials: true });
      notification.success({
        message: "XÃ³a PhÃ²ng ThÃ nh CÃ´ng.",
        description: "PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i danh sÃ¡ch.",
      });
      fetchRooms();
    } catch (error) {
      notification.error({
        message: "XÃ³a PhÃ²ng Tháº¥t Báº¡i.",
        description: "Vui lÃ²ng thá»­ láº¡i sau.",
      });
    }
  };

  return (
    <Drawer
      title="Danh sÃ¡ch phÃ²ng"
      visible={visible}
      onClose={onClose}
      width={720}
    >
      {loading ? (
        <Spin tip="Äang táº£i danh sÃ¡ch phÃ²ng..." />
      ) : (
        <>
          <div
            style={{
              display: "flex",
              alignItems: "center",
              marginBottom: "16px",
            }}
          >
            <Input
              placeholder="TÃ¬m kiáº¿m phÃ²ng..."
              prefix={<SearchOutlined />}
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              style={{ borderRadius: "8px", flex: 1, marginRight: "8px" }}
            />
            <Button
              type="primary"
              icon={<PlusOutlined />}
              onClick={handleAddRoom}
            />
          </div>
          {rooms.length === 0 ? (
            <Text type="secondary">Danh sÃ¡ch phÃ²ng trá»‘ng.</Text>
          ) : (
            <>
              <List
                itemLayout="horizontal"
                dataSource={currentRooms}
                renderItem={(room) => (
                  <List.Item
                    actions={[
                      <Button
                        type="primary"
                        icon={<EditOutlined />}
                        onClick={() => handleEditRoom(room._id)} // Má»Ÿ drawer chá»‰nh sá»­a phÃ²ng
                      />,
                      <Button
                        type="primary"
                        danger
                        icon={<DeleteOutlined />}
                        onClick={() => confirmDeleteRoom(room._id)} // Gá»i hÃ m xÃ¡c nháº­n xÃ³a
                      />,
                    ]}
                    style={{
                      border: "1px solid #e0e0e0",
                      borderRadius: "8px",
                      marginBottom: "12px",
                      padding: "10px",
                      background: "#f9f9f9",
                    }}
                  >
                    <List.Item.Meta
                      title={room.type}
                      description={`GiÃ¡: ${room.price} VND`}
                    />
                    {room.imageroom.length > 0 && (
                      <Image
                        width={100}
                        height={100} // Äáº·t chiá»u cao Ä‘á»ƒ táº¡o hÃ¬nh vuÃ´ng
                        src={room.imageroom[0]}
                        alt="Room"
                        style={{ borderRadius: "8px", objectFit: "cover" }}
                      />
                    )}
                  </List.Item>
                )}
              />
              <Pagination
                current={currentPage}
                pageSize={roomsPerPage}
                total={filteredRooms.length}
                onChange={(page) => setCurrentPage(page)}
                style={{ textAlign: "center", marginTop: "16px" }}
              />
            </>
          )}
        </>
      )}
      <Drawer
        title="ThÃªm PhÃ²ng"
        visible={isAddRoomModalVisible}
        onClose={handleAddRoomModalClose}
        footer={null}
        width={520}
      >
        <AddRoom hotelId={hotelId} onClose={handleAddRoomModalClose} />
      </Drawer>
      {/* Drawer chá»‰nh sá»­a thÃ´ng tin phÃ²ng */}
      <EditRoomDrawer
        visible={isEditRoomDrawerVisible}
        onClose={() => {
          setIsEditRoomDrawerVisible(false);
          setSelectedRoomId(null); // XÃ³a roomId sau khi Ä‘Ã³ng drawer
        }}
        roomId={selectedRoomId} // Truyá»n roomId vÃ o EditRoomDrawer
        fetchRooms={fetchRooms}
      />
    </Drawer>
  );
};

export default RoomListDrawer;

```

### client\src\components\dashboard\hotelmanage\SalesTrendChart.jsx
```jsx
import { motion } from "framer-motion";
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from "recharts";

const bookingRevenueData = [
	{ month: "ThÃ¡ng 1", revenue: 12000000 },
	{ month: "ThÃ¡ng 2", revenue: 9000000 },
	{ month: "ThÃ¡ng 3", revenue: 15000000 },
	{ month: "ThÃ¡ng 4", revenue: 13500000 },
	{ month: "ThÃ¡ng 5", revenue: 18000000 },
	{ month: "ThÃ¡ng 6", revenue: 16500000 },
];

const BookingRevenueChart = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.3 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Doanh thu Ä‘áº·t phÃ²ng</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<LineChart data={bookingRevenueData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='month' stroke='#9CA3AF' />
						<YAxis
							stroke='#9CA3AF'
							tickFormatter={(value) => `${value / 1000000}M`}
						/>
						<Tooltip
							formatter={(value) => `${value.toLocaleString()} VNÄ`}
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Line type='monotone' dataKey='revenue' stroke='#8B5CF6' strokeWidth={2} />
					</LineChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};

export default BookingRevenueChart;

```

### client\src\components\dashboard\orders\BookingDetailsModal.jsx
```jsx
// BookingDetailsModal.js
import React from "react";

const BookingDetailsModal = ({ booking, onClose, onPrint }) => {
  if (!booking) return null;

  return (
    <div
      className="fixed text-black inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center z-50"
      onClick={onClose}
    >
      <div
        className="bg-white p-8 rounded-xl shadow-lg max-w-3xl w-full"
        onClick={(e) => e.stopPropagation()}
      >
        <h3 className="text-2xl font-bold mb-6 text-center">
          Chi tiáº¿t hÃ³a Ä‘Æ¡n
        </h3>
        <div className="modal-content space-y-4">
          {/* MÃ£ Ä‘áº·t phÃ²ng */}
          <p>
            <strong className="text-gray-700">MÃ£ Ä‘áº·t phÃ²ng:</strong>{" "}
            {booking.orderId}
          </p>

          {/* ThÃ´ng tin khÃ¡ch hÃ ng */}
          <p>
            <strong className="text-gray-700">KhÃ¡ch hÃ ng:</strong>{" "}
            {booking.user.name}
          </p>
          <p>
            <strong className="text-gray-700">Email Ä‘áº·t phÃ²ng:</strong>{" "}
            {booking.emailBooking}
          </p>
          <p>
            <strong className="text-gray-700">Phone:</strong>{" "}
            {booking.phoneBooking}
          </p>

          {/* ThÃ´ng tin khÃ¡ch sáº¡n vÃ  phÃ²ng */}
          <p>
            <strong className="text-gray-700">KhÃ¡ch sáº¡n:</strong>{" "}
            {booking.room.hotel.name}
          </p>
          <p>
            <strong className="text-gray-700">Loáº¡i phÃ²ng:</strong>{" "}
            {booking.room.type}
          </p>

          {/* ThÃ´ng tin ngÃ y Ä‘áº·t vÃ  ngÃ y check-in/out */}
          <p>
            <strong className="text-gray-700">NgÃ y Ä‘áº·t:</strong>{" "}
            {new Date(booking.bookingDate).toLocaleString()}
          </p>
          <p>
            <strong className="text-gray-700">Check-in:</strong>{" "}
            {new Date(booking.checkInDate).toLocaleDateString()}
          </p>
          <p>
            <strong className="text-gray-700">Check-out:</strong>{" "}
            {new Date(booking.checkOutDate).toLocaleDateString()}
          </p>

          {/* Tá»•ng tiá»n */}
          <p className="text-right text-lg font-Roboto text-orange-600">
            <strong>Tá»•ng tiá»n:</strong> {booking.priceBooking} VND
          </p>
        </div>

        {/* CÃ¡c nÃºt Ä‘iá»u khiá»ƒn */}
        <div className="flex justify-end mt-6 gap-4">
          <button
            onClick={onClose}
            className="bg-red-600 text-white px-6 py-2 rounded-xl hover:bg-red-700 transition-colors"
          >
            ÄÃ³ng
          </button>
          <button
            onClick={onPrint}
            className="bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors"
          >
            In hÃ³a Ä‘Æ¡n
          </button>
        </div>
      </div>
    </div>
  );
};

export default BookingDetailsModal;

```

### client\src\components\dashboard\orders\DailyOrders.jsx
```jsx
import { motion } from "framer-motion";
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from "recharts";

const dailyOrdersData = [
	{ date: "07/01", orders: 45 },
	{ date: "07/02", orders: 52 },
	{ date: "07/03", orders: 49 },
	{ date: "07/04", orders: 60 },
	{ date: "07/05", orders: 55 },
	{ date: "07/06", orders: 58 },
	{ date: "07/07", orders: 62 },
];

const DailyOrders = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.2 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Daily Orders</h2>

			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<LineChart data={dailyOrdersData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='date' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Line type='monotone' dataKey='orders' stroke='#8B5CF6' strokeWidth={2} />
					</LineChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default DailyOrders;

```

### client\src\components\dashboard\orders\DeleteModal.jsx
```jsx
import React from "react";
import { Modal, notification } from "antd"; // Assuming you're using Ant Design for modals
import axios from "axios";

const DeleteModal = ({ isVisible, onCancel, booking, onDelete }) => {
  const handleDelete = () => {
    // Call the API to delete the booking
    axios
      .delete(`/api/booking/${booking._id}`)
      .then(() => {
        // After deletion, call the onDelete function to refresh the bookings list
        onDelete();
        onCancel(); // Close the modal after deletion
        notification.success({
          message: "XoÃ¡ thÃ nh cÃ´ng",
          description: "Báº¡n Ä‘Ã£ xoÃ¡ thÃ´ng tin Ä‘áº·t phÃ²ng thÃ nh cÃ´ng",
        });
      })
      .catch((error) => {
        console.error("Error deleting booking:", error);
        notification.error({
          message: "Lá»—i khi xoÃ¡ Ä‘áº·t phÃ²ng",
          description: "CÃ³ lá»—i xáº£y ra khi xoÃ¡ thÃ´ng tin, vui lÃ²ng thá»­ láº¡i sau",
        });
      });
  };

  return (
    <Modal
      title="XÃ³a Ä‘áº·t phÃ²ng"
      visible={isVisible}
      onCancel={onCancel}
      onOk={handleDelete}
      okText="XÃ³a"
      cancelText="Há»§y"
      centered
      okButtonProps={{
        danger: true, // Make the delete button red
      }}
    >
      <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a Ä‘áº·t phÃ²ng nÃ y?</p>
      <p>
        <strong>{booking && booking.user.name}</strong>
      </p>
      <p>
        <strong>{booking && booking.orderId}</strong>
      </p>
    </Modal>
  );
};

export default DeleteModal;

```

### client\src\components\dashboard\orders\EditBookingModal.jsx
```jsx
import React, { useState, useEffect } from "react";
import { Modal, Input, Button, DatePicker, notification } from "antd";
import moment from "moment";
import axios from "axios"; // ThÃªm axios vÃ o

const EditBookingModal = ({ visible, booking, onClose, onUpdate }) => {
  const [email, setEmail] = useState("");
  const [phone, setPhone] = useState("");
  const [checkInDate, setCheckInDate] = useState(null);
  const [checkOutDate, setCheckOutDate] = useState(null);
  const [totalPrice, setTotalPrice] = useState("");

  const [loading, setLoading] = useState(false);

  // Cháº¡y khi modal má»Ÿ Ä‘á»ƒ thiáº¿t láº­p dá»¯ liá»‡u ban Ä‘áº§u
  useEffect(() => {
    if (visible && booking) {
      setEmail(booking.emailBooking || "");
      setPhone(booking.phoneBooking || "");
      setCheckInDate(booking.checkInDate ? moment(booking.checkInDate) : null);
      setCheckOutDate(
        booking.checkOutDate ? moment(booking.checkOutDate) : null
      );
      setTotalPrice(booking.priceBooking || "");
    }
  }, [visible, booking]);

  // HÃ m tÃ­nh toÃ¡n tá»•ng tiá»n dá»±a trÃªn ngÃ y check-in vÃ  check-out
  const calculateTotalPrice = () => {
    if (checkInDate && checkOutDate) {
      const days = checkOutDate.diff(checkInDate, "days");
      // Giáº£ sá»­ giÃ¡ phÃ²ng cÃ³ sáºµn trong booking
      const roomPrice = booking?.room?.price || 100; // Thay báº±ng giÃ¡ thá»±c táº¿
      setTotalPrice(days * roomPrice);
    }
  };

  // Xá»­ lÃ½ khi thay Ä‘á»•i ngÃ y check-in hoáº·c check-out
  const handleDateChange = () => {
    calculateTotalPrice();
  };

  // LÆ°u thÃ´ng tin booking sau khi chá»‰nh sá»­a
  const handleSave = async () => {
    if (!email || !phone || !checkInDate || !checkOutDate) {
      notification.error({
        message: "ThÃ´ng tin khÃ´ng há»£p lá»‡",
        description: "Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin",
      });
      return;
    }

    setLoading(true);
    try {
      // Chuáº©n bá»‹ dá»¯ liá»‡u Ä‘á»ƒ gá»­i lÃªn API
      const updatedBooking = {
        email: email,
        phoneBooking: phone,
        checkInDate: checkInDate.toISOString(),
        checkOutDate: checkOutDate.toISOString(),
        totalPrice: totalPrice,
      };

      // Gá»­i yÃªu cáº§u PUT tá»›i API Ä‘á»ƒ cáº­p nháº­t booking
      const response = await axios.put(
        `/api/booking/${booking._id}/update`,
        updatedBooking
      );
      onUpdate();
      setLoading(false);
      notification.success({
        message: "Cáº­p nháº­t thÃ nh cÃ´ng",
      });
      onClose(); // ÄÃ³ng modal sau khi lÆ°u thÃ nh cÃ´ng
    } catch (error) {
      setLoading(false);
      notification.error({
        message: "Lá»—i khi cáº­p nháº­t",
        description: "CÃ³ lá»—i xáº£y ra khi lÆ°u thÃ´ng tin Ä‘áº·t phÃ²ng",
      });
    }
  };

  return (
    <Modal
      title="Chá»‰nh sá»­a thÃ´ng tin Ä‘áº·t phÃ²ng"
      visible={visible}
      onCancel={onClose}
      footer={[
        <Button key="cancel" onClick={onClose}>
          Há»§y
        </Button>,
        <Button
          key="save"
          type="primary"
          loading={loading}
          onClick={handleSave}
        >
          LÆ°u
        </Button>,
      ]}
    >
      <div>
        <label>Email:</label>
        <Input value={email} onChange={(e) => setEmail(e.target.value)} />
      </div>
      <div style={{ marginTop: "1rem" }}>
        <label>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
        <Input value={phone} onChange={(e) => setPhone(e.target.value)} />
      </div>
      <div style={{ marginTop: "1rem" }}>
        <label>NgÃ y nháº­n phÃ²ng:</label>
        <DatePicker
          value={checkInDate}
          onChange={(date) => {
            setCheckInDate(date);
            handleDateChange();
          }}
          format="DD-MM-YYYY"
        />
      </div>
      <div style={{ marginTop: "1rem" }}>
        <label>NgÃ y tráº£ phÃ²ng:</label>
        <DatePicker
          value={checkOutDate}
          onChange={(date) => {
            setCheckOutDate(date);
            handleDateChange();
          }}
          format="DD-MM-YYYY"
        />
      </div>
      <div style={{ marginTop: "1rem" }}>
        <label>Tá»•ng tiá»n:</label>
        <Input value={totalPrice} disabled />
      </div>
    </Modal>
  );
};

export default EditBookingModal;

```

### client\src\components\dashboard\orders\OrderDistribution.jsx
```jsx
import { motion } from "framer-motion";
import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from "recharts";

const bookingStatusData = [
	{ name: "ÄÃ£ thanh toÃ¡n", value: 40 },
	{ name: "ChÆ°a thanh toÃ¡n", value: 30 },
	{ name: "ÄÃ£ nháº­n phÃ²ng", value: 20 },
	{ name: "ÄÃ£ hoÃ n thÃ nh", value: 50 },
];
const COLORS = ["#4CAF50", "#FF9800", "#2196F3", "#9C27B0"];

const BookingStatusChart = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.3 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Tá»· lá»‡ tráº¡ng thÃ¡i Ä‘áº·t phÃ²ng</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<PieChart>
						<Pie
							data={bookingStatusData}
							cx='50%'
							cy='50%'
							outerRadius={80}
							fill='#8884d8'
							dataKey='value'
							label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}
						>
							{bookingStatusData.map((entry, index) => (
								<Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
							))}
						</Pie>
						<Tooltip
							formatter={(value) => `${value} lÆ°á»£t`}
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend
							formatter={(value) => (
								<span style={{ color: "#E5E7EB", fontSize: "14px" }}>{value}</span>
							)}
						/>
					</PieChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};

export default BookingStatusChart;

```

### client\src\components\dashboard\orders\OrdersTable.jsx
```jsx
import React, { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { Eye, Edit, Trash2, Search } from "lucide-react";
import axios from "axios";
import BookingDetailsModal from "./BookingDetailsModal";

import UpdateStatusModal from "./UpdateStatusModal";
import EditBookingModal from "./EditBookingModal";
import DeleteBookingModal from "./DeleteModal";
const OrderTable = () => {
  const [data, setData] = useState([]);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [selectedBooking, setSelectedBooking] = useState(null);
  const [isStatusModalVisible, setIsStatusModalVisible] = useState(false);
  const [searchTerm, setSearchTerm] = useState("");
  const [selectedHotel, setSelectedHotel] = useState(""); // Filter by Hotel
  const [selectedRoomType, setSelectedRoomType] = useState(""); // Filter by Room Type
  const [selectedPaymentStatus, setSelectedPaymentStatus] = useState(""); // Filter by Payment Status
  // PhÃ¢n trang
  const [currentPage, setCurrentPage] = useState(1);
  const [bookingsPerPage] = useState(15); // Sá»‘ lÆ°á»£ng booking má»—i trang
  const [filteredBookings, setFilteredBookings] = useState([]);
  const [isEditModalVisible, setIsEditModalVisible] = useState(false);
  const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false);
  useEffect(() => {
    axios
      .get("/api/booking/booking/manager")
      .then((response) => {
        setData(response.data);
        setFilteredBookings(response.data); // LÆ°u trá»¯ toÃ n bá»™ dá»¯ liá»‡u
      })
      .catch((error) => {
        console.error("Error fetching data:", error);
      });
  }, []);

  const loadBookings = () => {
    axios
      .get("/api/booking/booking/manager")
      .then((response) => {
        setFilteredBookings(response.data); // Cáº­p nháº­t láº¡i filteredBookings vá»›i dá»¯ liá»‡u má»›i
      })
      .catch((error) => {
        console.error("Error fetching updated data:", error);
      });
  };

  const handleResetFilters = () => {
    setSelectedHotel("");
    setSelectedRoomType("");
    setSelectedPaymentStatus("");
    setSearchTerm("");
    loadBookings(); // Gá»i hÃ m loadBookings sau khi lÃ m má»›i bá»™ lá»c
  };

  const showModal = (booking) => {
    setSelectedBooking(booking);
    setIsModalVisible(true);
  };

  const handleCancel = () => {
    setIsModalVisible(false);
    setSelectedBooking(null);
    setIsStatusModalVisible(false);
  };

  const showModalEdit = (booking) => {
    setSelectedBooking(booking);
    setIsEditModalVisible(true);
  };

  const handleEditCancel = () => {
    setIsEditModalVisible(false);
    setSelectedBooking(null);
  };

  const showModalDelete = (booking) => {
    setSelectedBooking(booking);
    setIsDeleteModalVisible(true);
  };

  const handleDeleteCancel = () => {
    setIsDeleteModalVisible(false);
    setSelectedBooking(null);
  };

  // Filter unique hotel names
  const uniqueHotels = Array.from(
    new Set(data.map((booking) => booking.room.hotel.name))
  );

  // Filter unique room types
  const uniqueRoomTypes = Array.from(
    new Set(data.map((booking) => booking.room.type))
  );

  // Handle Hotel Filter
  const handleHotelFilter = (e) => {
    setSelectedHotel(e.target.value);
    filterBookings(
      searchTerm,
      e.target.value,
      selectedRoomType,
      selectedPaymentStatus
    );
  };

  // Handle Room Type Filter
  const handleRoomTypeFilter = (e) => {
    setSelectedRoomType(e.target.value);
    filterBookings(
      searchTerm,
      selectedHotel,
      e.target.value,
      selectedPaymentStatus
    );
  };

  // Handle Payment Status Filter
  const handlePaymentStatusFilter = (e) => {
    setSelectedPaymentStatus(e.target.value);
    filterBookings(searchTerm, selectedHotel, selectedRoomType, e.target.value);
  };

  // Filter Bookings based on search and selected filters
  const filterBookings = (term, hotel, roomType, paymentStatus) => {
    const filtered = data.filter((booking) => {
      const matchesHotel = hotel
        ? booking.room.hotel.name.toLowerCase().includes(hotel.toLowerCase())
        : true;
      const matchesRoomType = roomType
        ? booking.room.type.toLowerCase().includes(roomType.toLowerCase())
        : true;
      const matchesStatus = paymentStatus
        ? booking.paymentStatus
            .toLowerCase()
            .includes(paymentStatus.toLowerCase())
        : true;
      const matchesSearch =
        booking.user.name.toLowerCase().includes(term) ||
        booking.user.email.toLowerCase().includes(term) ||
        booking.orderId.toLowerCase().includes(term) ||
        booking.room.hotel.name.toLowerCase().includes(term) ||
        booking.room.type.toLowerCase().includes(term) ||
        new Date(booking.bookingDate).toLocaleDateString().includes(term) ||
        getPaymentStatusText(booking.paymentStatus)
          .toLowerCase()
          .includes(term);

      return matchesHotel && matchesRoomType && matchesStatus && matchesSearch;
    });
    setFilteredBookings(filtered);
  };
  const getPaymentStatusText = (status) => {
    switch (status) {
      case "Complete":
        return "ÄÃ£ thanh toÃ¡n";
      case "Pending":
        return "ChÆ°a thanh toÃ¡n";
      case "CheckIn":
        return "ÄÃ£ nháº­n phÃ²ng";
      case "Done":
        return "ÄÃ£ hoÃ n thÃ nh";
      default:
        return "";
    }
  };

  // XÃ¡c Ä‘á»‹nh vá»‹ trÃ­ Ä‘áº§u vÃ  cuá»‘i cá»§a pháº§n tá»­ trÃªn trang hiá»‡n táº¡i
  const indexOfLastBooking = currentPage * bookingsPerPage;
  const indexOfFirstBooking = indexOfLastBooking - bookingsPerPage;

  // Láº¥y danh sÃ¡ch cÃ¡c bookings trÃªn trang hiá»‡n táº¡i, hoáº·c máº£ng trá»‘ng náº¿u khÃ´ng cÃ³ bookings
  const currentBookings =
    filteredBookings && filteredBookings.length > 0
      ? filteredBookings.slice(indexOfFirstBooking, indexOfLastBooking)
      : [];

  // HÃ m phÃ¢n trang, kiá»ƒm tra náº¿u trang má»›i khÃ´ng cÃ³ dá»¯ liá»‡u thÃ¬ quay láº¡i trang trÆ°á»›c Ä‘Ã³
  const paginate = (pageNumber) => {
    const totalPages = Math.ceil(filteredBookings.length / bookingsPerPage);

    // Giá»›i háº¡n sá»‘ trang há»£p lá»‡
    if (pageNumber >= 1 && pageNumber <= totalPages) {
      setCurrentPage(pageNumber);

      // TÃ­nh láº¡i bookings trÃªn trang má»›i
      const newIndexOfLastBooking = pageNumber * bookingsPerPage;
      const newIndexOfFirstBooking = newIndexOfLastBooking - bookingsPerPage;
      const newCurrentBookings = filteredBookings.slice(
        newIndexOfFirstBooking,
        newIndexOfLastBooking
      );

      // Náº¿u trang má»›i khÃ´ng cÃ³ dá»¯ liá»‡u, quay láº¡i trang trÆ°á»›c Ä‘Ã³
      if (newCurrentBookings.length === 0 && pageNumber > 1) {
        setCurrentPage(pageNumber - 1);
      }
    }
  };

  // Táº¡o danh sÃ¡ch cÃ¡c sá»‘ trang
  const pageNumbers = [];
  const totalPages = Math.ceil(filteredBookings.length / bookingsPerPage);
  for (let i = 1; i <= totalPages; i++) {
    pageNumbers.push(i);
  }

  const handleUpdateStatus = (status) => {
    // Cáº­p nháº­t tráº¡ng thÃ¡i booking
    axios
      .put(`/api/booking/${selectedBooking._id}/update-status`, { status })
      .then(() => {
        // Cáº­p nháº­t tráº¡ng thÃ¡i trong bá»™ dá»¯ liá»‡u state
        const updatedBookings = filteredBookings.map((booking) =>
          booking._id === selectedBooking._id
            ? { ...booking, paymentStatus: status }
            : booking
        );
        setFilteredBookings(updatedBookings); // Cáº­p nháº­t filteredBookings mÃ  khÃ´ng cáº§n gá»i láº¡i API
        setSelectedBooking({ ...selectedBooking, paymentStatus: status });
        setIsStatusModalVisible(false);
      })
      .catch((error) => {
        console.error("Error updating status:", error);
      });
  };
  //
  // Handle tÃ¬m kiáº¿m ngÆ°á»i dÃ¹ng
  const handleSearch = (e) => {
    const term = e.target.value.toLowerCase();
    setSearchTerm(term);
    const filtered = data.filter(
      (booking) =>
        booking.user.name.toLowerCase().includes(term) ||
        booking.user.email.toLowerCase().includes(term) ||
        booking.orderId.toLowerCase().includes(term) || // TÃ¬m theo mÃ£ Ä‘áº·t phÃ²ng
        booking.room.hotel.name.toLowerCase().includes(term) || // TÃ¬m theo tÃªn khÃ¡ch sáº¡n
        booking.room.type.toLowerCase().includes(term) || // TÃ¬m theo loáº¡i phÃ²ng
        new Date(booking.bookingDate).toLocaleDateString().includes(term) || // TÃ¬m theo ngÃ y Ä‘áº·t
        getPaymentStatusText(booking.paymentStatus).toLowerCase().includes(term) // TÃ¬m theo tráº¡ng thÃ¡i thanh toÃ¡n
    );
    setFilteredBookings(filtered);
  };

  //handle print
  const handlePrint = () => {
    // Láº¥y pháº§n tá»­ cÃ³ lá»›p modal-content
    const printContents = document.querySelector(".modal-content").innerHTML;
    // Táº¡o cá»­a sá»• má»›i Ä‘á»ƒ in
    const printWindow = window.open("", "", "height=600,width=800");
    printWindow.document.write("<html><head><title>In hÃ³a Ä‘Æ¡n</title>");
    // ThÃªm CSS cho cá»­a sá»• in
    printWindow.document.write(
      "<style>body {font-family: Arial, sans-serif; padding: 20px;} .modal-content {font-size: 16px;}</style>"
    );
    printWindow.document.write("</head><body>");
    printWindow.document.write(printContents); // Ghi ná»™i dung modal vÃ o cá»­a sá»• in
    printWindow.document.write("</body></html>");
    printWindow.document.close(); // ÄÃ³ng cá»­a sá»• Ä‘á»ƒ trÃ¬nh duyá»‡t cÃ³ thá»ƒ xá»­ lÃ½

    // Gá»i lá»‡nh in cá»§a trÃ¬nh duyá»‡t
    printWindow.print();
  };
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      className="container mx-auto p-4"
    >
      <div className="bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700 mb-8">
        <div className="flex justify-between items-center mb-6">
          <div className="flex-grow">
            <h2 className="text-xl font-semibold text-gray-100">
              Quáº£n LÃ½ Äáº·t PhÃ²ng
            </h2>
          </div>

          <div className="relative">
            <input
              type="search"
              placeholder="TÃ¬m kiáº¿m"
              className="text-white bg-gray-700 placeholder-gray-400 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-150"
              value={searchTerm}
              onChange={handleSearch}
            />
            <Search
              className="absolute left-3 top-2.5 text-gray-400 transition-transform duration-150"
              size={18}
            />
          </div>
        </div>
        <div className="flex space-x-4 mb-6">
          <select
            value={selectedHotel}
            onChange={handleHotelFilter}
            className="text-white bg-gray-700 rounded-lg py-2 px-4"
          >
            <option value="">Táº¥t cáº£ khÃ¡ch sáº¡n</option>
            {uniqueHotels.map((hotelName, index) => (
              <option key={index} value={hotelName}>
                {hotelName}
              </option>
            ))}
          </select>

          <select
            value={selectedRoomType}
            onChange={handleRoomTypeFilter}
            className="text-white bg-gray-700 rounded-lg py-2 px-4"
          >
            <option value="">Táº¥t cáº£ loáº¡i phÃ²ng</option>
            {uniqueRoomTypes.map((roomType, index) => (
              <option key={index} value={roomType}>
                {roomType}
              </option>
            ))}
          </select>

          <select
            value={selectedPaymentStatus}
            onChange={handlePaymentStatusFilter}
            className="text-white bg-gray-700 rounded-lg py-2 px-4"
          >
            <option value="">Tráº¡ng thÃ¡i</option>
            <option value="Complete">ÄÃ£ thanh toÃ¡n</option>
            <option value="Pending">ChÆ°a thanh toÃ¡n</option>
            <option value="CheckIn">ÄÃ£ nháº­n phÃ²ng</option>
            <option value="Done">ÄÃ£ hoÃ n thÃ nh</option>
          </select>

          <button
            onClick={handleResetFilters}
            className="ml-4 px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition duration-150"
          >
            LÃ m má»›i
          </button>
        </div>
        <table className="min-w-full table-auto text-white">
          <thead>
            <tr className="text-left">
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                KhÃ¡ch sáº¡n
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Loáº¡i PhÃ²ng
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                NgÃ y Ä‘áº·t
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Thá»i gian
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                ThÃ´ng tin
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Sá»‘ Ä‘iá»‡n thoáº¡i
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Tráº¡ng thÃ¡i
              </th>
              <th className="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                HÃ nh Ä‘á»™ng
              </th>
            </tr>
          </thead>
          <tbody>
            {currentBookings.map((booking) => (
              <tr
                key={booking._id}
                className="border-b border-gray-700 hover:bg-gray-800 transition duration-150"
              >
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-100">
                  <strong>{booking.room.hotel.name}</strong>
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm  text-slate-400">
                  {booking.room.type}
                </td>
                <td className="px-2 py-2 whitespace-nowrap text-sm text-gray-300">
                  <span className="text-lg font-semibold text-white tracking-wide">
                    {new Date(booking.bookingDate).toLocaleDateString()}
                  </span>
                  <span className="block text-xs text-gray-400 font-light tracking-wider">
                    {new Date(booking.bookingDate).toLocaleTimeString([], {
                      hour: "2-digit",
                      minute: "2-digit",
                    })}
                  </span>
                </td>
                <td className="px-4 py-2 text-slate-400">
                  <div className="text-xs font-semibold">
                    <p className="check-in text-gray-300">{`Nháº­n phÃ²ng: ${new Date(
                      booking.checkInDate
                    ).toLocaleDateString()}`}</p>
                    <p className="check-out text-gray-300">{`Tráº£ phÃ²ng: ${new Date(
                      booking.checkOutDate
                    ).toLocaleDateString()}`}</p>
                  </div>
                </td>

                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-100">
                  <p>{booking.user.name || "No name"}</p>
                  {/* <p>{booking.user.email || "No email"}</p> */}
                </td>
                <td className="px-4 py-2">{booking.phoneBooking}</td>
                <td className="px-4 py-2">
                  <span
                    onClick={() => {
                      setSelectedBooking(booking);
                      setIsStatusModalVisible(true);
                    }}
                    className={`whitespace-nowrap text-sm cursor-pointer transition-all duration-300 ease-in-out ${
                      booking.paymentStatus === "Complete"
                        ? "text-teal-400 hover:text-teal-500 hover:scale-105 hover:shadow-lg hover:brightness-110"
                        : booking.paymentStatus === "Pending"
                        ? "text-yellow-400 hover:text-yellow-500 hover:scale-105 hover:shadow-lg hover:brightness-110"
                        : booking.paymentStatus === "CheckIn"
                        ? "text-blue-400 hover:text-blue-500 hover:scale-105 hover:shadow-lg hover:brightness-110"
                        : booking.paymentStatus === "Done"
                        ? "text-purple-400 hover:text-purple-500 hover:scale-105 hover:shadow-lg hover:brightness-110"
                        : "text-gray-500 hover:text-gray-600 hover:scale-105 hover:shadow-lg hover:brightness-110"
                    }`}
                  >
                    {getPaymentStatusText(booking.paymentStatus)}
                  </span>
                </td>

                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                  {/* Tooltip cho nÃºt Xem chi tiáº¿t */}
                  <button
                    onClick={() => showModal(booking)}
                    className="text-blue-500 hover:text-blue-700 mr-2 relative group"
                  >
                    <Eye size={18} />
                    <span className="tooltip hidden group-hover:block absolute bg-gray-700 text-white text-xs rounded px-2 py-1 bottom-full mb-1">
                      Xem chi tiáº¿t
                    </span>
                  </button>

                  {/* Tooltip cho nÃºt Sá»­a */}
                  <button
                    onClick={() => showModalEdit(booking)}
                    className="text-yellow-500 hover:text-yellow-700 mr-2 relative group"
                  >
                    <Edit size={18} />
                    <span className="tooltip hidden group-hover:block absolute bg-gray-700 text-white text-xs rounded px-2 py-1 bottom-full mb-1">
                      Sá»­a thÃ´ng tin
                    </span>
                  </button>

                  {/* Tooltip cho nÃºt XÃ³a */}
                  <button
                    onClick={() => showModalDelete(booking)}
                    className="text-red-500 hover:text-red-700 relative group"
                  >
                    <Trash2 size={18} />
                    <span className="tooltip hidden group-hover:block absolute bg-gray-700 text-white text-xs rounded px-2 py-1 bottom-full mb-1">
                      XÃ³a
                    </span>
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
        {/* PhÃ¢n trang */}
        <div className="flex justify-center mt-4">
          <ul className="flex space-x-2">
            {pageNumbers.map((number) => (
              <li key={number}>
                <button
                  onClick={() => paginate(number)}
                  className={`px-4 py-2 rounded-lg ${
                    currentPage === number
                      ? "bg-blue-500 text-white"
                      : "bg-gray-700 text-gray-300"
                  }`}
                >
                  {number}
                </button>
              </li>
            ))}
          </ul>
        </div>
      </div>
      {/* Modal cho chi tiáº¿t booking */}
      {isModalVisible && (
        <BookingDetailsModal
          booking={selectedBooking}
          onClose={handleCancel}
          onPrint={handlePrint}
        />
      )}
      {/* Modal cho cáº­p nháº­t tráº¡ng thÃ¡i */}
      {isStatusModalVisible && selectedBooking && (
        <UpdateStatusModal
          isVisible={isStatusModalVisible}
          onClose={handleCancel}
          onUpdateStatus={handleUpdateStatus}
          getStatusText={getPaymentStatusText}
        />
      )}

      <EditBookingModal
        visible={isEditModalVisible}
        booking={selectedBooking}
        onClose={handleEditCancel}
        onUpdate={loadBookings}
      />

      {selectedBooking && (
        <DeleteBookingModal
          isVisible={isDeleteModalVisible}
          onCancel={handleDeleteCancel}
          booking={selectedBooking}
          onDelete={loadBookings} // Update bookings after deletion
        />
      )}
    </motion.div>
  );
};
export default OrderTable;

```

### client\src\components\dashboard\orders\UpdateStatusModal.jsx
```jsx
// UpdateStatusModal.js
import React from "react";
import { CheckCircle, Clock, UserCheck, CheckSquare } from "lucide-react";

const UpdateStatusModal = ({
  isVisible,
  onClose,
  onUpdateStatus,
  getStatusText,
}) => {
  if (!isVisible) return null;

  return (
    <div
      className="fixed inset-0 bg-gray-900 bg-opacity-70 flex justify-center items-center z-50"
      onClick={onClose}
    >
      <div
        className="bg-gradient-to-br from-gray-800 via-gray-700 to-gray-600 p-10 rounded-3xl shadow-2xl max-w-lg w-full"
        onClick={(e) => e.stopPropagation()}
      >
        <h3
          className="text-3xl font-extrabold text-white mb-6 text-center drop-shadow-md"
          style={{ fontFamily: "Roboto, sans-serif" }}
        >
          Cáº¬P NHáº¬T TRáº NG THÃI
        </h3>

        <div className="flex flex-col gap-6">
          {["Complete", "Pending", "CheckIn", "Done"].map((status) => {
            let Icon;
            if (status === "Complete") Icon = CheckCircle;
            else if (status === "Pending") Icon = Clock;
            else if (status === "CheckIn") Icon = UserCheck;
            else if (status === "Done") Icon = CheckSquare;

            return (
              <button
                key={status}
                onClick={() => onUpdateStatus(status)}
                className="flex items-center justify-between bg-white text-gray-800 py-4 px-8 rounded-xl text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 hover:bg-gray-600 hover:text-white"
              >
                <div className="flex items-center gap-3">
                  <Icon className="text-2xl" />
                  <span>{getStatusText(status)}</span>
                </div>
                {/* <span className="bg-gray-400 text-gray-800 py-1 px-4 rounded-full text-sm font-medium hidden sm:block">
                  {status}
                </span> */}
              </button>
            );
          })}
        </div>
        <div className="flex justify-end mt-8 gap-6">
          <button
            onClick={onClose}
            className="bg-red-600 hover:bg-red-700 text-white px-8 py-4 rounded-2xl text-lg shadow-xl transform hover:scale-105 transition-all duration-300"
          >
            ÄÃ³ng
          </button>
        </div>
      </div>
    </div>
  );
};

export default UpdateStatusModal;

```

### client\src\components\dashboard\overview\CategoryDistributionChart.jsx
```jsx
import { motion } from "framer-motion";
import {
  PieChart,
  Pie,
  Cell,
  Tooltip,
  ResponsiveContainer,
  Legend,
} from "recharts";

// Dá»¯ liá»‡u thay tháº¿ vá»›i tÃ¬nh tráº¡ng Ä‘áº·t phÃ²ng
const categoryData = [
  { name: "PhÃ²ng Ä‘Ã£ Ä‘áº·t", value: 4500 },
  { name: "PhÃ²ng trá»‘ng", value: 3200 },
  { name: "PhÃ²ng Ä‘ang Ä‘Æ°á»£c yÃªu cáº§u", value: 2800 },
  { name: "PhÃ²ng Ä‘Ã£ há»§y", value: 2100 },
];

const COLORS = ["#4CAF50", "#FF9800", "#F44336", "#2196F3"]; // Sá»­ dá»¥ng mÃ u sáº¯c nháº¹ nhÃ ng, dá»… nhÃ¬n

const CategoryDistributionChart = () => {
  return (
    <motion.div
      className="bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.3 }}
    >
      <h2 className="text-lg font-medium mb-4 text-gray-100">
        TÃ¬nh tráº¡ng Ä‘áº·t phÃ²ng
      </h2>
      <div className="h-80">
        <ResponsiveContainer width={"100%"} height={"100%"}>
          <PieChart>
            <Pie
              data={categoryData}
              cx={"50%"}
              cy={"50%"}
              labelLine={false}
              outerRadius={80}
              fill="#8884d8"
              dataKey="value"
              label={({ name, percent }) =>
                `${name}: ${(percent * 100).toFixed(0)}%`
              }
            >
              {categoryData.map((entry, index) => (
                <Cell
                  key={`cell-${index}`}
                  fill={COLORS[index % COLORS.length]}
                />
              ))}
            </Pie>
            <Tooltip
              contentStyle={{
                backgroundColor: "rgba(31, 41, 55, 0.8)",
                borderColor: "#4B5563",
              }}
              itemStyle={{ color: "#E5E7EB" }}
            />
            <Legend />
          </PieChart>
        </ResponsiveContainer>
      </div>
    </motion.div>
  );
};

export default CategoryDistributionChart;

```

### client\src\components\dashboard\overview\SalesChannelChart.jsx
```jsx
import { motion } from "framer-motion";
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, Cell } from "recharts";

const COLORS = ["#6366F1", "#8B5CF6", "#EC4899", "#10B981", "#F59E0B"];

const PAYMENT_METHOD_DATA = [
	{ name: "MOMO", value: 45600 },
	{ name: "Trá»±c tiáº¿p", value: 38200 },
	{ name: "Banking", value: 29800 },
];

const PaymentMethodChart = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 lg:col-span-2 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.4 }}
		>
			<h2 className='text-lg font-medium mb-4 text-gray-100'>PhÆ°Æ¡ng thá»©c thanh toÃ¡n</h2>

			<div className='h-80'>
				<ResponsiveContainer>
					<BarChart data={PAYMENT_METHOD_DATA}>
						<CartesianGrid strokeDasharray='3 3' stroke='#4B5563' />
						<XAxis dataKey='name' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Bar dataKey={"value"} fill='#8884d8'>
							{PAYMENT_METHOD_DATA.map((entry, index) => (
								<Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
							))}
						</Bar>
					</BarChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};

export default PaymentMethodChart;

```

### client\src\components\dashboard\overview\SalesOverviewChart.jsx
```jsx
import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
} from "recharts";
import { motion } from "framer-motion";

// Dá»¯ liá»‡u vá» sá»‘ lÆ°á»£ng phÃ²ng Ä‘Ã£ Ä‘áº·t má»—i thÃ¡ng
const bookingsData = [
  { name: "Jan", bookings: 300 },
  { name: "Feb", bookings: 350 },
  { name: "Mar", bookings: 450 },
  { name: "Apr", bookings: 500 },
  { name: "May", bookings: 600 },
  { name: "Jun", bookings: 700 },
  { name: "Jul", bookings: 750 },
  { name: "Aug", bookings: 650 },
  { name: "Sep", bookings: 800 },
  { name: "Oct", bookings: 900 },
  { name: "Nov", bookings: 1000 },
  { name: "Dec", bookings: 1100 },
];

const BookingsOverviewChart = () => {
  return (
    <motion.div
      className="bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.2 }}
    >
      <h2 className="text-lg font-medium mb-4 text-gray-100">
        TÃ¬nh Tráº¡ng Äáº·t PhÃ²ng Theo ThÃ¡ng
      </h2>

      <div className="h-80">
        <ResponsiveContainer width={"100%"} height={"100%"}>
          <LineChart data={bookingsData}>
            <CartesianGrid strokeDasharray="3 3" stroke="#4B5563" />
            <XAxis dataKey={"name"} stroke="#9ca3af" />
            <YAxis stroke="#9ca3af" />
            <Tooltip
              contentStyle={{
                backgroundColor: "rgba(31, 41, 55, 0.8)",
                borderColor: "#4B5563",
              }}
              itemStyle={{ color: "#E5E7EB" }}
            />
            <Line
              type="monotone"
              dataKey="bookings"
              stroke="#10B981" // MÃ u xanh lÃ¡ cÃ¢y, mÃ u sáº¯c dá»… chá»‹u vÃ  liÃªn quan Ä‘áº¿n sá»± tÄƒng trÆ°á»Ÿng
              strokeWidth={3}
              dot={{ fill: "#10B981", strokeWidth: 2, r: 6 }}
              activeDot={{ r: 8, strokeWidth: 2 }}
            />
          </LineChart>
        </ResponsiveContainer>
      </div>
    </motion.div>
  );
};

export default BookingsOverviewChart;

```

### client\src\components\dashboard\sales\DailySalesTrend.jsx
```jsx
import { motion } from "framer-motion";
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from "recharts";
import { useEffect, useState } from "react";

// HÃ m Ä‘á»ƒ láº¥y thá»© trong tuáº§n tá»« ngÃ y
const getDayOfWeek = (date) => {
  const dayNames = ["Chá»§ nháº­t", "Thá»© hai", "Thá»© ba", "Thá»© tÆ°", "Thá»© nÄƒm", "Thá»© sÃ¡u", "Thá»© báº£y"];
  const dayIndex = new Date(date).getDay();
  return dayNames[dayIndex];
};

// HÃ m Ä‘á»ƒ láº¥y thÃ¡ng tá»« ngÃ y
const getMonth = (date) => {
  const monthIndex = new Date(date).getMonth(); 
  const monthNames = ["ThÃ¡ng 1", "ThÃ¡ng 2", "ThÃ¡ng 3", "ThÃ¡ng 4", "ThÃ¡ng 5", "ThÃ¡ng 6", "ThÃ¡ng 7", "ThÃ¡ng 8", "ThÃ¡ng 9", "ThÃ¡ng 10", "ThÃ¡ng 11", "ThÃ¡ng 12"];
  return monthNames[monthIndex];
};

const DailySalesTrend = ({ bookings }) => {
  const [dailySalesData, setDailySalesData] = useState([]);
  const [filter, setFilter] = useState('day'); // State cho lá»±a chá»n lá»c
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const salesData = {};

    // Xá»­ lÃ½ tá»«ng booking
    bookings.forEach((booking) => {
      let timePeriod;
      const price = booking.priceBooking;

      if (filter === "day") {
        // Lá»c theo ngÃ y trong tuáº§n
        timePeriod = getDayOfWeek(booking.bookingDate);
      } else if (filter === "month") {
        // Lá»c theo thÃ¡ng
        timePeriod = getMonth(booking.bookingDate);
      } else if (filter === "year") {
        // Lá»c theo nÄƒm
        timePeriod = new Date(booking.bookingDate).getFullYear().toString();
      }

      if (!salesData[timePeriod]) {
        salesData[timePeriod] = { name: timePeriod, sales: 0 };
      }
      salesData[timePeriod].sales += price; // Cá»™ng dá»“n doanh sá»‘ cho pháº¡m vi thá»i gian
    });

    // Chuyá»ƒn Ä‘á»•i salesData thÃ nh máº£ng Ä‘á»ƒ hiá»ƒn thá»‹
    const salesArray = Object.values(salesData);
    setDailySalesData(salesArray);
    setLoading(false); // Sau khi xá»­ lÃ½ dá»¯ liá»‡u xong, táº¯t loading
  }, [bookings, filter]); // ThÃªm filter vÃ o dependency Ä‘á»ƒ cáº­p nháº­t khi thay Ä‘á»•i

  return (
    <motion.div
      className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.4 }}
    >


{/* Dropdown chá»n pháº¡m vi thá»i gian */}
<div className="mb-4 flex justify-between items-center">
  <div className="flex-1">
    <h2 className='text-xl font-semibold text-gray-100 mb-4'>Xu hÆ°á»›ng doanh sá»‘</h2>
  </div>
  <select
    className="bg-gray-700 text-gray-100 px-3 py-2 rounded"
    value={filter}
    onChange={(e) => setFilter(e.target.value)}
  >
    <option value="day">NgÃ y</option>
    <option value="month">ThÃ¡ng</option>
    <option value="year">NÄƒm</option>
  </select>
</div>

      <div style={{ width: "100%", height: 300 }}>
        {loading ? (
          <motion.div
            className="text-gray-100 flex justify-center items-center h-full"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          >
            {/* Loading Indicator */}
          </motion.div>
        ) : (
          <ResponsiveContainer>
            <BarChart data={dailySalesData}>
              <CartesianGrid strokeDasharray="3 3" stroke="#374151" />
              <XAxis dataKey="name" stroke="#9CA3AF" />
              <YAxis stroke="#9CA3AF" tick={{ fontSize: 15 }} />
              <Tooltip
                content={({ payload, active }) => {
                  if (active && payload && payload.length) {
                    return (
                      <div className="bg-gray-800 p-2 rounded">
                        <p className="text-white">{`Doanh Thu: ${payload[0].value.toLocaleString()} VND`}</p>
                      </div>
                    );
                  }
                  return null;
                }}
                contentStyle={{
                  backgroundColor: "rgba(31, 41, 55, 0.8)",
                  borderColor: "#4B5563",
                }}
                itemStyle={{ color: "#E5E7EB" }}
              />
              <Bar dataKey="sales" fill="#10B981" />
            </BarChart>
          </ResponsiveContainer>
        )}
      </div>
    </motion.div>
  );
};

export default DailySalesTrend;

```

### client\src\components\dashboard\sales\SalesByCategoryChart.jsx
```jsx
import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { PieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer } from "recharts";

const COLORS = ["#8884d8", "#82ca9d", "#ffc658", "#ff8042", "#0088FE"];

const SalesByCategoryChart = ({ bookings }) => {
  const [loading, setLoading] = useState(true);
  const [filter, setFilter] = useState('month'); // Filter default lÃ  'month'
  const [salesData, setSalesData] = useState([]);

  // Lá»c dá»¯ liá»‡u bookings theo pháº¡m vi thá»i gian
  const filterBookings = (filter) => {
    const now = new Date();
    const filteredBookings = bookings.filter((booking) => {
      const bookingDate = new Date(booking.bookingDate);
      if (filter === 'day') {
        return bookingDate.toDateString() === now.toDateString();
      } else if (filter === 'month') {
        return bookingDate.getMonth() === now.getMonth() && bookingDate.getFullYear() === now.getFullYear();
      } else if (filter === 'year') {
        return bookingDate.getFullYear() === now.getFullYear();
      }
      return true;
    });
    return filteredBookings;
  };

  // TÃ­nh toÃ¡n doanh thu theo loáº¡i phÃ²ng
  const calculateSalesByCategory = (filteredBookings) => {
    const salesByCategory = filteredBookings.reduce((acc, booking) => {
      const type = booking.room.type; 
      const price = booking.priceBooking;

      if (booking.paymentStatus !== 'Pending') {
        if (!acc[type]) {
          acc[type] = { name: type, value: 0 };
        }
        acc[type].value += price;
      }
      return acc;
    }, {});

    return Object.values(salesByCategory);
  };

  useEffect(() => {
    const filteredBookings = filterBookings(filter);
    const salesData = calculateSalesByCategory(filteredBookings);
    setSalesData(salesData);
    setLoading(false); // HoÃ n thÃ nh viá»‡c táº£i dá»¯ liá»‡u
  }, [bookings, filter]);

  return (
    <motion.div
      className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: 0.3 }}
    >
    <div className="mb-4 flex justify-between items-center">
      <div className="text-gray-100">
      <h2 className='text-xl font-semibold text-gray-100 mb-4'>Thá»‘ng kÃª phÃ²ng</h2>
      </div>
      <select
        className="bg-gray-700 text-gray-100 px-3 py-2 rounded"
        value={filter}
        onChange={(e) => setFilter(e.target.value)}
      >
        <option value="day">NgÃ y</option>
        <option value="month">ThÃ¡ng</option>
        <option value="year">NÄƒm</option>
      </select>
    </div>


      <div style={{ width: "100%", height: 300 }}>
        {loading ? (
          <motion.div
            className="text-gray-100 flex justify-center items-center h-full"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.5, repeat: Infinity, repeatType: "reverse" }}
          >
            {/* Loading Indicator */}
          </motion.div>
        ) : (
          <ResponsiveContainer>
            <PieChart>
              <Pie
                data={salesData}
                cx='50%'
                cy='50%'
                outerRadius={80}
                fill='#8884d8'
                dataKey='value'
                label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
              >
                {salesData.map((entry, index) => (
                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                ))}
              </Pie>
              <Tooltip
                content={({ payload, active }) => {
                  if (active && payload && payload.length) {
                    const { name, value } = payload[0];
                    return (
                      <div className='bg-gray-800 p-2 rounded'>
                        <p className='text-white'>{`Doanh Thu: ${value.toLocaleString()} VND`}</p>
                      </div>
                    );
                  }
                  return null;
                }}
                contentStyle={{
                  backgroundColor: "rgba(31, 41, 55, 0.8)",
                  borderColor: "#4B5563",
                }}
                itemStyle={{ color: "#E5E7EB" }}
              />
              <Legend />
            </PieChart>
          </ResponsiveContainer>
        )}
      </div>
    </motion.div>
  );
};

export default SalesByCategoryChart;

```

### client\src\components\dashboard\sales\SalesOverviewChart.jsx
```jsx
import { motion } from "framer-motion";
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from "recharts";
import { useEffect, useState } from "react";

const SalesOverviewChart = ({ bookings }) => {
	const [monthlySalesData, setMonthlySalesData] = useState([]);
	const [loading, setLoading] = useState(true); // State cho tráº¡ng thÃ¡i loading

	const monthsInVietnamese = [
		'ThÃ¡ng 1', 'ThÃ¡ng 2', 'ThÃ¡ng 3', 'ThÃ¡ng 4', 
		'ThÃ¡ng 5', 'ThÃ¡ng 6', 'ThÃ¡ng 7', 'ThÃ¡ng 8', 
		'ThÃ¡ng 9', 'ThÃ¡ng 10', 'ThÃ¡ng 11', 'ThÃ¡ng 12'
	];

	const calculateMonthlySales = () => {
		const salesByMonth = {};
		const currentDate = new Date();
		const currentMonthIndex = currentDate.getMonth();
		const currentYear = currentDate.getFullYear();

		bookings.forEach((booking) => {
			const bookingDate = new Date(booking.bookingDate);
			const monthIndex = bookingDate.getMonth();
			const year = bookingDate.getFullYear();

			// Kiá»ƒm tra xem thÃ¡ng booking cÃ³ náº±m trong 4 thÃ¡ng gáº§n Ä‘Ã¢y khÃ´ng
			const monthDifference = (currentYear - year) * 12 + (currentMonthIndex - monthIndex);
			if (monthDifference < 0 || monthDifference >= 4) return; // Chá»‰ giá»¯ láº¡i booking trong 4 thÃ¡ng gáº§n Ä‘Ã¢y

			const month = monthsInVietnamese[monthIndex];
			const price = isPaymentCompleted(booking) ? booking.priceBooking : 0; 

			if (!salesByMonth[month]) {
				salesByMonth[month] = 0;
			}
			salesByMonth[month] += price;
		});

		// Táº¡o máº£ng doanh thu tá»« cÃ¡c thÃ¡ng gáº§n Ä‘Ã¢y
		const salesDataArray = monthsInVietnamese
			.filter((month, index) => index >= currentMonthIndex - 3 && index <= currentMonthIndex) // Láº¥y 4 thÃ¡ng gáº§n Ä‘Ã¢y
			.map(month => ({
				month,
				sales: salesByMonth[month] || 0, // Äáº·t giÃ¡ trá»‹ 0 náº¿u khÃ´ng cÃ³ doanh thu cho thÃ¡ng Ä‘Ã³
			}));

		setMonthlySalesData(salesDataArray);
		setLoading(false); // ÄÃ¡nh dáº¥u lÃ  Ä‘Ã£ hoÃ n thÃ nh tÃ­nh toÃ¡n
	};

	const isPaymentCompleted = (booking) => booking.paymentStatus !== 'Pending'; // HÃ m kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

	useEffect(() => {
		if (bookings.length > 0) {
			calculateMonthlySales();
		} else {
			setLoading(false); // Náº¿u khÃ´ng cÃ³ booking, cÅ©ng Ä‘Ã¡nh dáº¥u lÃ  hoÃ n thÃ nh
		}
	}, [bookings]);

	// HÃ m Ä‘á»‹nh dáº¡ng sá»‘ tiá»n vá»›i kÃ½ hiá»‡u "VND"
	const formatCurrency = (value) => {
		return `${value.toLocaleString()} VND`;
	};

	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700 mb-8'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.3 }} // Thay Ä‘á»•i Ä‘á»™ trá»… náº¿u cáº§n
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>Tá»•ng quan vá» doanh thu</h2>

			{/* Hiá»ƒn thá»‹ hiá»‡u á»©ng loading náº¿u Ä‘ang táº£i dá»¯ liá»‡u */}
			{loading ? (
				<div className="flex justify-center items-center" style={{ height: '300px' }}>
					<motion.div
						initial={{ scale: 0 }}
						animate={{ scale: 1 }}
						transition={{ repeat: Infinity, duration: 0.5, ease: "easeInOut" }}
						className="w-10 h-10 border-4 border-t-transparent border-blue-500 rounded-full"
					/>
				</div>
			) : (
				<div style={{ width: "100%", height: 300 }}>
					<ResponsiveContainer>
						<AreaChart data={monthlySalesData}>
							<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
							<XAxis dataKey='month' stroke='#9CA3AF' />
							<YAxis 
								stroke='#9CA3AF' 
								tick={{ fontSize: 15 }} // Thay Ä‘á»•i kÃ­ch thÆ°á»›c chá»¯ á»Ÿ Ä‘Ã¢y
							/>
							<Tooltip
								content={({ active, payload }) => {
									if (active && payload && payload.length) {
										return (
											<div className='bg-gray-800 p-2 rounded'>
												<p className='text-white'>{`Doanh thu: ${formatCurrency(payload[0].value)}`}</p>
											</div>
										);
									}
									return null;
								}}
								contentStyle={{ backgroundColor: "rgba(31, 41, 55, 0.8)", borderColor: "#4B5563" }}
								itemStyle={{ color: "#E5E7EB" }}
							/>
							<Area 
								type='monotone' 
								dataKey='sales' 
								stroke='#8B5CF6' 
								fill='#8B5CF6' 
								fillOpacity={0.3} 
							/>
						</AreaChart>
					</ResponsiveContainer>
				</div>
			)}
		</motion.div>
	);
};

export default SalesOverviewChart;

```

### client\src\components\dashboard\settings\ConnectedAccounts.jsx
```jsx
import { useState } from "react";
import SettingSection from "./SettingSection";
import { HelpCircle, Plus } from "lucide-react";

const ConnectedAccounts = () => {
	const [connectedAccounts, setConnectedAccounts] = useState([
		{
			id: 1,
			name: "Google",
			connected: true,
			icon: "/google.png",
		},
		{
			id: 2,
			name: "Facebook",
			connected: false,
			icon: "/facebook.svg",
		},
		{
			id: 3,
			name: "Twitter",
			connected: true,
			icon: "/x.png",
		},
	]);
	return (
		<SettingSection icon={HelpCircle} title={"Connected Accounts"}>
			{connectedAccounts.map((account) => (
				<div key={account.id} className='flex items-center justify-between py-3'>
					<div className='flex gap-1'>
						<img src={account.icon} alt='Social img' className='size-6 object-cover rounded-full mr-2' />
						<span className='text-gray-300'>{account.name}</span>
					</div>
					<button
						className={`px-3 py-1 rounded ${
							account.connected ? "bg-green-600 hover:bg-green-700" : "bg-gray-600 hover:bg-gray-700"
						} transition duration-200`}
						onClick={() => {
							setConnectedAccounts(
								connectedAccounts.map((acc) => {
									if (acc.id === account.id) {
										return {
											...acc,
											connected: !acc.connected,
										};
									}
									return acc;
								})
							);
						}}
					>
						{account.connected ? "Connected" : "Connect"}
					</button>
				</div>
			))}
			<button className='mt-4 flex items-center text-indigo-400 hover:text-indigo-300 transition duration-200'>
				<Plus size={18} className='mr-2' /> Add Account
			</button>
		</SettingSection>
	);
};
export default ConnectedAccounts;

```

### client\src\components\dashboard\settings\DangerZone.jsx
```jsx
import { motion } from "framer-motion";
import { Trash2 } from "lucide-react";

const DangerZone = () => {
	return (
		<motion.div
			className='bg-red-900 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-red-700 mb-8'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ duration: 0.5, delay: 0.2 }}
		>
			<div className='flex items-center mb-4'>
				<Trash2 className='text-red-400 mr-3' size={24} />
				<h2 className='text-xl font-semibold text-gray-100'>Danger Zone</h2>
			</div>
			<p className='text-gray-300 mb-4'>Permanently delete your account and all of your content.</p>
			<button
				className='bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded 
      transition duration-200'
			>
				Delete Account
			</button>
		</motion.div>
	);
};
export default DangerZone;

```

### client\src\components\dashboard\settings\Notifications.jsx
```jsx
import { useState } from "react";
import SettingSection from "./SettingSection";
import { Bell } from "lucide-react";
import ToggleSwitch from "./ToggleSwitch";

const Notifications = () => {
	const [notifications, setNotifications] = useState({
		push: true,
		email: false,
		sms: true,
	});

	return (
		<SettingSection icon={Bell} title={"Notifications"}>
			<ToggleSwitch
				label={"Push Notifications"}
				isOn={notifications.push}
				onToggle={() => setNotifications({ ...notifications, push: !notifications.push })}
			/>
			<ToggleSwitch
				label={"Email Notifications"}
				isOn={notifications.email}
				onToggle={() => setNotifications({ ...notifications, email: !notifications.email })}
			/>
			<ToggleSwitch
				label={"SMS Notifications"}
				isOn={notifications.sms}
				onToggle={() => setNotifications({ ...notifications, sms: !notifications.sms })}
			/>
		</SettingSection>
	);
};
export default Notifications;

```

### client\src\components\dashboard\settings\Profile.jsx
```jsx
import { User } from "lucide-react";
import SettingSection from "./SettingSection";

const Profile = () => {
	return (
		<SettingSection icon={User} title={"Profile"}>
			<div className='flex flex-col sm:flex-row items-center mb-6'>
				<img
					src='https://randomuser.me/api/portraits/men/3.jpg'
					alt='Profile'
					className='rounded-full w-20 h-20 object-cover mr-4'
				/>

				<div>
					<h3 className='text-lg font-semibold text-gray-100'>John Doe</h3>
					<p className='text-gray-400'>john.doe@example.com</p>
				</div>
			</div>

			<button className='bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition duration-200 w-full sm:w-auto'>
				Edit Profile
			</button>
		</SettingSection>
	);
};
export default Profile;

```

### client\src\components\dashboard\settings\Security.jsx
```jsx
import { Lock } from "lucide-react";
import SettingSection from "./SettingSection";
import ToggleSwitch from "./ToggleSwitch";
import { useState } from "react";

const Security = () => {
	const [twoFactor, setTwoFactor] = useState(false);

	return (
		<SettingSection icon={Lock} title={"Security"}>
			<ToggleSwitch
				label={"Two-Factor Authentication"}
				isOn={twoFactor}
				onToggle={() => setTwoFactor(!twoFactor)}
			/>
			<div className='mt-4'>
				<button
					className='bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded 
        transition duration-200
        '
				>
					Change Password
				</button>
			</div>
		</SettingSection>
	);
};
export default Security;

```

### client\src\components\dashboard\settings\SettingSection.jsx
```jsx
import { motion } from "framer-motion";

const SettingSection = ({ icon: Icon, title, children }) => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-lg shadow-lg rounded-xl p-6 border border-gray-700 mb-8'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ duration: 0.5 }}
		>
			<div className='flex items-center mb-4'>
				<Icon className='text-indigo-400 mr-4' size='24' />
				<h2 className='text-xl font-semibold text-gray-100'>{title}</h2>
			</div>
			{children}
		</motion.div>
	);
};
export default SettingSection;

```

### client\src\components\dashboard\settings\ToggleSwitch.jsx
```jsx
const ToggleSwitch = ({ label, isOn, onToggle }) => {
	return (
		<div className='flex items-center justify-between py-3'>
			<span className='text-gray-300'>{label}</span>
			<button
				className={`
        relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none
        ${isOn ? "bg-indigo-600" : "bg-gray-600"}
        `}
				onClick={onToggle}
			>
				<span
					className={`inline-block size-4 transform transition-transform bg-white rounded-full 
            ${isOn ? "translate-x-6" : "translate-x-1"}
            `}
				/>
			</button>
		</div>
	);
};
export default ToggleSwitch;

```

### client\src\components\dashboard\users\UserActivityHeatmap.jsx
```jsx
import { Bar, BarChart, CartesianGrid, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from "recharts";
import { motion } from "framer-motion";

const userActivityData = [
	{ name: "Mon", "0-4": 20, "4-8": 40, "8-12": 60, "12-16": 80, "16-20": 100, "20-24": 30 },
	{ name: "Tue", "0-4": 30, "4-8": 50, "8-12": 70, "12-16": 90, "16-20": 110, "20-24": 40 },
	{ name: "Wed", "0-4": 40, "4-8": 60, "8-12": 80, "12-16": 100, "16-20": 120, "20-24": 50 },
	{ name: "Thu", "0-4": 50, "4-8": 70, "8-12": 90, "12-16": 110, "16-20": 130, "20-24": 60 },
	{ name: "Fri", "0-4": 60, "4-8": 80, "8-12": 100, "12-16": 120, "16-20": 140, "20-24": 70 },
	{ name: "Sat", "0-4": 70, "4-8": 90, "8-12": 110, "12-16": 130, "16-20": 150, "20-24": 80 },
	{ name: "Sun", "0-4": 80, "4-8": 100, "8-12": 120, "12-16": 140, "16-20": 160, "20-24": 90 },
];

const UserActivityHeatmap = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.4 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>User Activity Heatmap</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<BarChart data={userActivityData}>
						<CartesianGrid strokeDasharray='3 3' stroke='#374151' />
						<XAxis dataKey='name' stroke='#9CA3AF' />
						<YAxis stroke='#9CA3AF' />
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
						<Bar dataKey='0-4' stackId='a' fill='#6366F1' />
						<Bar dataKey='4-8' stackId='a' fill='#8B5CF6' />
						<Bar dataKey='8-12' stackId='a' fill='#EC4899' />
						<Bar dataKey='12-16' stackId='a' fill='#10B981' />
						<Bar dataKey='16-20' stackId='a' fill='#F59E0B' />
						<Bar dataKey='20-24' stackId='a' fill='#3B82F6' />
					</BarChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default UserActivityHeatmap;

```

### client\src\components\dashboard\users\UserDemographicsChart.jsx
```jsx
import { motion } from "framer-motion";
import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } from "recharts";

const COLORS = ["#8884d8", "#82ca9d", "#ffc658", "#ff8042", "#0088FE"];

const userDemographicsData = [
	{ name: "18-24", value: 20 },
	{ name: "25-34", value: 30 },
	{ name: "35-44", value: 25 },
	{ name: "45-54", value: 15 },
	{ name: "55+", value: 10 },
];

const UserDemographicsChart = () => {
	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700 lg:col-span-2'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.5 }}
		>
			<h2 className='text-xl font-semibold text-gray-100 mb-4'>User Demographics</h2>
			<div style={{ width: "100%", height: 300 }}>
				<ResponsiveContainer>
					<PieChart>
						<Pie
							data={userDemographicsData}
							cx='50%'
							cy='50%'
							outerRadius={100}
							fill='#8884d8'
							dataKey='value'
							label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
						>
							{userDemographicsData.map((entry, index) => (
								<Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
							))}
						</Pie>
						<Tooltip
							contentStyle={{
								backgroundColor: "rgba(31, 41, 55, 0.8)",
								borderColor: "#4B5563",
							}}
							itemStyle={{ color: "#E5E7EB" }}
						/>
						<Legend />
					</PieChart>
				</ResponsiveContainer>
			</div>
		</motion.div>
	);
};
export default UserDemographicsChart;

```

### client\src\components\dashboard\users\UserGrowthChart.jsx
```jsx
import { useState, useEffect } from "react";
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from "recharts";
import { motion } from "framer-motion";

const UserGrowthChart = () => {
    const [userGrowthData, setUserGrowthData] = useState([]);

    const fetchUserGrowthData = async () => {
        try {
            const response = await fetch('/api/usertable/growth');
            if (!response.ok) throw new Error('Lá»—i khi láº¥y dá»¯ liá»‡u tÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng');
            const data = await response.json();
            setUserGrowthData(data);
        } catch (error) {
            console.error('Lá»—i:', error);
        }
    };

    useEffect(() => {
        fetchUserGrowthData();
    }, []);

    return (
        <motion.div
            className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.3 }}
        >
            <h2 className='text-xl font-semibold text-gray-100 mb-4'>Má»©c tÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng</h2>
            <div className='h-[320px]'>
                <ResponsiveContainer width='100%' height='100%'>
                    <LineChart data={userGrowthData}>
                        <CartesianGrid strokeDasharray='3 3' stroke='#374151' />
                        <XAxis dataKey='month' stroke='#9CA3AF' />
                        <YAxis stroke='#9CA3AF' />
                        <Tooltip
                            contentStyle={{
                                backgroundColor: "rgba(31, 41, 55, 0.8)",
                                borderColor: "#4B5563",
                            }}
                            itemStyle={{ color: "#E5E7EB" }}
                        />
                        <Line
                            type='monotone'
                            dataKey='users'
                            stroke='#8B5CF6'
                            strokeWidth={2}
                            dot={{ fill: "#8B5CF6", strokeWidth: 2, r: 4 }}
                            activeDot={{ r: 8 }}
                        />
                    </LineChart>
                </ResponsiveContainer>
            </div>
        </motion.div>
    );
};

export default UserGrowthChart;

```

### client\src\components\dashboard\users\UsersTable.jsx
```jsx
import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { Modal, notification } from 'antd';
import { Search, Edit, Trash2, X, Save, Mail, User, Users } from "lucide-react";

const UsersTable = () => {
	const [searchTerm, setSearchTerm] = useState("");
	const [users, setUsers] = useState([]);
	const [filteredUsers, setFilteredUsers] = useState([]);
	const [currentPage, setCurrentPage] = useState(1);
	const [usersPerPage] = useState(5);
	const [selectedUser, setSelectedUser] = useState(null);
	const [editForm, setEditForm] = useState({ name: '', email: '', role: '' });

	const fetchUsers = async () => {
		try {
			const response = await fetch('/api/usertable');
			if (!response.ok) throw new Error('Lá»—i khi láº¥y dá»¯ liá»‡u');
			const data = await response.json();
			setUsers(data);
			setFilteredUsers(data);
		} catch (error) {
			console.error('Lá»—i:', error);
		}
	};
	useEffect(() => {
		fetchUsers();
	}, []);
	const handleSearch = (e) => {
		const term = e.target.value.toLowerCase();
		setSearchTerm(term);
		const filtered = users.filter(
			(user) => user.name.toLowerCase().includes(term) || user.email.toLowerCase().includes(term)
		);
		setFilteredUsers(filtered);
		setCurrentPage(1);
	};

	const indexOfLastUser = currentPage * usersPerPage;
	const indexOfFirstUser = indexOfLastUser - usersPerPage;
	const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);

	const paginate = (pageNumber) => setCurrentPage(pageNumber);

	const handleDelete = (userId) => {
		// Sá»­ dá»¥ng Modal xÃ¡c nháº­n xÃ³a
		Modal.confirm({
		  title: 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a ngÆ°á»i dÃ¹ng nÃ y?',
		  content: 'HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c.',
		  okText: 'XÃ³a',
		  okType: 'danger',
		  cancelText: 'Há»§y',
		  onOk: async () => {
			try {
			  // Thá»±c hiá»‡n yÃªu cáº§u xÃ³a
			  const response = await fetch(`/api/usertable/${userId}`, {
				method: 'DELETE',
			  });
	  
			  if (!response.ok) throw new Error('Lá»—i khi xÃ³a ngÆ°á»i dÃ¹ng');
			  
			  // Fetch láº¡i danh sÃ¡ch ngÆ°á»i dÃ¹ng
			  fetchUsers();
	  
			  // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
			  notification.success({
				message: 'ThÃ nh cÃ´ng',
				description: 'NgÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng.',
				placement: 'topRight',
			  });
			} catch (error) {
			  // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
			  notification.error({
				message: 'Lá»—i',
				description: 'ÄÃ£ xáº£y ra lá»—i khi xÃ³a ngÆ°á»i dÃ¹ng. Vui lÃ²ng thá»­ láº¡i!',
				placement: 'topRight',
			  });
			  console.error('Lá»—i:', error);
			}
		  },
		  onCancel: () => {
			// Xá»­ lÃ½ khi ngÆ°á»i dÃ¹ng há»§y bá»
			console.log('Há»§y bá» xÃ³a');
		  }
		});
	  };

	const handleEdit = (user) => {
		setSelectedUser(user);
		setEditForm({ name: user.name, email: user.email, role: user.role });
	};

	const handleUpdate = async () => {
		try {
			const response = await fetch(`/api/usertable/${selectedUser._id}`, {
				method: 'PUT',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(editForm),
			});
			if (!response.ok) throw new Error('Lá»—i khi cáº­p nháº­t ngÆ°á»i dÃ¹ng');
			fetchUsers();
			setSelectedUser(null);
		} catch (error) {
			console.error('Lá»—i:', error);
		}
	};

	const pageNumbers = [];
	for (let i = 1; i <= Math.ceil(filteredUsers.length / usersPerPage); i++) {
		pageNumbers.push(i);
	}

	return (
		<motion.div
			className='bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700'
			initial={{ opacity: 0, y: 20 }}
			animate={{ opacity: 1, y: 0 }}
			transition={{ delay: 0.2 }}
		>
			<div className='flex justify-between items-center mb-6'>
				<h2 className='text-xl font-semibold text-gray-100'>NgÆ°á»i dÃ¹ng</h2>
				<div className='relative'>
				<input 
					type="search"
					placeholder="TÃ¬m ngÆ°á»i dÃ¹ng"
					className="text-white bg-gray-700 placeholder-gray-400 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
					value={searchTerm}
					onChange={handleSearch}
				/>
					<Search className='absolute left-3 top-2.5 text-gray-400' size={18} />
				</div>
			</div>

			<div className='overflow-x-auto'>
  <table className='min-w-full divide-y divide-gray-700'>
    <thead>
      <tr>
        <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>TÃªn</th>
        <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Email</th>
        <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Vai trÃ²</th>
        <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>Tráº¡ng thÃ¡i</th>
        <th className='px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider'>HÃ nh Äá»™ng</th>
      </tr>
    </thead>

    <tbody className='divide-y divide-gray-700'>
      {currentUsers.map((user) => (
        <motion.tr
          key={user._id}
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ duration: 0.3 }}
        >
          <td className='px-6 py-4 whitespace-nowrap'>
            <div className='flex items-center'>
              <div className='flex-shrink-0 h-10 w-10'>
                <img
                  src={user.avatar || 'https://res.cloudinary.com/dackig67m/image/upload/v1730489645/5db7d294a77fbe0fbfca4eb233afc01b_vt0x30.jpg'}  // Link áº£nh tá»« Ä‘á»‘i tÆ°á»£ng ngÆ°á»i dÃ¹ng
                  alt={user.name}  // ThÃªm alt cho áº£nh
                  className='h-10 w-10 rounded-full'  // Äáº£m báº£o áº£nh cÃ³ hÃ¬nh trÃ²n
                />
              </div>
              <div className='ml-4'>
                <div className='text-sm font-medium text-gray-100'>{user.name}</div>
              </div>
            </div>
          </td>
          <td className='px-6 py-4 whitespace-nowrap'>
            <div className='text-sm text-gray-300'>{user.email}</div>
          </td>
          <td className='px-6 py-4 whitespace-nowrap'>
            <span className='px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-800 text-blue-100'>
              {user.role}
            </span>
          </td>
          <td className='px-6 py-4 whitespace-nowrap'>
            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${user.isVerified ? "bg-green-800 text-green-100" : "bg-red-800 text-red-100"}`}>
              {user.isVerified ? "Active" : "Inactive"}
            </span>
          </td>
          <td className='px-6 py-4 whitespace-nowrap text-sm text-white'>
            <button className='text-indigo-400 hover:text-indigo-300 mr-2' onClick={() => handleEdit(user)}><Edit size={18} /></button>
            <button className='text-red-400 hover:text-red-300' onClick={() => handleDelete(user._id)}><Trash2 size={18} /></button>
          </td>
        </motion.tr>
      ))}
    </tbody>
  </table>
</div>


			{/* PhÃ¢n trang */}
			<div className='flex justify-center mt-4'>
				{pageNumbers.map(number => (
					<button
						key={number}
						onClick={() => paginate(number)}
						className={`mx-1 px-3 py-1 rounded-md ${number === currentPage ? 'bg-blue-600 text-white' : 'bg-gray-600 text-gray-300'}`}
					>
						{number}
					</button>
				))}
			</div>

			{/* Form chá»‰nh sá»­a */}
{selectedUser && (
  <div className='fixed inset-0 flex items-center justify-center bg-black bg-opacity-50'>
    <div className='p-6 bg-gray-800 rounded-lg shadow-xl w-1/3 transform scale-110 transition-all duration-500'>
      <h2 className='text-2xl font-Roboto text-gray-100 flex items-center'>
        <Edit className='mr-3 text-indigo-300' size={24} /> Chá»‰nh sá»­a ngÆ°á»i dÃ¹ng
      </h2>
      {/* TÃªn */}
      <div className='flex items-center mt-4'>
        <User className='text-gray-200' size={20} />
        <input 
          value={editForm.name} 
          onChange={(e) => setEditForm({ ...editForm, name: e.target.value })} 
          className='bg-gray-800 text-white p-3 rounded-lg ml-3 w-full placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-200 ease-in-out shadow-md hover:shadow-lg'
          placeholder='TÃªn' 
        />
      </div>

      {/* Email */}
      <div className='flex items-center mt-4'>
        <Mail className='text-gray-200' size={20} />
        <input 
          type='email' 
          value={editForm.email} 
          onChange={(e) => setEditForm({ ...editForm, email: e.target.value })} 
          className='bg-gray-800 text-white p-3 rounded-lg ml-3 w-full placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-200 ease-in-out shadow-md hover:shadow-lg'
          placeholder='Email' 
        />
      </div>

      {/* Vai trÃ² */}
      <div className='flex items-center mt-4'>
        <Users className='text-gray-200' size={20} />
        <select 
          value={editForm.role} 
          onChange={(e) => setEditForm({ ...editForm, role: e.target.value })} 
          className='bg-gray-800 text-white p-3 rounded-lg ml-3 w-full placeholder-gray-300 focus:ring-2 focus:ring-indigo-400 transition duration-200 ease-in-out shadow-md hover:shadow-lg'
        >
          <option value='Customer'>Customer</option>
          <option value='HotelManager'>Hotel Manager</option>
          <option value='Admin'>Admin</option>
        </select>
      </div>

      {/* CÃ¡c nÃºt Cáº­p nháº­t vÃ  Há»§y */}
      <div className='flex justify-end mt-6 space-x-4'>
        <button 
          onClick={handleUpdate} 
          className='flex items-center bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-500 transition duration-300 transform hover:scale-105 shadow-md hover:shadow-lg'
        >
          <Save className='mr-2' size={20} /> Cáº­p nháº­t
        </button>
        <button 
          onClick={() => setSelectedUser(null)} 
          className='flex items-center bg-gray-600 text-white p-3 rounded-lg hover:bg-gray-500 transition duration-300 transform hover:scale-105 shadow-md hover:shadow-lg'
        >
          <X className='mr-2' size={20} /> Há»§y
        </button>
      </div>
    </div>
  </div>
)}
		</motion.div>
	);
};

export default UsersTable;

```

### client\src\components\DetailHotel\HotelImage.jsx
```jsx
import React, { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import axios from 'axios';
import { Modal, Button, Image } from 'antd';
import './Introduce.css';
const HotelImage = () => {
  const { hotelId } = useParams();
  const [images, setImages] = useState({ hotelImages: [], roomImages: [] });
  const [isModalVisible, setIsModalVisible] = useState(false);

  useEffect(() => {
    const fetchImages = async () => {
      try {
        const response = await axios.get(`/api/detail/${hotelId}/image`);
        setImages(response.data);
      } catch (error) {
        console.error('Error fetching hotel images:', error);
      }
    };

    fetchImages();
  }, [hotelId]);

  const hasHotelImages = Array.isArray(images.hotelImages) && images.hotelImages.length > 0;
  const hasRoomImages = Array.isArray(images.roomImages) && images.roomImages.length > 0;

  const showModal = () => {
    setIsModalVisible(true);
  };

  const handleCancel = () => {
    setIsModalVisible(false);
  };

  //táº¡o URL má»›i tá»« Cloudinary Ä‘á»ƒ resize áº£nh
  const resizeImage = (url, width, height) => {
    return url.replace('/upload/', `/upload/w_${width},h_${height},c_fill/`);
  };

  // DÃ¹ng Cloudinary
  const getResponsiveSize = () => {
    const width = window.innerWidth; // Láº¥y chiá»u rá»™ng cá»§a cá»­a sá»•
    if (width >= 1024) { // Desktop
      return { hotel: { width: 700, height: 400 }, room: { width: 200, height: 200 } };
    } else if (width >= 640) { // Tablet
      return { hotel: { width: 500, height: 300 }, room: { width: 150, height: 150 } };
    } else { // Mobile
      return { hotel: { width: 300, height: 200 }, room: { width: 120, height: 120 } };
    }
  };

  const { hotel, room } = getResponsiveSize();

  return (
    <div className="flex flex-col md:flex-row justify-center md:h-auto p-4">
      {/* Cá»™t bÃªn trÃ¡i: áº¢nh khÃ¡ch sáº¡n */}
      <div className="mr-0 md:mr-8 mb-4 md:mb-0 flex-shrink-0 w-full sm:w-[500px] md:w-[700px] h-[300px] sm:h-[400px]">
        {hasHotelImages && (
          <div className="w-full h-full overflow-hidden bg-gray-100 flex items-center justify-center">
            <Image
  preview={false}
  src={resizeImage(images.hotelImages[0], hotel.width, hotel.height)}
  alt="áº¢nh KhÃ¡ch Sáº¡n"
  className="object-cover object-center w-full h-full max-w-full max-h-full"
/>
          </div>
        )}
      </div>
  
      {/* Cá»™t bÃªn pháº£i: áº¢nh cÃ¡c phÃ²ng */}
      <div className="flex flex-col w-full md:w-auto relative">
        {/* DÃ¹ng flex Ä‘á»ƒ áº£nh phÃ²ng náº±m ngang vÃ  cÃ³ thá»ƒ cuá»™n */}
        <div className="flex sm:flex-row md:grid md:grid-cols-2 sm:grid-cols-1 overflow-x-auto ">
          {hasRoomImages &&
            images.roomImages.slice(0, 4).map((image, index) => (
              <div
                key={index}
                className="w-[120px] sm:w-[150px] md:w-[200px] h-[120px] sm:h-[150px] md:h-[200px] overflow-hidden bg-gray-100 flex items-center mx-1 my-1 justify-center"
              >
                <Image
                  preview={false}
                  src={resizeImage(image, room.width, room.height)}
                  alt={`áº¢nh PhÃ²ng ${index + 1}`}
                  className="object-cover w-full h-full max-w-full max-h-full"
                />
              </div>
            ))}
        </div>
  
        {hasRoomImages && (
          <Button
            type="primary"
            onClick={showModal}
            className="absolute bottom-2 right-2 z-10 text-white bg-blue-500 rounded-md transition-opacity duration-300 hover:opacity-80"
          >
            Xem thÃªm
          </Button>
        )}
      </div>
  
      {/* Modal Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£ áº£nh */}
      <Modal
        title="Táº¥t cáº£ áº£nh"
        visible={isModalVisible}
        onCancel={handleCancel}
        footer={null}
        width="90%" // Responsive modal width
      >
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
          {hasHotelImages &&
            images.hotelImages.map((image, index) => (
              <div
                key={`hotel-${index}`}
                className="w-full h-40 sm:h-60 md:h-72 overflow-hidden bg-gray-100 flex items-center justify-center"
              >
                <Image
                  preview={{ src: resizeImage(image, 600, 400) }}
                  src={resizeImage(image, 300, 200)}
                  alt={`áº¢nh KhÃ¡ch Sáº¡n ${index + 1}`}
                  className="object-cover w-full h-full cursor-pointer max-w-full max-h-full"
                />
              </div>
            ))}
          {hasRoomImages &&
            images.roomImages.map((image, index) => (
              <div
                key={`room-${index}`}
                className="w-full h-40 sm:h-60 md:h-72 overflow-hidden bg-gray-100 flex items-center justify-center"
              >
                <Image
                  preview={{ src: resizeImage(image, 600, 400) }}
                  src={resizeImage(image, 300, 200)}
                  alt={`áº¢nh PhÃ²ng ${index + 1}`}
                  className="object-cover w-full h-full cursor-pointer max-w-full max-h-full"
                />
              </div>
            ))}
        </div>
      </Modal>
    </div>
  );
  
};

export default HotelImage;

```

### client\src\components\DetailHotel\Introduce.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { useParams } from 'react-router-dom';
import './Introduce.css'; // Äáº£m báº£o Ä‘Ã£ nháº­p tá»‡p CSS cá»§a báº¡n

const Introduce = () => {
  const { hotelId } = useParams(); // Nháº­n hotelId tá»« URL
  const [hotelDescription, setHotelDescription] = useState('');
  const [isOpen, setIsOpen] = useState(true); // Má»Ÿ máº·c Ä‘á»‹nh

  useEffect(() => {
    const fetchHotelData = async () => {
      try {
        const response = await axios.get(`/api/detail/${hotelId}`); // Sá»­a Ä‘á»•i URL cho phÃ¹ há»£p
        setHotelDescription(response.data.hotel.description); // Láº¥y mÃ´ táº£ khÃ¡ch sáº¡n tá»« dá»¯ liá»‡u
      } catch (error) {
        console.error('Error fetching hotel data:', error);
      }
    };

    fetchHotelData();
  }, [hotelId]);

  const toggleAccordion = () => {
    setIsOpen(!isOpen); // Chuyá»ƒn tráº¡ng thÃ¡i khi nháº¥n vÃ o tiÃªu Ä‘á»
  };

  const accordionData = [
    {
      question: "Giá»›i thiá»‡u",
      answer: (
        <p className="mb-2 text-black dark:text-gray-800">
          {hotelDescription || 'Äang táº£i mÃ´ táº£...'}
        </p>
      ),
    },
  ];

  return (
    <div className="accordion-container">
      {accordionData.map((item, index) => (
        <div key={index} className="accordion-item">
          <button
            onClick={toggleAccordion}
            className={`accordion-button ${isOpen ? 'active' : ''}`}
          >
            <span>{item.question}</span>
            <svg
              className={`w-6 h-6 transform transition-transform duration-200 ${isOpen ? 'rotate-180' : 'rotate-0'}`}
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fillRule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 011.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clipRule="evenodd"
              />
            </svg>
          </button>
          {isOpen && (
            <div className="accordion-content">
              {item.answer}
            </div>
          )}
        </div>
      ))}
    </div>
  );
};

export default Introduce;

```

### client\src\components\DetailHotel\Orderroom.jsx
```jsx
import React, { useEffect, useState } from "react";
import { FaMapMarkerAlt, FaStar } from "react-icons/fa";
import axios from "axios";
import { useNavigate, useParams } from "react-router-dom";
import { motion } from "framer-motion";
import { Heart } from "lucide-react";

const OrderRoom = () => {
  const { hotelId } = useParams();
  const navigate = useNavigate();
  const [hotel, setHotel] = useState(null);
  const [averageRating, setAverageRating] = useState(0);
  const [totalRatings, setTotalRatings] = useState(0);
  const [lowestPrice, setLowestPrice] = useState(0);
  const [liked, setLiked] = useState(false);

  useEffect(() => {
    const fetchHotel = async () => {
      try {
        const response = await axios.get(`/api/detail/${hotelId}`);
        setHotel(response.data.hotel);
        setAverageRating(response.data.averageRating);
        setTotalRatings(response.data.totalRatings);
        setLowestPrice(response.data.lowestPrice);

        // Kiá»ƒm tra tráº¡ng thÃ¡i yÃªu thÃ­ch cá»§a khÃ¡ch sáº¡n
        const favoriteResponse = await axios.get(`/api/favorite/${hotelId}`, {
          params: { userId: localStorage.getItem('userId') } // Láº¥y userId tá»« localStorage
        });
        setLiked(favoriteResponse.data.isFavorite);
      } catch (error) {
        console.error("Error fetching hotel data:", error);
      }
    };

    fetchHotel();
  }, [hotelId]);

  const handleSelectRoom = () => {
    navigate(`/detailroom/${hotel._id}`);
  };

  const toggleFavorite = async () => {
    try {
      setLiked(!liked);  // Thay Ä‘á»•i tráº¡ng thÃ¡i yÃªu thÃ­ch ngay láº­p tá»©c

      // API call Ä‘á»ƒ thay Ä‘á»•i tráº¡ng thÃ¡i yÃªu thÃ­ch
      if (liked) {
        await axios.delete(`/api/favorite/${hotelId}`, {
          data: { userId: localStorage.getItem('userId') }
        });
      } else {
        await axios.post(`/api/favorite`, {
          userId: localStorage.getItem('userId'),
          hotelId,
        });
      }
    } catch (error) {
      console.error("Error updating favorite status:", error);
    }
  };

  if (!hotel) {
    return <div>Loading...</div>;
  }

  const stars = hotel.stars || 1;

  return (
    <motion.div
      initial={{ opacity: 0, y: -20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.5 }}
      className="order-room-container p-4"
    >
      <div className="hotel-info mb-4">
        <div className="flex flex-col sm:flex-row ml-2 items-start sm:items-center">
          <h1 className="hotel-name text-xl sm:text-2xl md:text-3xl font-bold">
            {hotel.name}
          </h1>
          <div className="hotel-rating flex items-center mt-2 sm:mt-0">
            <span className="rating-stars flex space-x-1 text-base sm:text-lg lg:text-xl ml-4">
              {[...Array(5)].map((_, index) => (
                <FaStar key={index} color={index < stars ? "gold" : "gray"} />
              ))}
            </span>
            <span className="hotel-category hidden md:inline ml-2 text-xs sm:text-sm md:text-base">
              KhÃ¡ch sáº¡n {stars} sao
            </span>
          </div>
        </div>

        <div className="hotel-location flex items-center text-sm sm:text-base mb-4 mt-2 sm:mt-4">
          <FaMapMarkerAlt className="mr-2 text-lg sm:text-xl" />
          <span>{hotel.location}</span>
        </div>

        <div className="hotel-rating-summary flex items-left mt-2 sm:mt-4">
          <button className="bg-yellow-400 text-white py-1 px-3 rounded-lg">
            {averageRating.toFixed(1)}
          </button>
          <span className="ml-2 text-xs sm:text-sm">{totalRatings} Ä‘Ã¡nh giÃ¡</span>
        </div>
      </div>

      {/* Booking Section */}
      <div className="hotel-booking flex flex-col sm:flex-row justify-between items-center mt-4">
        <span className="price text-lg sm:text-xl font-bold">
          {lowestPrice.toLocaleString('vi-VN')} VND
        </span>
        <div className="flex items-center gap-2 mt-2 sm:mt-0">
          {/* NÃºt yÃªu thÃ­ch */}
          <button onClick={toggleFavorite} className="relative group">
            <Heart 
              className={liked ? "text-red-500" : "text-black"} 
              fill={liked ? "currentColor" : "none"} 
              size={39} 
            />
          </button>

          {/* NÃºt chá»n phÃ²ng */}
          <button
            className="book-now-btn bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg w-full sm:w-auto text-sm sm:text-base"
            onClick={handleSelectRoom}
          >
            Chá»n phÃ²ng
          </button>
        </div>
      </div>
    </motion.div>
  );
};

export default OrderRoom;

```

### client\src\components\DetailHotel\RatingCard.jsx
```jsx
// components/RatingCard.jsx
import React, { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';

const RatingCard = () => {
  const { hotelId } = useParams(); // Láº¥y hotelId tá»« URL
  const [ratings, setRatings] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchRatings = async () => {
      try {
        const response = await fetch(`/api/detail/${hotelId}/ratings`);
        if (!response.ok) {
          throw new Error('CÃ³ lá»—i xáº£y ra khi láº¥y Ä‘Ã¡nh giÃ¡');
        }
        const data = await response.json();
        setRatings(data);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchRatings();
  }, [hotelId]);

  // HÃ m tÃ­nh thá»i gian Ä‘Ã£ trÃ´i qua
  const getTimeAgo = (date) => {
    const now = new Date();
    const diffInSeconds = Math.floor((now - new Date(date)) / 1000);
    
    if (diffInSeconds < 60) return `${diffInSeconds} giÃ¢y trÆ°á»›c`;
    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} phÃºt trÆ°á»›c`;
    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} giá» trÆ°á»›c`;
    return `${Math.floor(diffInSeconds / 86400)} ngÃ y trÆ°á»›c`;
  };

  if (loading) return <div>Loading...</div>;
  if (error) return <div>{error}</div>;

  return (
    <div>
      {ratings.map((rating) => {
        const { user, comment, rating: score, date, lastModified } = rating;

        // Kiá»ƒm tra xem user cÃ³ tá»“n táº¡i khÃ´ng
        const userName = user ? user.name : "NgÆ°á»i dÃ¹ng khÃ´ng xÃ¡c Ä‘á»‹nh";
        const userAvatar = user && user.avatar ? user.avatar : 'https://img.freepik.com/premium-vector/default-avatar-profile-icon-social-media-user-image-gray-avatar-icon-blank-profile-silhouette-vector-illustration_561158-3485.jpg';

        return (
          <div key={rating._id} className="text-black flex items-start mb-4 p-2 border border-gray-200 rounded shadow-sm">
            <img 
              src={userAvatar} 
              alt={userName} 
              className="w-10 h-10 rounded-full mr-3" 
            />
            <div className="flex-grow">
              <div className="flex justify-between text-black">
                <h4 className="font-bold">{userName}</h4>
                <span className="text-sm text-gray-500">{getTimeAgo(lastModified || date)}</span>
              </div>
              <div className="text-yellow-500">
                {Array.from({ length: 10 }, (_, index) => (
                  <span key={index} className={index < score ? "â˜…" : "â˜†"} />
                ))}
              </div>
              <p className="mt-1">{comment}</p>
            </div>
          </div>
        );
      })}
    </div>
  );
};

export default RatingCard;

```

### client\src\components\DetailRoom\DetailRoom.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { useParams, useNavigate } from "react-router-dom"; // Sá»­ dá»¥ng useNavigate
import { Modal, notification } from 'antd'; // ThÆ° viá»‡n Ant Design modal vÃ  message

const DetailRoom = () => {
  const { hotelId } = useParams();
  const [roomDetails, setRoomDetails] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isModalVisible, setIsModalVisible] = useState(false); // Tráº¡ng thÃ¡i modal
  const [currentImage, setCurrentImage] = useState(''); // Tráº¡ng thÃ¡i áº£nh hiá»‡n táº¡i cho modal
  const navigate = useNavigate(); // Khai bÃ¡o useNavigate Ä‘á»ƒ Ä‘iá»u hÆ°á»›ng

  useEffect(() => {
    const fetchRoomDetails = async () => {
      try {
        const response = await axios.get(`/api/detail/${hotelId}/rooms`);
        setRoomDetails(response.data);
        setLoading(false);
      } catch (error) {
        setError('CÃ³ lá»—i xáº£y ra khi láº¥y thÃ´ng tin phÃ²ng.');
        setLoading(false);
      }
    };

    fetchRoomDetails();
  }, [hotelId]);

  const showModal = (image) => {
    setCurrentImage(image); // Äáº·t áº£nh hiá»‡n táº¡i cho modal
    setIsModalVisible(true); // Hiá»ƒn thá»‹ modal
  };

  const handleCancel = () => {
    setIsModalVisible(false); // ÄÃ³ng modal
  };

  const handleBookRoom = (roomId, remainingRooms) => {

    // Kiá»ƒm tra sá»‘ phÃ²ng cÃ²n láº¡i
    if (remainingRooms <= 0) {
      // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o náº¿u khÃ´ng cÃ²n phÃ²ng
      notification.info({
        message: "ÄÃ£ háº¿t phÃ²ng.",
        description: "Vui lÃ²ng chá»n phÃ²ng khÃ¡c.",
      });
      return; // Dá»«ng hÃ m náº¿u khÃ´ng cÃ²n phÃ²ng
    }

    // Äiá»u hÆ°á»›ng sang trang thanh toÃ¡n vÃ  truyá»n ID phÃ²ng
    navigate(`checkout/${roomId}`);
  };

  if (loading) return <div>Äang táº£i thÃ´ng tin phÃ²ng...</div>;
  if (error) return <div>{error}</div>;

  return (
    <div className="flex flex-col m-4 sm:m-8 lg:m-20 p-4 text-black">
      <h2 className='text-2xl font-semibold mb-4 text-center md:text-left'>ThÃ´ng Tin CÃ¡c PhÃ²ng</h2>
      {roomDetails.length > 0 ? (
        <div className="room-list flex flex-col space-y-4">
          {roomDetails.map((room) => (
            <div 
              key={room._id} 
              className="room-item flex flex-col sm:flex-row justify-between items-center border p-4 rounded-lg shadow-lg w-full md:w-3/4 mx-auto"
            >
              {/* Hiá»ƒn thá»‹ áº£nh phÃ²ng */}
              <div className="flex-shrink-0 mb-4 sm:mb-0 sm:mr-4 w-full sm:w-1/4 md:w-1/5 lg:w-1/6">
                <img
                  src={room.imageroom.length > 0 ? room.imageroom[0] : "https://res.cloudinary.com/dackig67m/image/upload/v1728847415/hotels/file_btzwen.jpg"}
                  alt={room.type}
                  className="w-full h-40 object-cover rounded-lg transition duration-300 ease-in-out transform hover:scale-105 hover:opacity-75 cursor-pointer"
                  onClick={() => showModal(room.imageroom.length > 0 ? room.imageroom[0] : "https://res.cloudinary.com/dackig67m/image/upload/v1728847415/hotels/file_btzwen.jpg")}
                />
              </div>

              {/* ThÃ´ng tin phÃ²ng */}
              <div className="flex-1 flex flex-col mb-4 sm:mb-0">
                <div className="text-lg font-bold">{room.type}</div>
              </div>

              {/* GiÃ¡ vÃ  nÃºt chá»n */}
              <div className="text-right flex flex-col items-end w-full sm:w-auto">
              <div className="price text-lg font-semibold">{room.price.toLocaleString('vi-VN')} VNÄ</div>
              <button 
              type="button" 
              className="bg-black text-white px-4 py-2 rounded mt-2 hover:bg-gray-800 transition"
              onClick={() => handleBookRoom(room._id)}
              >
             Chá»n
             </button>
            </div>

            </div>
          ))}
        </div>
      ) : (
        <div className="text-center">KhÃ´ng cÃ³ phÃ²ng nÃ o cho khÃ¡ch sáº¡n nÃ y.</div>
      )}

      {/* Modal hiá»ƒn thá»‹ áº£nh phÃ²ng */}
      <Modal
        title="HÃ¬nh áº£nh phÃ²ng"
        visible={isModalVisible}
        onCancel={handleCancel}
        footer={null}
        centered
        width="80%"
        bodyStyle={{ padding: 0 }}
      >
        <img src={currentImage} alt="room" className="w-full h-auto object-cover" />
      </Modal>
    </div>
  );
};


export default DetailRoom;

```

### client\src\components\FavoritesPage\FavoritesPage.jsx
```jsx
import React, { useState, useEffect } from 'react';
import { Drawer, List, ListItem, ListItemText, Grid, Typography, Pagination } from '@mui/material';
import { HiX } from 'react-icons/hi'; 
import axios from 'axios';
import { motion } from 'framer-motion';
import { useNavigate } from 'react-router-dom'; // Import useNavigate Ä‘á»ƒ Ä‘iá»u hÆ°á»›ng
import 'animate.css'; // Import Animate.css
import './FavoriteRoomsDrawer.css'; // Import CSS Ä‘Ã£ thay Ä‘á»•i

const FavoriteRoomsDrawer = ({ open, onClose }) => {
  const [roomsData, setRoomsData] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [currentPage, setCurrentPage] = useState(1); // LÆ°u tráº¡ng thÃ¡i trang hiá»‡n táº¡i
  const roomsPerPage = 4; // Sá»‘ phÃ²ng má»—i trang

  const navigate = useNavigate(); // Khá»Ÿi táº¡o useNavigate

  useEffect(() => {
    if (open) {
      fetchFavoriteRooms();
    }
  }, [open, currentPage]);

  const fetchFavoriteRooms = async () => {
    setLoading(true);
    setError(null);
    try {
      const response = await axios.get('/api/favorite', {
        headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` },
      });
      setRoomsData(response.data);
    } catch (err) {
      setError('Lá»—i khi táº£i dá»¯ liá»‡u phÃ²ng yÃªu thÃ­ch.');
    } finally {
      setLoading(false);
    }
  };

  const handleRoomClick = (hotelId) => {
    // Äiá»u hÆ°á»›ng Ä‘áº¿n trang chi tiáº¿t khÃ¡ch sáº¡n
    navigate(`/detailhotel/${hotelId}`);
  };

  // Xá»­ lÃ½ phÃ¢n trang
  const indexOfLastRoom = currentPage * roomsPerPage;
  const indexOfFirstRoom = indexOfLastRoom - roomsPerPage;
  const currentRooms = roomsData.slice(indexOfFirstRoom, indexOfLastRoom);

  // Thay Ä‘á»•i trang
  const paginate = (event, pageNumber) => {
    setCurrentPage(pageNumber);
  };

  return (
    <motion.div
      initial={{ x: '100%' }}
      animate={{ x: open ? 0 : '100%' }}
      exit={{ x: '100%' }}
      transition={{ type: 'spring', stiffness: 300, damping: 30 }}
    >
      <Drawer anchor="right" open={open} onClose={onClose}>
        <div className="drawer-container animate__animated animate__fadeInRight">
          <div className="drawer-header">
            <Typography variant="h5" component="h2" style={{ fontWeight: 700 }}>
              KhÃ¡ch sáº¡n yÃªu thÃ­ch cá»§a báº¡n
            </Typography>
            <button onClick={onClose} className="close-button">
              <HiX size={24} />
            </button>
          </div>

          {error && (
            <div className="error-message">
              <Typography variant="body1">{error}</Typography>
            </div>
          )}

          <List>
            {currentRooms.length === 0 ? (
              <ListItem>
                <ListItemText primary="Báº¡n chÆ°a cÃ³ khÃ¡ch sáº¡n yÃªu thÃ­ch nÃ o." />
              </ListItem>
            ) : (
              currentRooms.map((hotel) => (
                <div key={hotel.hotelId} className="hotel-item animate__animated animate__fadeInUp" onClick={() => handleRoomClick(hotel.hotelId)}>
                  <Grid container spacing={2} alignItems="center">
                    {/* HÃ¬nh áº£nh khÃ¡ch sáº¡n */}
                    <Grid item xs={4} sm={3}>
                      <img 
                        src={hotel.imagehotel[0]} 
                        alt={hotel.name} 
                        className="hotel-image" 
                      />
                    </Grid>

                    {/* ThÃ´ng tin khÃ¡ch sáº¡n */}
                    <Grid item xs={8} sm={9}>
                      <div className="hotel-info">
                        <Typography variant="h6">{hotel.name}</Typography>
                        <Typography variant="body2" className="location">{hotel.location}</Typography>
                        <Typography variant="body2" className="rating">â­ {hotel.stars} sao</Typography>
                        <Typography variant="body2" className="price">
                          {hotel.minPrice.toLocaleString()} VND - {hotel.maxPrice.toLocaleString()} VND
                        </Typography>
                      </div>
                    </Grid>
                  </Grid>
                  <hr />
                </div>
              ))
            )}
          </List>

          {/* PhÃ¢n trang */}
          {roomsData.length > roomsPerPage && (
            <div className="pagination-container">
              <Pagination
                count={Math.ceil(roomsData.length / roomsPerPage)}
                page={currentPage}
                onChange={paginate}
                color="primary"
              />
            </div>
          )}
        </div>
      </Drawer>
    </motion.div>
  );
};

export default FavoriteRoomsDrawer;

```

### client\src\components\HomePage\endow.jsx
```jsx
import React from "react";
import Dambao from "../../assets/checked.png"; 
import BaoMat from "../../assets/insurance.png";
import Hotro from "../../assets/customer-service.png";

const Endow = () => {
  const workInfoData = [
    {
      image: Dambao,
      title: "Äáº£m báº£o giÃ¡ tá»‘t nháº¥t",
      text: "Cam káº¿t giÃ¡ phÃ²ng cáº¡nh tranh vá»›i Æ°u Ä‘Ã£i Ä‘á»™c quyá»n khi Ä‘áº·t qua website.",
    },
    {
      image: BaoMat,
      title: "Báº£o máº­t thÃ´ng tin",
      text: "ThÃ´ng tin cÃ¡ nhÃ¢n vÃ  thanh toÃ¡n Ä‘Æ°á»£c báº£o máº­t an toÃ n, tuÃ¢n thá»§ tiÃªu chuáº©n quá»‘c táº¿.",
    },
    {
      image: Hotro,
      title: "Dá»‹ch vá»¥ há»— trá»£ 24/7",
      text: "Äá»™i ngÅ© há»— trá»£ sáºµn sÃ ng giÃºp Ä‘á»¡ qua hotline, email vÃ  chat trá»±c tuyáº¿n má»i lÃºc.",
    },
    
  ];

  return (
    <div className="py-12 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 className="text-3xl text-center text-gray-900 mb-8">Dá»‹ch vá»¥ cá»§a chÃºng tÃ´i</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {workInfoData.map((data) => (
            <div
              className="bg-white shadow-lg rounded-lg overflow-hidden transition-all hover:scale-105 hover:shadow-xl"
              key={data.title}
            >
              <div className="info-boxes-img-container p-6"> 








                
                <img className="w-full h-40 object-contain rounded-lg " src={data.image} alt={data.title} />
              </div>
              <div className="p-6">
                <h3 className="text-xl font-semibold text-gray-900 mb-4 text-center">{data.title}</h3>
                <p className="text-gray-700 text-center">{data.text}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default Endow;
```

### client\src\components\HomePage\Footer.jsx
```jsx
import React, { useEffect, useState } from "react";
import { Link, useNavigate } from "react-router-dom";
import { motion } from "framer-motion"; // Import framer-motion for animation

const Footer = () => {
  const navigate = useNavigate();
  const [logoSrc, setLogoSrc] = useState("");

  useEffect(() => {
    // Sá»­ dá»¥ng logo CheckInn má»›i cho má»i cháº¿ Ä‘á»™
    const updateLogo = () => {
      setLogoSrc("/LogoCheckInnReal.png"); // Sá»­ dá»¥ng logo CheckInn má»›i
    };

    // Gá»i hÃ m láº§n Ä‘áº§u tiÃªn khi component Ä‘Æ°á»£c mount
    updateLogo();

    // Theo dÃµi sá»± thay Ä‘á»•i cá»§a `prefers-color-scheme`
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", updateLogo);

    // Dá»n dáº¹p sá»± kiá»‡n khi component bá»‹ unmount
    return () => {
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .removeEventListener("change", updateLogo);
    };
  }, []);

  const handleHome = () => {
    navigate("/");
  };
  const home = () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  };
  return (
    <motion.footer
      // className="bg-gray-800 text-white py-10"
      initial={{ opacity: 0, y: 20 }} // Hiá»‡u á»©ng ban Ä‘áº§u
      animate={{ opacity: 1, y: 0 }} // Hiá»‡u á»©ng khi xuáº¥t hiá»‡n
      transition={{ duration: 0.5 }} // Thá»i gian chuyá»ƒn Ä‘á»™ng
    >
      <footer className="bg-white dark:bg-gray-900 border dark:text-gray-100 border-black">
        <div className="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">
          <div className="md:flex md:justify-between">
            <div className="mb-6 md:mb-0">
              <img
                src={logoSrc}
                alt="CheckInn Logo"
                onClick={home}
                className="h-20 cursor-pointer dark:brightness-200"
              />
            </div>
            <div className="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3">
              {/* Resources */}
              <div>
                <h2 className="mb-6 text-sm font-semibold text-gray-900 uppercase dark:text-white">
                  Äiá»u hÆ°á»›ng
                </h2>
                <ul className="text-gray-500 dark:text-gray-400 font-medium">
                  <li className="mb-4">
                    <a
                      className="hover:underline cursor-pointer"
                      onClick={handleHome}
                    >
                      Trang chá»§
                    </a>
                  </li>
                  <li>
                    <a href="./" className="hover:underline">
                      Äáº·t phÃ²ng
                    </a>
                  </li>
                </ul>
              </div>
              {/* Follow Us */}
              <div>
                <h2 className="mb-6 text-sm font-semibold text-gray-900 uppercase dark:text-white">
                  Theo dÃµi chÃºng tÃ´i
                </h2>
                <ul className="text-gray-500 dark:text-gray-400 font-medium">
                  <li className="mb-4">
                    <a
                      href="https://github.com/YouAreMyHome"
                      className="hover:underline"
                    >
                      Github
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://discord.gg/j6bZTk9snN"
                      className="hover:underline"
                    >
                      Discord
                    </a>
                  </li>
                </ul>
              </div>
              {/* Legal */}
              <div>
                <h2 className="mb-6 text-sm font-semibold text-gray-900 uppercase dark:text-white">
                  ChÃ­nh SÃ¡ch
                </h2>
                <ul className="text-gray-500 dark:text-gray-400 font-medium">
                  <li className="mb-4">
                    <a href="#" className="hover:underline">
                    ChÃ­nh sÃ¡ch báº£o máº­t
                    </a>
                  </li>
                  <li>
                    <a href="#" className="hover:underline">
                      Terms & Conditions
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <hr className="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" />
          <div className="sm:flex sm:items-center sm:justify-between">
            <span className="text-sm text-gray-500 sm:text-center dark:text-gray-400">
              Â© 2024{" "}
              <Link
                onClick={() => {
                  window.scrollTo({ top: 0, behavior: "smooth" }); // Cuá»™n vá» Ä‘áº§u trang
                }}
                className="hover:underline"
              >
                CheckInnâ„¢
              </Link>
              . All Rights Reserved.
            </span>
            <div class="flex mt-4 sm:justify-center sm:mt-0">
              <a
                href="https://www.facebook.com/consauchetduoi"
                class="text-gray-500 hover:text-gray-900 dark:hover:text-white"
              >
                <svg
                  class="w-4 h-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 8 19"
                >
                  <path
                    fill-rule="evenodd"
                    d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">Facebook page</span>
              </a>
              <a
                href="https://discord.gg/j6bZTk9snN"
                class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5"
              >
                <svg
                  class="w-4 h-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 21 16"
                >
                  <path d="M16.942 1.556a16.3 16.3 0 0 0-4.126-1.3 12.04 12.04 0 0 0-.529 1.1 15.175 15.175 0 0 0-4.573 0 11.585 11.585 0 0 0-.535-1.1 16.274 16.274 0 0 0-4.129 1.3A17.392 17.392 0 0 0 .182 13.218a15.785 15.785 0 0 0 4.963 2.521c.41-.564.773-1.16 1.084-1.785a10.63 10.63 0 0 1-1.706-.83c.143-.106.283-.217.418-.33a11.664 11.664 0 0 0 10.118 0c.137.113.277.224.418.33-.544.328-1.116.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595 17.286 17.286 0 0 0-2.973-11.59ZM6.678 10.813a1.941 1.941 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.919 1.919 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Zm6.644 0a1.94 1.94 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.918 1.918 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Z" />
                </svg>
                <span class="sr-only">Discord community</span>
              </a>
              <a
                href="#"
                class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5"
              >
                <svg
                  class="w-4 h-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 17"
                >
                  <path
                    fill-rule="evenodd"
                    d="M20 1.892a8.178 8.178 0 0 1-2.355.635 4.074 4.074 0 0 0 1.8-2.235 8.344 8.344 0 0 1-2.605.98A4.13 4.13 0 0 0 13.85 0a4.068 4.068 0 0 0-4.1 4.038 4 4 0 0 0 .105.919A11.705 11.705 0 0 1 1.4.734a4.006 4.006 0 0 0 1.268 5.392 4.165 4.165 0 0 1-1.859-.5v.05A4.057 4.057 0 0 0 4.1 9.635a4.19 4.19 0 0 1-1.856.07 4.108 4.108 0 0 0 3.831 2.807A8.36 8.36 0 0 1 0 14.184 11.732 11.732 0 0 0 6.291 16 11.502 11.502 0 0 0 17.964 4.5c0-.177 0-.35-.012-.523A8.143 8.143 0 0 0 20 1.892Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">Twitter page</span>
              </a>
              <a
                href="https://github.com/YouAreMyHome"
                class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5"
              >
                <svg
                  class="w-4 h-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">GitHub account</span>
              </a>
              <a
                href="#"
                class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-5"
              >
                <svg
                  class="w-4 h-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 0a10 10 0 1 0 10 10A10.009 10.009 0 0 0 10 0Zm6.613 4.614a8.523 8.523 0 0 1 1.93 5.32 20.094 20.094 0 0 0-5.949-.274c-.059-.149-.122-.292-.184-.441a23.879 23.879 0 0 0-.566-1.239 11.41 11.41 0 0 0 4.769-3.366ZM8 1.707a8.821 8.821 0 0 1 2-.238 8.5 8.5 0 0 1 5.664 2.152 9.608 9.608 0 0 1-4.476 3.087A45.758 45.758 0 0 0 8 1.707ZM1.642 8.262a8.57 8.57 0 0 1 4.73-5.981A53.998 53.998 0 0 1 9.54 7.222a32.078 32.078 0 0 1-7.9 1.04h.002Zm2.01 7.46a8.51 8.51 0 0 1-2.2-5.707v-.262a31.64 31.64 0 0 0 8.777-1.219c.243.477.477.964.692 1.449-.114.032-.227.067-.336.1a13.569 13.569 0 0 0-6.942 5.636l.009.003ZM10 18.556a8.508 8.508 0 0 1-5.243-1.8 11.717 11.717 0 0 1 6.7-5.332.509.509 0 0 1 .055-.02 35.65 35.65 0 0 1 1.819 6.476 8.476 8.476 0 0 1-3.331.676Zm4.772-1.462A37.232 37.232 0 0 0 13.113 11a12.513 12.513 0 0 1 5.321.364 8.56 8.56 0 0 1-3.66 5.73h-.002Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">Dribbble account</span>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </motion.footer>
  );
};

export default Footer;

```

### client\src\components\HomePage\HomeNavbar.jsx
```jsx
import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import { User, Heart, Calendar, Hotel, LogOut, Menu } from "lucide-react";
import FavoriteRoomsDrawer from "../FavoritesPage/FavoritesPage"; // Import your drawer component
import BookingCard from "../BookingStatus/BookingCard";
import { Tooltip } from "antd";

const HomeNavbar = () => {
  const navigate = useNavigate();
  const [user, setUser] = useState(null);
  const [menuOpen, setMenuOpen] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [drawerOpen, setDrawerOpen] = useState(false);
  const [drawerbookingOpen, setDrawerbookingOpen] = useState(false);
  // Functions to open and close the drawer
  const handleOpenDrawer = () => {
    setDrawerOpen(true);
  };
  const handleCloseDrawer = () => {
    setDrawerOpen(false);
  };
  //
  const handleOpenBookingDrawer = () => {
    setDrawerbookingOpen(true);
  };
  const handleCloseBookingDrawer = () => {
    setDrawerbookingOpen(false);
  };
  const fetchUser = async () => {
    try {
      const response = await fetch('/api/profile/me', {
        method: 'GET',
        credentials: 'include'
      });

      if (response.ok) {
        const userData = await response.json();
        setUser(userData);
      } else {
        console.error("Error fetching user data:", response.status);
      }
    } catch (error) {
      console.error("Network error:", error);
    }
  };

  useEffect(() => {
    fetchUser();
  }, []);

  const handleLogin = () => {
    navigate("/login");
  };

  const handleProfile = () => {
    navigate("/myprofile");
  };

  const handleSignUp = () => {
    navigate("/register");
  };

  const handleHome = () => {
    navigate("/");
  };

  const toggleMenu = () => {
    setMenuOpen(!menuOpen);
  };

  const handleLogout = async () => {
    try {
      const response = await fetch('/api/profile/logout', {
        method: 'POST',
        credentials: 'include',
      });

      if (response.ok) {
        setUser(null);
        setMenuOpen(false);
        navigate("/login");
      } else {
        console.error("Logout error:", response.status);
      }
    } catch (error) {
      console.error("Logout error:", error);
    }
  };

  const handleManageHotel = () => {
    const token = localStorage.getItem('token');
    if (token) {
      navigate("/overview");
    } else {
      navigate("/login");
    }
  };

  const toggleResponsiveMenu = () => {
    setIsMenuOpen(!isMenuOpen);
  };

  return (
    <div className="navbar flex justify-between items-center p-4 bg-gray-800 relative">
      {/* Logo */}
      <div className="navbar-title">
        <img
          src="/LogoCheckInnReal.png"
          alt="CheckInn Logo"
          className="h-10"
          onClick={handleHome}
          style={{ cursor: 'pointer' }}
        />
      </div>

      {/* Middle Navigation Links */}
      <div className="navbar-links hidden md:flex space-x-6">
        <span className="cursor-pointer" onClick={handleHome}>Trang chá»§</span>
        <span className="cursor-pointer" onClick={() => navigate("/searchpage")}>Äáº·t PhÃ²ng</span>
        <a href="https://www.facebook.com/waito.sv">
        <span className="cursor-pointer">LiÃªn há»‡</span>
        </a>
        
      </div>

      {/* Mobile Menu Icon */}
      <div className="md:hidden flex items-center">
        <Menu className="w-8 h-8 text-white cursor-pointer" onClick={toggleResponsiveMenu} />
      </div>

      {/* User Controls */}
      <div className="navbar-buttons hidden md:flex items-center relative">
      {user ? (
        <div className="flex items-center space-x-4">
        {/* NÃºt Äáº·t phÃ²ng */}
        <Tooltip 
          title="Äáº·t phÃ²ng"
          overlayInnerStyle={{ backgroundColor: "white", color: "black", borderRadius: "8px", padding: "6px 12px" }}
        >
          <div className="calendar-button cursor-pointer" onClick={handleOpenBookingDrawer}>
            <Calendar className="w-6 h-6 text-white hover:text-blue-700" />
          </div>
        </Tooltip>
        <BookingCard open={drawerbookingOpen} onClose={handleCloseBookingDrawer} />
      
        {/* NÃºt KhÃ¡ch sáº¡n yÃªu thÃ­ch */}
        <Tooltip 
          title="KhÃ¡ch sáº¡n yÃªu thÃ­ch"
          overlayInnerStyle={{ backgroundColor: "white", color: "black", borderRadius: "8px", padding: "6px 12px" }}
        >
          <div className="favorite-button cursor-pointer" onClick={handleOpenDrawer}>
            <Heart className="w-6 h-6 text-white hover:text-blue-700" />
          </div>
        </Tooltip>
        <FavoriteRoomsDrawer open={drawerOpen} onClose={handleCloseDrawer} />

          {/* Avatar ngÆ°á»i dÃ¹ng vÃ  menu tháº£ xuá»‘ng */}
          <div className="user-avatar cursor-pointer" onClick={toggleMenu}>
            <img 
              src={user.avatar || "https://img.freepik.com/premium-vector/default-avatar-profile-icon-social-media-user-image-gray-avatar-icon-blank-profile-silhouette-vector-illustration_561158-3485.jpg"} 
              alt="Avatar" 
              className="w-10 h-10 rounded-full" 
            />
            {menuOpen && (
              <div className="absolute right-0 mt-2 w-60 bg-white shadow-lg rounded-md z-50">
                <ul className="py-2">
                  <li className="flex items-center px-4 py-2 text-black hover:bg-gray-100 cursor-pointer" onClick={handleProfile}>
                    <User className="w-4 h-4 mr-2" /> Há»“ sÆ¡ cÃ¡ nhÃ¢n
                  </li>
                  {user.role === "Admin" || user.role === "HotelManager" ? (
                    <a href="/overview" className="flex items-center px-4 py-2 text-black hover:bg-gray-100 cursor-pointer">
                      <Hotel className="w-4 h-4 mr-2" /> Quáº£n lÃ½ khÃ¡ch sáº¡n
                    </a>
                  ) : null}
                  <li className="flex items-center px-4 py-2 text-black hover:bg-gray-100 cursor-pointer" onClick={handleLogout}>
                    <LogOut className="w-4 h-4 mr-2" /> ÄÄƒng xuáº¥t
                  </li>
                </ul>
              </div>
            )}
          </div>
        </div>
      ) : (
        <div className="inline-flex rounded-md shadow-sm" role="group">
          <button type="button" className="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-s-lg hover:text-blue-700" onClick={handleLogin}>
            ÄÄƒng nháº­p
          </button>
          <button type="button" className="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-e-lg hover:text-blue-700" onClick={handleSignUp}>
            ÄÄƒng kÃ½
          </button>
        </div>
      )}
    </div>



      {/* Responsive Dropdown Menu */}
      {isMenuOpen && (
        <div className="absolute top-16 left-0 right-0 bg-gray-800 text-white md:hidden z-50 p-4">
          <div className="flex flex-col space-y-4">
            <span className="cursor-pointer" onClick={handleHome}>Trang chá»§</span>
            <span className="cursor-pointer" onClick={() => navigate("/searchpage")}>Äáº·t PhÃ²ng</span>
            <span className="cursor-pointer" onClick={() => navigate("/")}>LiÃªn há»‡</span>
            {user ? (
              <>
                <span className="cursor-pointer" onClick={handleProfile}>Há»“ sÆ¡ cÃ¡ nhÃ¢n</span>
                <span className="cursor-pointer" onClick={handleOpenDrawer}>KhÃ¡ch sáº¡n yÃªu thÃ­ch</span>
                <span className="cursor-pointer" onClick={() => navigate("/bookings")}>Äáº·t phÃ²ng cá»§a báº¡n</span>
                {user.role === "Admin" || user.role === "HotelManager" ? (
                  <span className="cursor-pointer" onClick={handleManageHotel}>Quáº£n lÃ½ khÃ¡ch sáº¡n</span>
                ) : null}
                <span className="cursor-pointer" onClick={handleLogout}>ÄÄƒng xuáº¥t</span>
              </>
            ) : (
              <>
                <span className="cursor-pointer" onClick={handleLogin}>ÄÄƒng nháº­p</span>
                <span className="cursor-pointer" onClick={handleSignUp}>ÄÄƒng kÃ½</span>
              </>
            )}
          </div>
        </div>
      )}
    </div>
  );
};

export default HomeNavbar;

```

### client\src\components\HomePage\imagehome.jsx
```jsx
import React from "react";

const ImageHome = () => {
  return (
    <div
      className="hero-image"
      style={{
        backgroundImage: `url(/image.png)`, // ÄÆ°á»ng dáº«n tá»›i áº£nh trong thÆ° má»¥c public
        backgroundSize: "cover",
        backgroundPosition: "center",
        backgroundRepeat: "no-repeat",
        height: "60vh", // Chiá»u cao táº¥m áº£nh
        width: "100%", // Chiá»u ngang toÃ n bá»™
      }}
    />
  );
};

export default ImageHome;

```

### client\src\components\HomePage\Mostpopularguests.jsx
```jsx
import React, { useEffect, useState } from "react";
import axios from "axios";
import { Card, Col, Row } from "antd";
import { useNavigate } from "react-router-dom";
import Slider from "react-slick";
import "slick-carousel/slick/slick.css";
import "slick-carousel/slick/slick-theme.css";

const { Meta } = Card;

const PopularDestinations = () => {
  const [hotels, setHotels] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const navigate = useNavigate();

  useEffect(() => {
    const fetchTopHotels = async () => {
      try {
        const response = await axios.get("/api/homepage/random-hotel");
        setHotels(response.data);
        setLoading(false);
      } catch (err) {
        setError("CÃ³ lá»—i xáº£y ra khi táº£i dá»¯ liá»‡u khÃ¡ch sáº¡n");
        setLoading(false);
      }
    };

    fetchTopHotels();
  }, []);

  if (loading) return <div>Äang táº£i...</div>;
  if (error) return <div>{error}</div>;

  const sliderSettings = {
    dots: true,
    infinite: false,
    speed: 500,
    slidesToShow: 1,
    slidesToScroll: 1,
    responsive: [
      {
        breakpoint: 768,
        settings: {
          slidesToShow: 1,
        },
      },
    ],
  };

  return (
    <section className="travel-cards-wrapper">
      <div className="travel-cards text-black mt-5">
        <h2 className="travel-title text-2xl md:text-2xl lg:text-3xl font-medium">
          CÃ³ thá»ƒ báº¡n thÃ­ch
        </h2>
        <div className="hotel-list-wrapper">
          {/* Use slider only for smaller screens */}
          <div className="slider-container">
            <Slider {...sliderSettings}>
              {hotels.map((hotel) => (
                <Card
                  hoverable
                  style={{ height: "auto" }}
                  cover={
                    <img
                      alt={hotel.name}
                      src={hotel.imagehotel[0] || "default-image.jpg"}
                      style={{
                        height: "200px",
                        width: "100%",
                        objectFit: "cover",
                      }}
                    />
                  }
                  onClick={() => navigate(`/detailhotel/${hotel._id}`)}
                  key={hotel._id}
                >
                  <Meta
                    title={hotel.name}
                    description={
                      <div>
                        <span className="rating" style={{ color: "#1877F2" }}>
                          {hotel.averageRating
                            ? `${hotel.averageRating.toFixed(1)}/10`
                            : "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡"}
                        </span>
                        <span style={{ color: "gray" }}>
                          {` (${hotel.reviewsCount || 0} Ä‘Ã¡nh giÃ¡)`}
                        </span>
                        <br />
                        <span
                          className="lowest-price"
                          style={{
                            fontWeight: "bold",
                            fontSize: "18px",
                            color: "#ff3d00",
                          }}
                        >
                          {hotel.lowestPrice && hotel.highestPrice
                            ? `${hotel.lowestPrice.toLocaleString(
                                "vi-VN"
                              )} - ${hotel.highestPrice.toLocaleString(
                                "vi-VN"
                              )} VND`
                            : "Äang cáº­p nháº­t"}
                        </span>
                      </div>
                    }
                  />
                </Card>
              ))}
            </Slider>
          </div>
          {/* Grid layout for larger screens */}
          <Row gutter={[16, 16]} className="grid-container">
            {hotels.map((hotel) => (
              <Col xs={24} sm={12} md={8} lg={6} key={hotel._id}>
                <Card
                  hoverable
                  style={{ height: "auto" }}
                  cover={
                    <img
                      alt={hotel.name}
                      src={hotel.imagehotel[0] || "default-image.jpg"}
                      style={{
                        height: "200px",
                        width: "100%",
                        objectFit: "cover",
                      }}
                    />
                  }
                  onClick={() => navigate(`/detailhotel/${hotel._id}`)}
                >
                  <Meta
                    title={hotel.name}
                    description={
                      <div>
                        <span className="rating" style={{ color: "#1877F2" }}>
                          {hotel.averageRating
                            ? `${hotel.averageRating.toFixed(1)}/10`
                            : "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡"}
                        </span>
                        <span style={{ color: "gray" }}>
                          {` (${hotel.reviewsCount || 0} Ä‘Ã¡nh giÃ¡)`}
                        </span>
                        <br />
                        <span
                          className="lowest-price"
                          style={{
                            fontWeight: "bold",
                            fontSize: "18px",
                            color: "#ff3d00",
                          }}
                        >
                          {hotel.lowestPrice && hotel.highestPrice
                            ? `${hotel.lowestPrice.toLocaleString(
                                "vi-VN"
                              )} - ${hotel.highestPrice.toLocaleString(
                                "vi-VN"
                              )} VND`
                            : "Äang cáº­p nháº­t"}
                        </span>
                      </div>
                    }
                  />
                </Card>
              </Col>
            ))}
          </Row>
        </div>
      </div>
    </section>
  );
};

export default PopularDestinations;

```

### client\src\components\HomePage\PopularDestinations.jsx
```jsx
import React, { useEffect, useState } from "react";
import { Card, Col, Row } from "antd";
import { useNavigate } from "react-router-dom";
import Slider from "react-slick"; // Import react-slick for the slider
import "antd/dist/antd";
import "slick-carousel/slick/slick.css";
import "slick-carousel/slick/slick-theme.css";

const { Meta } = Card;

const PopularDestinations = () => {
  const [destinations, setDestinations] = useState([]);
  const navigate = useNavigate();
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const fetchDestinations = async () => {
      try {
        const response = await fetch("/api/tinhthanh/top-provinces");
        const data = await response.json();

        if (data.error === 0) {
          setDestinations(data.data);
        } else {
          console.error("Error fetching destinations:", data.error_text);
        }
      } catch (error) {
        console.error("Fetch error:", error);
      }
    };

    fetchDestinations();
  }, []);

  // Handle screen resize to detect mobile view
  useEffect(() => {
    const handleResize = () => setIsMobile(window.innerWidth < 768);
    handleResize(); // Initial check
    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);

  const handleCardClick = (destination) => {
    navigate(
      `/searchpage?location=${encodeURIComponent(destination.full_name)}`
    );
  };

  const sliderSettings = {
    dots: true,
    infinite: true,
    speed: 500,
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
  };

  return (
    <section className="popular-destinations">
      <h3 className="section-title text-2xl md:text-2xl lg:text-3xl font-medium ">
        Äá»‹a Ä‘iá»ƒm ná»•i báº­t
      </h3>
      {isMobile ? (
        <Slider {...sliderSettings}>
          {destinations.map((destination) => (
            <div key={destination.id}>
              <Card hoverable onClick={() => handleCardClick(destination)}>
                <Row>
                  <Col span={8}>
                    <div className="destination-image-wrapper">
                      <img
                        alt={destination.full_name}
                        src={destination.image || "default-image.png"}
                        className="destination-image"
                      />
                    </div>
                  </Col>
                  <Col span={16}>
                    <div className="destination-content">
                      <Meta
                        title={
                          <div className="destination-title">
                            {destination.full_name}
                          </div>
                        }
                      />
                    </div>
                  </Col>
                </Row>
              </Card>
            </div>
          ))}
        </Slider>
      ) : (
        <Row gutter={16} justify="center">
          {destinations.map((destination) => (
            <Col xs={24} sm={12} md={6} key={destination.id}>
              <Card hoverable onClick={() => handleCardClick(destination)}>
                <Row>
                  <Col span={8}>
                    <div className="destination-image-wrapper">
                      <img
                        alt={destination.full_name}
                        src={destination.image || "default-image.png"}
                        className="destination-image"
                      />
                    </div>
                  </Col>
                  <Col span={16}>
                    <div className="destination-content">
                      <Meta
                        title={
                          <div className="destination-title">
                            {destination.full_name}
                          </div>
                        }
                      />
                    </div>
                  </Col>
                </Row>
              </Card>
            </Col>
          ))}
        </Row>
      )}
    </section>
  );
};

export default PopularDestinations;

```

### client\src\components\HomePage\SearchPlaces.jsx
```jsx
import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";

function SearchPlaces() {
  const [provinces, setProvinces] = useState([]); // Táº¥t cáº£ cÃ¡c tá»‰nh thÃ nh
  const [filteredProvinces, setFilteredProvinces] = useState([]); // Tá»‰nh thÃ nh Ä‘Æ°á»£c lá»c theo tÃ¬m kiáº¿m
  const [inputValue, setInputValue] = useState(""); // GiÃ¡ trá»‹ ngÆ°á»i dÃ¹ng nháº­p
  const [selectedProvince, setSelectedProvince] = useState("");
  const [showSuggestions, setShowSuggestions] = useState(false); // Biáº¿n Ä‘iá»u khiá»ƒn hiá»ƒn thá»‹ danh sÃ¡ch gá»£i Ã½
  const navigate = useNavigate();

  // HÃ m fetch dá»¯ liá»‡u tá»‰nh thÃ nh hÃ ng Ä‘áº§u
  const fetchTopProvinces = async () => {
    try {
      const response = await fetch("/api/tinhthanh/top-provinces");
      if (response.ok) {
        const result = await response.json();
        if (result.error === 0 && Array.isArray(result.data)) {
          setProvinces(result.data);
        } else {
          console.error("Dá»¯ liá»‡u tá»« API khÃ´ng há»£p lá»‡:", result);
        }
      } else {
        console.error("Lá»—i khi láº¥y dá»¯ liá»‡u tá»‰nh thÃ nh:", response.status);
      }
    } catch (error) {
      console.error("Lá»—i khi káº¿t ná»‘i tá»›i API:", error);
    }
  };

  useEffect(() => {
    fetchTopProvinces();
  }, []);

  useEffect(() => {
    // Lá»c cÃ¡c tá»‰nh thÃ nh vÃ  Ä‘á»‹a Ä‘iá»ƒm dá»±a trÃªn inputValue
    if (inputValue) {
      const filtered = provinces.flatMap(province => {
        const provinceMatches = province.name.toLowerCase().includes(inputValue.toLowerCase());

        // Lá»c cÃ¡c khÃ¡ch sáº¡n trong tá»‰nh thÃ nh
        const locationMatches = province.locations.filter(location => 
          location.name.toLowerCase().includes(inputValue.toLowerCase()) || 
          location.location.toLowerCase().includes(inputValue.toLowerCase())
        );

        // Náº¿u tá»‰nh thÃ nh khá»›p, táº¡o má»™t máº£ng gá»£i Ã½ tá»« tá»«ng khÃ¡ch sáº¡n
        const suggestions = locationMatches.map(location => ({
          provinceName: province.name,
          locationName: location.name,
          locationAddress: location.location,
        }));

        // Kiá»ƒm tra xem cÃ³ tá»‰nh thÃ nh hoáº·c Ä‘á»‹a Ä‘iá»ƒm khá»›p vá»›i inputValue hay khÃ´ng
        if (provinceMatches || locationMatches.length > 0) {
          // ThÃªm gá»£i Ã½ cá»§a tá»‰nh thÃ nh náº¿u tÃªn tá»‰nh thÃ nh khá»›p
          if (provinceMatches) {
            suggestions.push({
              provinceName: province.name,
              locationName: province.name, // ThÃªm tÃªn tá»‰nh/thÃ nh vÃ o gá»£i Ã½
              locationAddress: "", // Äá»‹a chá»‰ cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng cho tá»‰nh/thÃ nh
            });
          }
        }

        return suggestions;
      }).filter(suggestion => suggestion.locationName); // Chá»‰ giá»¯ láº¡i cÃ¡c gá»£i Ã½ cÃ³ tÃªn khÃ¡ch sáº¡n

      setFilteredProvinces(filtered.slice(0, 4)); // Giá»›i háº¡n tá»‘i Ä‘a 4 gá»£i Ã½
    } else {
      setFilteredProvinces([]); // Náº¿u khÃ´ng cÃ³ gÃ¬ nháº­p thÃ¬ xÃ³a danh sÃ¡ch
    }
  }, [inputValue, provinces]); // Gá»i hÃ m lá»c khi inputValue hoáº·c provinces thay Ä‘á»•i

  const handleSuggestionClick = (suggestion) => {
    setSelectedProvince(suggestion.locationName);
    setInputValue(`${suggestion.locationName}, ${suggestion.provinceName}`); // Cáº­p nháº­t input vá»›i thÃ´ng tin location vÃ  province
    setFilteredProvinces([]); // XÃ³a danh sÃ¡ch gá»£i Ã½ sau khi chá»n
    setShowSuggestions(false); // áº¨n danh sÃ¡ch gá»£i Ã½
  };

  // HÃ m Ä‘á»ƒ xÃ³a ná»™i dung Ã´ nháº­p
  const clearInput = () => {
    setInputValue(""); // Äáº·t láº¡i giÃ¡ trá»‹ Ã´ nháº­p thÃ nh rá»—ng
    setFilteredProvinces([]); // XÃ³a danh sÃ¡ch gá»£i Ã½
    setSelectedProvince(""); // Äáº·t láº¡i tá»‰nh Ä‘Ã£ chá»n
  };

  const handleSearch = () => {
    if (inputValue.trim()) {
      navigate(`/searchpage?query=${encodeURIComponent(inputValue.trim())}`);
    } else {
      alert("Vui lÃ²ng nháº­p Ä‘iá»ƒm Ä‘áº¿n há»£p lá»‡."); // Hiá»ƒn thá»‹ cáº£nh bÃ¡o náº¿u input trá»‘ng
    }
  };

  return (
    <section className="search-places relative">
      <div className="search-container">
        <h2 className="search-title">Báº¡n muá»‘n Ä‘áº·t phÃ²ng á»Ÿ Ä‘Ã¢u?</h2> 
        <div className="input-group">
          {/* Nháº­p tá»‰nh/thÃ nh */}
          <div className="input-item">
            <label htmlFor="province-input">Äiá»ƒm Ä‘áº¿n</label>
            <div className="border rounded cursor-pointer relative text-black">
              <input
                type="text"
                id="province-input"
                value={inputValue}
                onChange={(e) => {
                  setInputValue(e.target.value);
                  setShowSuggestions(true); // Hiá»‡n gá»£i Ã½ khi cÃ³ kÃ½ tá»± nháº­p
                }}
                placeholder="Báº¡n muá»‘n Ä‘áº·t phÃ²ng á»Ÿ Ä‘Ã¢u"
                className="w-full border-none outline-none placeholder-black"
                onFocus={() => setShowSuggestions(true)} // Hiá»‡n gá»£i Ã½ khi Ã´ input Ä‘Æ°á»£c chá»n
                onBlur={() => setTimeout(() => setShowSuggestions(false), 200)} // áº¨n gá»£i Ã½ khi Ã´ input bá»‹ bá» chá»n
              />
              {/* Biá»ƒu tÆ°á»£ng x Ä‘á»ƒ xÃ³a ná»™i dung Ã´ nháº­p */}
              {inputValue && (
                <button 
                  type="button" 
                  className="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-600"
                  onClick={clearInput}
                >
                  x
                </button>
              )}
              {/* Danh sÃ¡ch tá»‰nh thÃ nh tÃ¬m kiáº¿m */}
              {showSuggestions && filteredProvinces.length > 0 && (
                <ul className="suggestions-list border rounded mt-2 absolute z-10 bg-white border-black w-full">
                  {filteredProvinces.map((suggestion, index) => (
                    <li 
                      key={index} 
                      className="suggestion-item px-4 py-2 text-black cursor-pointer"
                      onClick={() => handleSuggestionClick(suggestion)} // ThÃªm sá»± kiá»‡n click vÃ o gá»£i Ã½
                    >
                      <strong>{suggestion.provinceName}</strong> <br /> {suggestion.locationName} - {suggestion.locationAddress}
                    </li>
                  ))}
                </ul>
              )}
              {/* Hiá»ƒn thá»‹ tá»‰nh thÃ nh hÃ ng Ä‘áº§u náº¿u khÃ´ng cÃ³ tÃ¬m kiáº¿m */}
              {inputValue === "" && filteredProvinces.length === 0 && showSuggestions && (
                <ul className="suggestions-list border rounded mt-2 absolute z-10 bg-white border-black w-full">
                  {provinces.slice(0, 4).map(province => (
                    <li
                      key={province.id}
                      onClick={() => {
                        setSelectedProvince(province.name);
                        setInputValue(province.name);
                        setFilteredProvinces([]); // XÃ³a danh sÃ¡ch gá»£i Ã½ sau khi chá»n
                        setShowSuggestions(false); // áº¨n danh sÃ¡ch gá»£i Ã½
                      }}
                      className="suggestion-item px-4 py-2 cursor-pointer hover:bg-gray-200"
                    >
                      {province.name}
                    </li>
                  ))}
                </ul>
              )}
            </div>
          </div>

          {/* Chá»n sá»‘ lÆ°á»£ng phÃ²ng */}
          <div className="input-item">
            <label htmlFor="room-select">PhÃ²ng</label>
            <select id="room-select" className="border rounded px-4 py-2">
              <option value="1-room-2-guests">PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n</option>
              <option value="2-room-2-guests">PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»</option>
              <option value="2-room-2-guests">PhÃ²ng vip 1 giÆ°á»ng lá»›n</option>
              <option value="2-room-2-guests">PhÃ²ng vip 2 giÆ°á»ng nhá»</option>
            </select>
          </div>
        </div>

        {/* NÃºt tÃ¬m kiáº¿m */}
        <div className="button-group">
          <button className="show-places-btn bg-blue-500" onClick={handleSearch}>TÃ¬m</button>
        </div>
      </div>
    </section>
  );
}

export default SearchPlaces;

```

### client\src\components\HomePage\Tophotel.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { Card, Col, Row } from 'antd';
import { useNavigate } from 'react-router-dom'; // ThÃªm import nÃ y

const { Meta } = Card;

const TopHotels = () => {
  const [hotels, setHotels] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const navigate = useNavigate(); // Khá»Ÿi táº¡o useNavigate

  useEffect(() => {
    const fetchTopHotels = async () => {
      try {
        const response = await axios.get('/api/homepage/top4hotel');
        setHotels(response.data);
        setLoading(false);
      } catch (err) {
        setError('CÃ³ lá»—i xáº£y ra khi táº£i dá»¯ liá»‡u khÃ¡ch sáº¡n');
        setLoading(false);
      }
    };

    fetchTopHotels();
  }, []);

  if (loading) {
    return <div>Äang táº£i...</div>;
  }

  if (error) {
    return <div>{error}</div>;
  }

  return (
    <section className="travel-cards-wrapper">
      <div className="travel-cards">
        <h2 className="travel-title">KhÃ¡ch sáº¡n hÃ ng Ä‘áº§u</h2>
        <Row gutter={[16, 16]}>
          {hotels.map((hotel) => (
            <Col xs={24} sm={12} md={8} lg={6} key={hotel._id}>
              <Card
                hoverable
                style={{ height: 'auto' }}
                cover={
                  <img
                    alt={hotel.name}
                    src={hotel.imagehotel[0] || 'default-image.jpg'}
                    style={{
                      height: '200px',
                      width: '100%',
                      objectFit: 'cover',
                    }}
                  />
                }
                onClick={() => navigate(`/detailhotel/${hotel._id}`)} // Chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang chi tiáº¿t
              >
                <Meta
                  title={hotel.name}
                  description={
                    <div>
                      <span className="rating" style={{ color: '#1877F2' }}>
                        {hotel.averageRating ? `${hotel.averageRating.toFixed(1)}/10` : 'ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡'}
                      </span>
                      <span style={{ color: 'gray' }}>
                        {` (${hotel.reviewsCount || 0} Ä‘Ã¡nh giÃ¡)`}
                      </span>
                      <br />
                      <span className="lowest-price" style={{ fontWeight: 'bold', fontSize: '18px', color: '#ff3d00' }}>
                        {hotel.lowestPrice && hotel.highestPrice 
                          ? `${hotel.lowestPrice.toLocaleString('vi-VN')} - ${hotel.highestPrice.toLocaleString('vi-VN')} VND`
                          : 'Äang cáº­p nháº­t'}
                      </span>
                    </div>
                  }
                />
              </Card>
            </Col>
          ))}
        </Row>
      </div>
    </section>
  );
};

export default TopHotels;
```

### client\src\components\hotel_manager\AddHotel.jsx
```jsx
import React, { useState } from 'react';
import axios from 'axios';
import { Form, Input, Button, Typography, message, Upload, Modal } from 'antd';
import { UploadOutlined } from '@ant-design/icons';
import { useNavigate } from 'react-router-dom';
import { Star } from 'lucide-react';
import 'animate.css';
import MapPicker from '../Map/MapPicker'; // Import MapPicker component

const { TextArea } = Input;
const { Title } = Typography;

const AddHotel = () => {
  const [hotelData, setHotelData] = useState({
    name: '',
    location: '',
    description: '',
    stars: 0,
  });
  const [fileList, setFileList] = useState([]);
  const [loading, setLoading] = useState(false);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [isMapVisible, setIsMapVisible] = useState(false);
  const navigate = useNavigate();

  const handleChange = (e) => {
    const { name, value } = e.target;
    setHotelData({ ...hotelData, [name]: value });
  };

  const handleUpload = ({ fileList }) => {
    setFileList(fileList);
  };

  const handleSubmit = async (values) => {
    // (Giá»¯ nguyÃªn code handleSubmit á»Ÿ Ä‘Ã¢y)
  };

  const handleLocationSelect = (coordinate) => {
    setIsMapVisible(false);
  };

  return (
    <>
      <Button type="primary" onClick={() => setIsModalVisible(true)}>ThÃªm KhÃ¡ch Sáº¡n</Button>

      <Modal
        title="ThÃªm KhÃ¡ch Sáº¡n"
        visible={isModalVisible}
        onCancel={() => setIsModalVisible(false)}
        footer={null}
        className="modal-add"
      >
        <div className="max-w-lg mx-auto p-8 bg-white shadow-lg rounded-lg mt-10 animate__animated animate__fadeIn">
          <Title level={2} className="text-center text-gray-800 mb-6">ThÃªm KhÃ¡ch Sáº¡n</Title>
          <Form layout="vertical" onFinish={handleSubmit}>
            <Form.Item label="TÃªn khÃ¡ch sáº¡n" required>
              <Input
                name="name"
                placeholder="Nháº­p tÃªn khÃ¡ch sáº¡n"
                value={hotelData.name}
                onChange={handleChange}
                className="border-gray-300 focus:border-pink-500 focus:ring-pink-500"
                required
              />
            </Form.Item>

            <Form.Item label="Äá»‹a Ä‘iá»ƒm" required>
              <Input
                name="location"
                placeholder="Nháº­p Ä‘á»‹a Ä‘iá»ƒm"
                value={hotelData.location}
                onChange={handleChange}
                className="border-gray-300 focus:border-pink-500 focus:ring-pink-500"
                required
                readOnly // Äá»ƒ khÃ´ng cho ngÆ°á»i dÃ¹ng chá»‰nh sá»­a trá»±c tiáº¿p
              />
              <Button onClick={() => setIsMapVisible(true)}>Chá»n Ä‘á»‹a Ä‘iá»ƒm</Button>
            </Form.Item>

            {/* (Giá»¯ nguyÃªn cÃ¡c Form.Item khÃ¡c) */}

            <Form.Item>
              <Button
                type="primary"
                htmlType="submit"
                block
                loading={loading}
                className="bg-pink-500 hover:bg-pink-600 transition-all duration-300"
              >
                {loading ? 'Äang xá»­ lÃ½...' : 'ThÃªm KhÃ¡ch Sáº¡n'}
              </Button>
            </Form.Item>
          </Form>
        </div>
      </Modal>

      <Modal
        visible={isMapVisible}
        onCancel={() => setIsMapVisible(false)}
        footer={null}
        className="modal-fullscreen" // ThÃªm lá»›p CSS cho modal toÃ n mÃ n hÃ¬nh
        bodyStyle={{ padding: 0 }} // Loáº¡i bá» padding trong body
      >
        <MapPicker onSelectLocation={handleLocationSelect} />
      </Modal>
    </>
  );
};

export default AddHotel;

```

### client\src\components\hotel_manager\HotelDetail.jsx
```jsx
import React, { useEffect, useCallback, useState } from 'react';
import axios from 'axios';
import { Typography, message, Spin, Button, Modal, Input, Upload, Form } from 'antd';
import { useParams } from 'react-router-dom';
import {  UploadOutlined } from '@ant-design/icons';

const { Title, Paragraph } = Typography;

const HotelDetail = () => {
  const { hotelId } = useParams(); // Láº¥y hotelId tá»« URL
  const [hotel, setHotel] = useState(null);
  const [loading, setLoading] = useState(true);
  const [isUpdating, setIsUpdating] = useState(false); // Loading khi cáº­p nháº­t
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [fileList, setFileList] = useState([]);
  const [removedImages, setRemovedImages] = useState([]);
  const [form] = Form.useForm(); // Form cho viá»‡c chá»‰nh sá»­a

  const fetchHotel = useCallback(async () => {
    setLoading(true);
    try {
      const response = await axios.get(`/api/hotel/${hotelId}`, { withCredentials: true });
      setHotel(response.data);
      setLoading(false);
    } catch (error) {
      console.error('Lá»—i khi láº¥y thÃ´ng tin khÃ¡ch sáº¡n:', error.response?.data);
      message.error('ÄÃ£ xáº£y ra lá»—i khi láº¥y thÃ´ng tin khÃ¡ch sáº¡n');
      setLoading(false);
    }
  }, [hotelId]); // ThÃªm hotelId vÃ o dependency array

  useEffect(() => {
    fetchHotel();
  }, [fetchHotel]); 

  // Hiá»ƒn thá»‹ Modal khi nháº¥n nÃºt Chá»‰nh sá»­a
  const showModal = () => {
    setIsModalVisible(true);
    form.setFieldsValue({
      name: hotel.name,
      location: hotel.location,
      description: hotel.description,
    });
    setFileList(hotel.imagehotel.map((url, index) => ({
      uid: index,
      name: `Image-${index}`,
      status: 'done',
      url,
    })));
    setRemovedImages([]);
  };

  const handleImageChange = ({ fileList: newFileList }) => {
    setFileList(newFileList.map(file => file.originFileObj || file));
  };

  const handleRemoveImage = async (file) => {
    setFileList((prev) => prev.filter((item) => item.uid !== file.uid));
    setRemovedImages((prev) => [...prev, file.url]);

    try {
      await axios.put(`/api/hotel/${hotelId}/remove-image`, { imageUrl: file.url }, { withCredentials: true });
      message.success('HÃ¬nh áº£nh Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng');
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi xÃ³a hÃ¬nh áº£nh');
    }
  };

  const uploadButton = (
    <Button icon={<UploadOutlined />} className="bg-blue-500 text-white hover:bg-blue-600">
      Chá»n áº£nh
    </Button>
  );

  const handleSave = async (values) => {
    setIsUpdating(true); // Báº­t cháº¿ Ä‘á»™ loading khi báº¯t Ä‘áº§u lÆ°u
    try {
      const formData = new FormData();
      formData.append('name', values.name);
      formData.append('location', values.location);
      formData.append('description', values.description);

      fileList.forEach((file) => {
        formData.append('imagehotel', file);
      });

      formData.append('removedImages', JSON.stringify(removedImages));

      await axios.put(`/api/hotel/${hotelId}`, formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
        withCredentials: true,
      });

      message.success('Cáº­p nháº­t thÃ´ng tin khÃ¡ch sáº¡n thÃ nh cÃ´ng!');
      setIsModalVisible(false);
      fetchHotel();
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi cáº­p nháº­t khÃ¡ch sáº¡n');
    } finally {
      setIsUpdating(false); // Táº¯t cháº¿ Ä‘á»™ loading sau khi lÆ°u xong
    }
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen">
        <Spin size="large" tip="Äang táº£i thÃ´ng tin khÃ¡ch sáº¡n..." />
      </div>
    );
  }

  if (!hotel) {
    return (
      <div className="flex justify-center items-center h-screen">
        <p className="text-xl text-gray-700">KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin khÃ¡ch sáº¡n. Vui lÃ²ng thá»­ láº¡i sau.</p>
      </div>
    );
  }

  return (
    <div className="max-w-4xl mx-auto p-5 bg-white rounded-lg shadow-lg mt-10 animate__animated animate__fadeIn">
      <Title level={2} className="text-center text-gray-800 mb-6">
        {hotel.name}
      </Title>
      <div className="space-y-4">
        <Paragraph className="text-lg text-gray-600">
          <strong className="text-gray-800">Äá»‹a chá»‰:</strong> {hotel.location}
        </Paragraph>
        <Paragraph className="text-lg text-gray-600">
          <strong className="text-gray-800">MÃ´ táº£:</strong> {hotel.description}
        </Paragraph>
        {hotel.imagehotel.length > 0 && (
          <div className="grid grid-cols-2 gap-4 mt-4">
            {hotel.imagehotel.map((image, index) => (
              <img
                key={index}
                src={image}
                alt={`HÃ¬nh áº£nh khÃ¡ch sáº¡n ${hotel.name} ${index + 1}`}
                className="w-full h-40 object-cover rounded-lg shadow-md transform transition-transform hover:scale-105"
              />
            ))}
          </div>
        )}
      </div>

      {/* NÃºt chá»‰nh sá»­a */}
      <div className="mt-6 flex justify-center">
        <Button
          type="primary"
          size="large"
          onClick={showModal}
          className="bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 px-5 rounded-lg transition-transform transform hover:scale-105"
        >
          Chá»‰nh sá»­a
        </Button>
      </div>

      {/* Modal chá»‰nh sá»­a */}
      <Modal
        title="Chá»‰nh sá»­a thÃ´ng tin khÃ¡ch sáº¡n"
        visible={isModalVisible}
        onCancel={() => setIsModalVisible(false)}
        onOk={() => form.submit()}
        okText={isUpdating ? <Spin size="small" /> : 'LÆ°u'} // ThÃªm loading vÃ o nÃºt LÆ°u
        cancelText="Há»§y"
        okButtonProps={{ disabled: isUpdating }} // KhÃ³a nÃºt khi Ä‘ang xá»­ lÃ½
      >
        <Form
          form={form}
          layout="vertical"
          onFinish={handleSave}
        >
          <Form.Item
            label="TÃªn khÃ¡ch sáº¡n"
            name="name"
            rules={[{ required: true, message: 'Vui lÃ²ng nháº­p tÃªn khÃ¡ch sáº¡n' }]}
          >
            <Input />
          </Form.Item>
          <Form.Item
            label="Äá»‹a chá»‰"
            name="location"
            rules={[{ required: true, message: 'Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ khÃ¡ch sáº¡n' }]}
          >
            <Input />
          </Form.Item>
          <Form.Item
            label="MÃ´ táº£"
            name="description"
          >
            <Input.TextArea rows={4} />
          </Form.Item>
          <Form.Item label="HÃ¬nh áº£nh phÃ²ng">
            <Upload
              listType="picture"
              fileList={fileList}
              beforeUpload={() => false}
              onChange={handleImageChange}
              onRemove={handleRemoveImage}
            >
              {uploadButton}
            </Upload>
          </Form.Item>
        </Form>
      </Modal>
    </div>
  );
};

export default HotelDetail;

```

### client\src\components\hotel_manager\HotelRooms.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { message, Spin, List, Typography } from 'antd';
import { useParams, useNavigate } from 'react-router-dom'; // Nháº­p useNavigate

const { Title } = Typography;

const HotelRooms = () => {
  const { hotelId } = useParams();
  const navigate = useNavigate(); // Khai bÃ¡o useNavigate
  const [rooms, setRooms] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchRooms();
  }, [hotelId]);

  const fetchRooms = async () => {
    try {
      const response = await axios.get(`/api/room/${hotelId}/rooms`, { withCredentials: true });
      setRooms(response.data);
      setLoading(false);
    } catch (error) {
      console.error('Lá»—i khi láº¥y danh sÃ¡ch phÃ²ng:', error.response?.data);
      message.error('ÄÃ£ xáº£y ra lá»—i khi láº¥y danh sÃ¡ch phÃ²ng');
      setLoading(false);
    }
  };

  // HÃ m Ä‘iá»u hÆ°á»›ng khi nháº¥p vÃ o phÃ²ng
  const handleRoomClick = (roomId) => {
    navigate(`/room/${roomId}`); // Äiá»u hÆ°á»›ng Ä‘áº¿n trang chi tiáº¿t phÃ²ng
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen bg-gray-100">
        <Spin size="large" tip="Äang táº£i danh sÃ¡ch phÃ²ng..." />
      </div>
    );
  }

  return (
    <div className="h-screen overflow-y-auto bg-gray-100">
      <div className="max-w-4xl mx-auto p-5 bg-white shadow-lg rounded-lg">
        <Title level={2} className="text-center text-blue-600 mb-8">Danh SÃ¡ch PhÃ²ng</Title>

        <List
          itemLayout="vertical"
          dataSource={rooms}
          renderItem={(room) => (
            <List.Item key={room._id} className="border-b py-4 cursor-pointer" onClick={() => handleRoomClick(room._id)}>
              <div className="flex justify-between items-center p-4 rounded-lg transition-transform duration-200 hover:shadow-lg hover:bg-gray-50">
                <div>
                  <Title level={4} className="text-blue-500">{room.type}</Title>
                  <p className="text-gray-600">GiÃ¡: {room.price} VND</p>
                  <p className={room.availability ? 'text-green-500' : 'text-red-500'}>
                    {room.availability ? 'CÃ²n phÃ²ng' : 'Háº¿t phÃ²ng'}
                  </p>

                  {room.imageroom && room.imageroom.length > 0 && (
                    <div className="flex flex-wrap gap-4 mt-2">
                      {room.imageroom.map((image, index) => (
                        <img
                          key={index}
                          src={image}
                          alt={`PhÃ²ng ${room.type}`}
                          className="w-48 h-48 object-cover rounded-lg shadow-sm"
                        />
                      ))}
                    </div>
                  )}
                </div>
              </div>
            </List.Item>
          )}
        />
      </div>
    </div>
  );
};

export default HotelRooms;

```

### client\src\components\hotel_manager\MyHotel.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { List, Typography, message, Spin, Button, Modal, Input } from 'antd';
import { Link, useNavigate } from 'react-router-dom';

const { Title } = Typography;

const MyHotels = () => {
  const [hotels, setHotels] = useState([]);
  const [loading, setLoading] = useState(true);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [selectedHotelId, setSelectedHotelId] = useState(null);
  const [password, setPassword] = useState('');
  const navigate = useNavigate();

  useEffect(() => {
    const fetchHotels = async () => {
      try {
        const response = await axios.get('/api/hotel/myhotels', { withCredentials: true });
        setHotels(response.data);
        setLoading(false);
      } catch (error) {
        console.error('Lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n:', error.response?.data);
        message.error('ÄÃ£ xáº£y ra lá»—i khi láº¥y danh sÃ¡ch khÃ¡ch sáº¡n');
        setLoading(false);
      }
    };

    fetchHotels();
  }, []);

  const handleEdit = (hotelId) => {
    window.location.href = `/hotels/${hotelId}`;
  };

  const showDeleteModal = (hotelId) => {
    setSelectedHotelId(hotelId);
    setIsModalVisible(true);
  };

  const handleDeleteConfirm = async () => {
    try {
      await axios.delete(`/api/hotel/${selectedHotelId}`, {
        withCredentials: true,
        data: { password },
      });
      message.success('XÃ³a khÃ¡ch sáº¡n thÃ nh cÃ´ng');
      setHotels(hotels.filter(hotel => hotel._id !== selectedHotelId));
    } catch (error) {
      console.error('Lá»—i khi xÃ³a khÃ¡ch sáº¡n:', error.response?.data);
      message.error('ÄÃ£ xáº£y ra lá»—i khi xÃ³a khÃ¡ch sáº¡n');
    } finally {
      setIsModalVisible(false);
      setPassword('');
    }
  };

  const handleAddRoom = (hotelId) => {
    navigate(`/hotels/${hotelId}/add-room`);
  };

  const handleViewRooms = (hotelId) => {
    navigate(`/hotels/${hotelId}/rooms`);
  };

  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen">
        <Spin size="large" tip="Äang táº£i danh sÃ¡ch khÃ¡ch sáº¡n..." />
      </div>
    );
  }

  return (
    <div className="max-w-4xl mx-auto p-5 bg-white rounded-lg shadow-md mt-10 animate__animated animate__fadeIn">
      <Title level={2} className="text-center text-gray-800 mb-6">
        Danh SÃ¡ch KhÃ¡ch Sáº¡n Cá»§a Báº¡n
      </Title>
      <List
        itemLayout="vertical"
        dataSource={hotels}
        renderItem={(hotel) => (
          <List.Item key={hotel._id} className="border-b py-4 flex flex-col sm:flex-row justify-between items-center">
            <List.Item.Meta
              title={
                <Link
                  to={`/hotels/${hotel._id}`}
                  className="text-xl font-semibold text-blue-600 hover:underline"
                >
                  {hotel.name}
                </Link>
              }
            />
            <div className="flex space-x-3 mt-3 sm:mt-0">
              <Button
                onClick={() => handleEdit(hotel._id)}
                className="bg-blue-500 hover:bg-blue-400 text-white font-semibold py-1 px-3 rounded transition ease-in-out duration-200 transform hover:scale-105"
              >
                Chá»‰nh sá»­a
              </Button>
              <Button
                onClick={() => showDeleteModal(hotel._id)}
                className="bg-red-500 hover:bg-red-400 text-white font-semibold py-1 px-3 rounded transition ease-in-out duration-200 transform hover:scale-105"
              >
                XÃ³a
              </Button>
              <Button
                onClick={() => handleAddRoom(hotel._id)}
                className="bg-green-500 hover:bg-green-400 text-white font-semibold py-1 px-3 rounded transition ease-in-out duration-200 transform hover:scale-105"
              >
                +
              </Button>
              <Button
                onClick={() => handleViewRooms(hotel._id)}
                className="bg-yellow-500 hover:bg-yellow-400 text-white font-semibold py-1 px-3 rounded transition ease-in-out duration-200 transform hover:scale-105"
              >
                Xem phÃ²ng
              </Button>
            </div>
          </List.Item>
        )}
      />

      <Modal
        title="XÃ¡c nháº­n xÃ³a khÃ¡ch sáº¡n"
        visible={isModalVisible}
        onOk={handleDeleteConfirm}
        onCancel={() => setIsModalVisible(false)}
        okText="XÃ³a"
        cancelText="Há»§y"
      >
        <p className="text-gray-700">Nháº­p máº­t kháº©u cá»§a báº¡n Ä‘á»ƒ xÃ¡c nháº­n xÃ³a khÃ¡ch sáº¡n nÃ y:</p>
        <Input.Password
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          placeholder="Nháº­p máº­t kháº©u"
        />
      </Modal>
    </div>
  );
};

export default MyHotels;

```

### client\src\components\hotel_manager\RoomDetail.jsx
```jsx
import React, { useEffect, useState } from 'react';
import axios from 'axios';
import { message, Spin, Typography, Form, Modal, Input, Button, Checkbox, Popconfirm, Upload, Card } from 'antd';
import { PlusOutlined, UploadOutlined } from '@ant-design/icons';
import { useParams, useNavigate } from 'react-router-dom';

const { Title, Text } = Typography;

const RoomDetail = () => {
  const { roomId } = useParams();
  const navigate = useNavigate();
  const [room, setRoom] = useState(null);
  const [loading, setLoading] = useState(true);
  const [isUpdating, setIsUpdating] = useState(false); 
  const [isDeleting, setIsDeleting] = useState(false);
  const [isModalVisible, setIsModalVisible] = useState(false);
  const [form] = Form.useForm();
  const [fileList, setFileList] = useState([]); 
  const [removedImages, setRemovedImages] = useState([]);

  const fetchRoomDetail = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`/api/room/${roomId}`, { withCredentials: true });
      setRoom(response.data);
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi láº¥y chi tiáº¿t phÃ²ng');
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchRoomDetail();
  }, [roomId]);

  const showModal = () => {
    setIsModalVisible(true);
    form.setFieldsValue({
      type: room.type,
      price: room.price,
      availability: room.availability,
    });
    setFileList(room.imageroom.map((url, index) => ({
      uid: index,
      name: `Image-${index}`,
      status: 'done',
      url,
    })));
    setRemovedImages([]);
  };

  const handleSave = async (values) => {
    setIsUpdating(true);
    try {
      const formData = new FormData();
      formData.append('type', values.type);
      formData.append('price', values.price);
      formData.append('availability', values.availability);
      formData.append('remainingRooms', values.remainingRooms);

      
      fileList.forEach((file) => {
        formData.append('imageroom', file);
      });

      formData.append('removedImages', JSON.stringify(removedImages));

      await axios.put(`/api/room/${roomId}`, formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
        withCredentials: true,
      });

      message.success('Cáº­p nháº­t phÃ²ng thÃ nh cÃ´ng!');
      setIsModalVisible(false);
      fetchRoomDetail();
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi cáº­p nháº­t phÃ²ng');
    } finally {
      setIsUpdating(false);
    }
  };

  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      await axios.delete(`/api/room/${roomId}`, { withCredentials: true });
      message.success('PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng');
      navigate(`/myhotel`);
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi xÃ³a phÃ²ng');
    } finally {
      setIsDeleting(false);
    }
  };

  
  
  const handleImageChange = ({ fileList: newFileList }) => {
    setFileList(newFileList.map(file => file.originFileObj || file));
  };

  const handleRemoveImage = async (file) => {
    setFileList((prev) => prev.filter((item) => item.uid !== file.uid));
    setRemovedImages((prev) => [...prev, file.url]);

    try {
      await axios.put(`/api/room/${roomId}/remove-image`, { imageUrl: file.url }, { withCredentials: true });
      message.success('HÃ¬nh áº£nh Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng');
    } catch (error) {
      message.error('ÄÃ£ xáº£y ra lá»—i khi xÃ³a hÃ¬nh áº£nh');
    }
  };

  const uploadButton = (
    <Button icon={<UploadOutlined />} className="bg-blue-500 text-white hover:bg-blue-600">
      Chá»n áº£nh
    </Button>
  );

  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen bg-gray-100">
        <Spin size="large" tip="Äang táº£i chi tiáº¿t phÃ²ng..." />
      </div>
    );
  }

  if (!room) {
    return <p>KhÃ´ng tÃ¬m tháº¥y phÃ²ng.</p>;
  }

  return (
    <div className="max-w-4xl mx-auto p-5 bg-white shadow-lg rounded-lg">
      <Card className="mb-4 shadow-lg rounded-lg">
        <Title level={2} className="text-center text-blue-600">{room.type}</Title>
        <Text className="block text-lg font-semibold">GiÃ¡: {room.price} VND</Text>
        <Text className={`block text-lg ${room.availability ? 'text-green-500' : 'text-red-500'}`}>
          {room.availability ? 'CÃ²n phÃ²ng' : 'Háº¿t phÃ²ng'}
        </Text>
      </Card>

      {room.imageroom && room.imageroom.length > 0 && (
        <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-4">
          {room.imageroom.map((image, index) => (
            <div key={index} className="relative">
              <img
                src={image}
                alt={`PhÃ²ng ${room.type}`}
                className="w-full h-48 object-cover rounded-lg shadow-md transition-transform transform hover:scale-105"
              />
            </div>
          ))}
        </div>
      )}
    
      <div className="flex space-x-4">
        <Button type="primary" onClick={showModal} loading={isUpdating} className="bg-green-500 hover:bg-green-600">
          {isUpdating ? 'Äang lÆ°u...' : 'Chá»‰nh sá»­a'}
        </Button>

        <Popconfirm
          title="Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a phÃ²ng nÃ y khÃ´ng?"
          onConfirm={handleDelete}
          okText="CÃ³"
          cancelText="KhÃ´ng"
        >
          <Button type="danger" loading={isDeleting} className="bg-red-500 hover:bg-red-600">
            {isDeleting ? 'Äang xÃ³a...' : 'XÃ³a phÃ²ng'}
          </Button>
        </Popconfirm>
      </div>

      <Modal
        title="Chá»‰nh sá»­a thÃ´ng tin phÃ²ng"
        visible={isModalVisible}
        onCancel={() => setIsModalVisible(false)}
        footer={null}
      >
        <Form form={form} onFinish={handleSave}>
          <Form.Item
            label="Loáº¡i phÃ²ng"
            name="type"
            rules={[{ required: true, message: 'Vui lÃ²ng nháº­p loáº¡i phÃ²ng' }]}
          >
            <Input className="border-gray-300 rounded-lg" />
          </Form.Item>
          <Form.Item
            label="GiÃ¡"
            name="price"
            rules={[{ required: true, message: 'Vui lÃ²ng nháº­p giÃ¡ phÃ²ng' }]}
          >
            <Input type="number" className="border-gray-300 rounded-lg" />
          </Form.Item>
          <Form.Item
            label="TÃ¬nh tráº¡ng"
            name="availability"
            valuePropName="checked"
          >
            <Checkbox className="text-blue-600">CÃ²n phÃ²ng</Checkbox>
          </Form.Item>
          <Form.Item label="HÃ¬nh áº£nh phÃ²ng">
            <Upload
              listType="picture"
              fileList={fileList}
              beforeUpload={() => false}
              onChange={handleImageChange}
              onRemove={handleRemoveImage}
            >
              {uploadButton}
            </Upload>
          </Form.Item>

          <Form.Item>
            <Button type="primary" htmlType="submit" loading={isUpdating} className="bg-blue-500 hover:bg-blue-600">
              {isUpdating ? 'Äang lÆ°u...' : 'LÆ°u'}
            </Button>
          </Form.Item>
        </Form>
      </Modal>
    </div>
  );
};

export default RoomDetail;

```

### client\src\components\Map\MapPicker.jsx
```jsx
import React, { useEffect, useRef, useState } from 'react';
import axios from 'axios';

const MapPicker = ({ onSelectLocation }) => {
  const mapContainerRef = useRef(null);
  const [searchQuery, setSearchQuery] = useState('');
  const H = window.H; // Äáº£m báº£o ráº±ng biáº¿n H Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh tá»« HERE Maps
  const mapRef = useRef(null); // ThÃªm biáº¿n Ä‘á»ƒ lÆ°u trá»¯ báº£n Ä‘á»“

  useEffect(() => {
    const getCurrentLocation = async () => {
      try {
        const response = await axios.get('https://ipinfo.io/json');
        const [latitude, longitude] = response.data.loc.split(',');

        initMap(latitude, longitude);
      } catch (error) {
        console.error('Error fetching location:', error);
        // Vá»‹ trÃ­ máº·c Ä‘á»‹nh náº¿u cÃ³ lá»—i
        initMap(52.5, 13.4);
      }
    };

    const initMap = (lat, lon) => {
      const platform = new H.service.Platform({
        apikey: 'H1_-qxcSX3OZlvwC-TBbarcbIMcp-ckSpYDml1-F9MM',
        language: 'vi'
      });

      const defaultLayers = platform.createDefaultLayers();

      // Chá»‰ khá»Ÿi táº¡o báº£n Ä‘á»“ náº¿u chÆ°a cÃ³ báº£n Ä‘á»“ nÃ o
      if (!mapRef.current) {
        mapRef.current = new H.Map(
          mapContainerRef.current,
          defaultLayers.vector.normal.map,
          {
            zoom: 10,
            center: { lat: lat, lng: lon },
          }
        );

        const behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(mapRef.current));
        const ui = H.ui.UI.createDefault(mapRef.current, defaultLayers);

        // ThÃªm marker cho vá»‹ trÃ­ hiá»‡n táº¡i
        const marker = new H.map.Marker({ lat: lat, lng: lon });
        mapRef.current.addObject(marker);

        // LÆ°u vá»‹ trÃ­ Ä‘Ã£ chá»n Ä‘á»ƒ gá»­i vá» component cha khi chá»n
        mapRef.current.addEventListener('tap', (event) => {
          const coords = mapRef.current.screenToGeo(event.currentPointer.viewportX, event.currentPointer.viewportY);
          onSelectLocation({ lat: coords.lat, lng: coords.lng }); // Gá»i hÃ m Ä‘á»ƒ gá»­i vá»‹ trÃ­ Ä‘Ã£ chá»n
        });
      }
    };

    getCurrentLocation();

    // Cleanup function to remove the map when the component unmounts
    return () => {
      if (mapContainerRef.current) {
        mapContainerRef.current.innerHTML = ''; // XÃ³a ná»™i dung cá»§a container map
        mapRef.current = null; // Äáº·t láº¡i báº£n Ä‘á»“
      }
    };
  }, [onSelectLocation]);

  const handleSearch = () => {
    // Xá»­ lÃ½ tÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm (cáº§n Ä‘Æ°á»£c triá»ƒn khai)
    console.log('TÃ¬m kiáº¿m:', searchQuery);
    // CÃ³ thá»ƒ gá»i API tÃ¬m kiáº¿m Ä‘á»‹a Ä‘iá»ƒm tá»« HERE Maps API táº¡i Ä‘Ã¢y
  };

  return (
    <div className="flex flex-col items-center justify-center p-4">
      <h1 className="text-2xl font-bold mb-4">Chá»n Vá»‹ TrÃ­ TrÃªn Báº£n Äá»“</h1>
      <input
        type="text"
        placeholder="Nháº­p tÃªn Ä‘á»‹a Ä‘iá»ƒm..."
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
        className="border border-gray-300 rounded p-2 mb-4 w-full md:w-1/2"
      />
      <button
        onClick={handleSearch}
        className="bg-blue-500 text-white rounded p-2 hover:bg-blue-600 transition"
      >
        TÃ¬m Kiáº¿m
      </button>
      <div
        ref={mapContainerRef}
        className="w-full h-96 mt-4 border rounded"
      />
    </div>
  );
};

export default MapPicker;

```

### client\src\components\SearchPage\Filter.jsx
```jsx
import React, { useState } from "react";
import './Searchpage.css'; 

const Filter = ({ setFilteredHotels, hotels }) => {
  const [selectedPrice, setSelectedPrice] = useState("all");
  const [selectedRating, setSelectedRating] = useState("all");
  const [selectedStars, setSelectedStars] = useState("all");

  const handlePriceChange = (e) => {
    setSelectedPrice(e.target.value);
  };

  const handleRatingChange = (e) => {
    setSelectedRating(e.target.value);
  };

  const handleStarsChange = (e) => {
    setSelectedStars(e.target.value);
  };

  const handleResetFilter = () => {
    setSelectedPrice("all");
    setSelectedRating("all");
    setSelectedStars("all");
    setFilteredHotels(hotels); // Reset danh sÃ¡ch khÃ¡ch sáº¡n vá» ban Ä‘áº§u
  };

  const handleApplyFilter = () => {
    let filtered = [...hotels];

    // Lá»c theo giÃ¡ (Tháº¥p Ä‘áº¿n cao, Cao Ä‘áº¿n tháº¥p)
    if (selectedPrice === "lowToHigh") {
      filtered = filtered.sort((a, b) => {
        const aPrice = a.rooms[0]?.price || 0;
        const bPrice = b.rooms[0]?.price || 0;
        return aPrice - bPrice;
      });
    } else if (selectedPrice === "highToLow") {
      filtered = filtered.sort((a, b) => {
        const aPrice = a.rooms[0]?.price || 0;
        const bPrice = b.rooms[0]?.price || 0;
        return bPrice - aPrice;
      });
    }

    // Lá»c theo Ä‘Ã¡nh giÃ¡
    if (selectedRating === "good") {
      filtered = filtered.filter(hotel => hotel.averageRating >= 8); // Assuming 8 is a "good" rating
    }

    // Lá»c theo sao
    if (selectedStars !== "all") {
      filtered = filtered.filter(hotel => hotel.stars >= parseInt(selectedStars, 10));
    }

    setFilteredHotels(filtered); // Cáº­p nháº­t danh sÃ¡ch khÃ¡ch sáº¡n Ä‘Ã£ lá»c
  };

  return (
    <div className="filter-container p-5 border border-gray-300 rounded-lg">
      <form>
        {/* Lá»c theo giÃ¡ */}
        <fieldset>
          <legend className="text-lg font-medium text-gray-900">Lá»c theo giÃ¡</legend>
          <div className="mt-4">
            <div className="flex items-center">
              <input
                type="radio"
                name="Price"
                value="lowToHigh"
                checked={selectedPrice === "lowToHigh"}
                onChange={handlePriceChange}
                className="h-5 w-5 rounded border-gray-300"
              />
              <label className="ml-3 text-sm font-medium text-black">
                GiÃ¡ tá»« tháº¥p Ä‘áº¿n cao
              </label>
            </div>
            <div className="flex items-center mt-2">
              <input
                type="radio"
                name="Price"
                value="highToLow"
                checked={selectedPrice === "highToLow"}
                onChange={handlePriceChange}
                className="h-5 w-5 rounded border-gray-300"
              />
              <label className="ml-3 text-sm font-medium text-black">
                GiÃ¡ tá»« cao Ä‘áº¿n tháº¥p
              </label>
            </div>
          </div>
        </fieldset>

        {/* Lá»c theo ÄÃ¡nh giÃ¡ */}
        <fieldset className="mt-6">
          <legend className="text-lg font-medium text-gray-900">Lá»c theo ÄÃ¡nh giÃ¡</legend>
          <div className="mt-4">
            <div className="flex items-center">
              <input
                type="radio"
                name="Rating"
                value="good"
                checked={selectedRating === "good"}
                onChange={handleRatingChange}
                className="h-5 w-5 rounded border-gray-300"
              />
              <label className="ml-3 text-sm font-medium text-black">
                ÄÃ¡nh giÃ¡ tá»‘t (8 trá»Ÿ lÃªn)
              </label>
            </div>
          </div>
        </fieldset>
      </form>

      {/* Button Lá»c vÃ  Reset */}
      <div className="flex justify-between border-t border-gray-200 px-5 py-3">
        <button
          type="button"
          className="rounded bg-blue-600 px-5 py-3 text-xs font-medium text-white active:scale-95 mx-2"
          onClick={handleApplyFilter}
        >
          Lá»c
        </button>
        <button
          type="button"
          className="rounded bg-gray-300 px-5 py-3 text-xs font-medium text-black active:scale-95 mx-2" 
          onClick={handleResetFilter}
        >
          Reset
        </button>
      </div>
    </div>
  );
};

export default Filter;

```

### client\src\components\SearchPage\HotelItem.jsx
```jsx
import React from "react";
import { Rate } from "antd";
import { useNavigate } from "react-router-dom";

const HotelItem = ({ hotel }) => {
  const navigate = useNavigate();

  const handleBookNowClick = () => {
    navigate(`/detailhotel/${hotel._id}`); // Fix template string syntax
  };

  return (
    <div className="hotel-card border rounded-lg shadow-md overflow-hidden">
      {/* Hiá»ƒn thá»‹ hÃ¬nh áº£nh náº¿u cÃ³ */}
      {hotel.imagehotel && hotel.imagehotel.length > 0 ? (
        <img
          src={hotel.imagehotel[0]}
          alt={hotel.name}
          className="w-full h-48 object-cover"
        />
      ) : (
        <div className="h-48 bg-gray-200 flex items-center justify-center">
          <p className="text-gray-500">KhÃ´ng cÃ³ hÃ¬nh áº£nh</p>
        </div>
      )}
      <div className="hotel-details p-4">
        <h3 className="text-lg font-bold text-black name">
          {hotel.name || "KhÃ¡ch sáº¡n khÃ´ng rÃµ tÃªn"}
        </h3>
        <p className="text-black location">
          {hotel.location || "Vá»‹ trÃ­ khÃ´ng rÃµ"}
        </p>

        <div className="rating-reviews-container flex justify-between items-center mt-2">
          <Rate disabled defaultValue={hotel.averageRating || 0} allowHalf />
          <span className="text-black font-bold ml-auto">
            {hotel.averageRating ? `${hotel.averageRating} Äiá»ƒm` : "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡"}
          </span>
        </div>

        {/* Hiá»ƒn thá»‹ giÃ¡ tháº¥p nháº¥t vÃ  cao nháº¥t */}
        <div className="price-range-container flex justify-end mt-2">
          <span className="price font-bold text-xl">
            {hotel.lowestRoomPrice
              ? `${hotel.lowestRoomPrice.toLocaleString("vi-VN")} VND`
              : "Äang cáº­p nháº­t"}
          </span>
        </div>

        <div className="button-container mt-4 flex justify-end">
          <button
            className="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition"
            onClick={handleBookNowClick}
          >
            Äáº·t ngay
          </button>
        </div>
      </div>
    </div>
  );
};

export default HotelItem;

```

### client\src\components\SearchPage\HotelList.jsx
```jsx
import React, { useState, useEffect } from "react";
import HotelItem from "./HotelItem";

const HotelList = ({ hotels = [] }) => {
  const [visibleHotels, setVisibleHotels] = useState(2); // Hiá»ƒn thá»‹ khÃ¡ch sáº¡n ban Ä‘áº§u

  // HÃ m xá»­ lÃ½ khi ngÆ°á»i dÃ¹ng cuá»™n trang
  const handleScroll = () => {
    const bottom = Math.ceil(window.innerHeight + document.documentElement.scrollTop) === document.documentElement.offsetHeight;
    if (bottom && visibleHotels < hotels.length) {
      // Náº¿u ngÆ°á»i dÃ¹ng cuá»™n Ä‘áº¿n Ä‘Ã¡y trang vÃ  cÃ²n khÃ¡ch sáº¡n chÆ°a Ä‘Æ°á»£c táº£i
      setVisibleHotels((prevVisibleHotels) => prevVisibleHotels + 3); // Táº£i thÃªm khÃ¡ch sáº¡n
    }
  };

  // ThÃªm event listener khi component Ä‘Æ°á»£c mount
  useEffect(() => {
    window.addEventListener("scroll", handleScroll);

    // Cleanup event listener khi component unmount
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [visibleHotels, hotels.length]);

  // Láº¥y danh sÃ¡ch khÃ¡ch sáº¡n cáº§n hiá»ƒn thá»‹
  const currentHotels = hotels.slice(0, visibleHotels);

  return (
    <div className="container">
      <div className="flex">
        <div className="hotel-list w-full">
          <div className="grid grid-cols-1 gap-4">
            {Array.isArray(currentHotels) && currentHotels.length > 0 ? (
              currentHotels.map((hotel) => {
                const lowestRoomPrice =
                  hotel.rooms && hotel.rooms.length > 0
                    ? Math.min(...hotel.rooms.map((room) => room.price))
                    : null;

                return (
                  <HotelItem
                    key={hotel._id}
                    hotel={hotel}
                    lowestRoomPrice={lowestRoomPrice}
                  />
                );
              })
            ) : (
              <p>KhÃ´ng cÃ³ khÃ¡ch sáº¡n nÃ o Ä‘Æ°á»£c tÃ¬m tháº¥y.</p>
            )}
          </div>

          {/* ThÃ´ng bÃ¡o khi khÃ´ng cÃ²n khÃ¡ch sáº¡n */}
          {visibleHotels >= hotels.length && (
            <div className="text-center py-4">KhÃ´ng cÃ²n khÃ¡ch sáº¡n nÃ o Ä‘á»ƒ táº£i thÃªm.</div>
          )}
        </div>
      </div>
    </div>
  );
};

export default HotelList;

```

### client\src\components\SearchPage\SearchHotel.jsx
```jsx
import React, { useEffect, useState } from "react";
import { useLocation } from "react-router-dom";
import 'antd/dist/antd'; // Ensure proper styling is imported

function SearchHotel({ setFilteredHotels, setHotels, hotels }) {
  const location = useLocation();
  const queryParams = new URLSearchParams(location.search);
  const locationFilter = queryParams.get("location");

  const [provinces, setProvinces] = useState([]);
  const [searchTerm, setSearchTerm] = useState(locationFilter || ""); // Initialize with URL param if present
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  // Fetch data on mount
  useEffect(() => {
    const fetchData = async () => {
      try {
        // Fetch provinces
        const provinceResponse = await fetch("/api/tinhthanh/top-provinces");
        const provinceData = await provinceResponse.json();
        if (provinceData.error === 0) {
          setProvinces(provinceData.data);
        } else {
          setError("Lá»—i khi láº¥y danh sÃ¡ch tá»‰nh thÃ nh");
        }

        // Fetch hotels
        const hotelResponse = await fetch("/api/searchhotel/Search");
        const hotelData = await hotelResponse.json();
        setHotels(hotelData);
        setFilteredHotels(hotelData);
      } catch (err) {
        setError("Lá»—i khi gá»i API");
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, [setFilteredHotels, setHotels]);

  // Automatically filter results if locationFilter is present
  useEffect(() => {
    if (locationFilter) {
      filterHotels(locationFilter.toLowerCase());
    }
  }, [locationFilter, hotels]);

  // Filter hotels based on search term, excluding "ThÃ nh phá»‘" and "Tá»‰nh"
  const filterHotels = (term) => {
    const excludeWords = ["thÃ nh phá»‘", "tá»‰nh"];
    const cleanedSearchTerm = excludeWords.reduce((name, word) => {
      return name.replace(new RegExp(word, 'i'), '');
    }, term).trim();

    const filtered = hotels.filter((hotel) =>
      hotel.location.toLowerCase().includes(cleanedSearchTerm) ||
      hotel.name.toLowerCase().includes(cleanedSearchTerm)
    );

    setFilteredHotels(filtered);
  };

  const handleSearchChange = (event) => {
    const searchTerm = event.target.value.toLowerCase();
    setSearchTerm(searchTerm);
    filterHotels(searchTerm);
  };

  if (loading) return <p>Äang táº£i dá»¯ liá»‡u...</p>;
  if (error) return <p>{error}</p>;

  return (
    <section className="search-hotel justify-start">
      <div className="search-container-hotel">
        <div className="input-group-hotel">
          <div className="relative w-full">
            <input
              id="destination"
              value={searchTerm}
              onChange={handleSearchChange}
              placeholder="Nháº­p tÃªn tá»‰nh thÃ nh hoáº·c tÃªn khÃ¡ch sáº¡n"
              className="pl-10 py-2 px-4 w-full text-black border border-black rounded-lg focus:border-gray-300"
            />
            <svg
              className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 20 20"
            >
              <path
                stroke="currentColor"
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="2"
                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
              />
            </svg>
          </div>
        </div>
      </div>
    </section>
  );
}

export default SearchHotel;

```

### client\src\pages\BookingStatusPage.jsx
```jsx
// src/pages/BookingStatusPage.js
import React, { useEffect, useState } from 'react';
import { Card, Spinner } from 'flowbite-react';
import BookingCard from '../components/BookingStatus/BookingCard'; // Assume you will create BookingCard
import axios from 'axios';

const BookingStatusPage = ({ userRole }) => { // Assuming userRole is passed as a prop
  const [bookings, setBookings] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchBookings = async () => {
      try {
        const endpoint = userRole === 'admin' 
          ? '/api/booking/booking/admin' 
          : '/api/booking/booking/manager';
        
        const response = await axios.get(endpoint);
        setBookings(response.data);
      } catch (err) {
        setError(err.message);
      } finally {
        setLoading(false);
      }
    };

    fetchBookings();
  }, [userRole]); // Dependency array includes userRole

  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen">
        <Spinner aria-label="Loading" />
      </div>
    );
  }

  if (error) {
    return <div className="text-red-500">CÃ³ lá»—i xáº£y ra: {error}</div>;
  }

  return (
    <div className="flex flex-col gap-4">
      <h1 className="text-2xl text-black font-semibold mb-5">Tráº¡ng thÃ¡i Äáº·t phÃ²ng</h1>
      <div className="">
        {bookings.map((booking) => (
          <BookingCard key={booking._id} booking={booking} />
        ))}
      </div>
    </div>
  );
};

export default BookingStatusPage;

```

### client\src\pages\CheckoutPage.jsx
```jsx
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import RoomInfo from '../components/Checkout/RoomInfo';
import Summary from '../components/Checkout/Summary';
import Payment from '../components/Checkout/Payment';
import { useParams } from "react-router-dom";
import "../assets/css/style.css";
import HeroSection from "../components/HomePage/HomeNavbar";

const CheckoutPage = () => {
  const { roomId } = useParams();
  const [roomDetails, setRoomDetails] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [checkInDate, setCheckInDate] = useState('');
  const [checkOutDate, setCheckOutDate] = useState('');
  const [email, setEmail] = useState('');
  const [phone, setPhone] = useState('');
  const [totalDays, setTotalDays] = useState(0); // Quáº£n lÃ½ tá»•ng sá»‘ ngÃ y
  const [totalPrice, setTotalPrice] = useState(0); // Quáº£n lÃ½ tá»•ng tiá»n

  useEffect(() => {
    const fetchRoomDetails = async () => {
      try {
        const response = await axios.get(`/api/checkout/${roomId}`);
        setRoomDetails(response.data);
        setLoading(false);
      } catch (error) {
        setError('CÃ³ lá»—i xáº£y ra khi láº¥y thÃ´ng tin phÃ²ng.');
        setLoading(false);
      }
    };

    fetchRoomDetails();
  }, [roomId]);

  // Náº¿u Ä‘ang táº£i hoáº·c cÃ³ lá»—i
  if (loading) return <div>Äang táº£i thÃ´ng tin phÃ²ng...</div>;
  if (error) return <div>{error}</div>;

  return (
    <div className="checkout-page">
      <HeroSection />
      <div className="container mx-auto p-6 text-black">
        <h1 className="text-2xl font-bold mt-6 mb-4">Thanh ToÃ¡n</h1>
        <div className="flex flex-col md:flex-row mt-16">
          <div className="room-info w-full md:w-2/3 pr-6">
            <RoomInfo
              roomDetails={roomDetails}
              setCheckInDate={setCheckInDate}
              setCheckOutDate={setCheckOutDate}
              setEmail={setEmail}
              setPhone={setPhone}
              setTotalDays={setTotalDays} // Truyá»n setTotalDays vÃ o Ä‘Ã¢y
            />
          </div>
          <div className="payment-info w-full md:w-1/3">
            <Summary 
              roomDetails={roomDetails} 
              totalDays={totalDays} 
              setTotalPrice={setTotalPrice}  // Truyá»n callback setTotalPrice Ä‘á»ƒ cáº­p nháº­t giÃ¡ trá»‹ totalPrice
            />
            <Payment
              roomDetails={roomDetails}
              checkInDate={checkInDate}
              checkOutDate={checkOutDate}
              email={email}
              phone={phone}
              totalPrice={totalPrice}  // Truyá»n totalPrice vÃ o Payment
            />
          </div>
        </div>
      </div>
    </div>
  );
};

export default CheckoutPage;

```

### client\src\pages\DetailHotelPage.jsx
```jsx
import React from "react";
import { motion } from "framer-motion";
import "../assets/css/style.css";
import HeroSection from "../components/HomePage/HomeNavbar";
import OrderRoom from "../components/DetailHotel/Orderroom";
import HotelImage from "../components/DetailHotel/HotelImage";
import Footer from "../components/HomePage/Footer";
import Introduce from "../components/DetailHotel/Introduce";
import RatingCard from "../components/DetailHotel/RatingCard";
function DetailHotelPage() {
  return (
    <>
      <HeroSection />
      <motion.div
        className="DetailHotelPage px-4 md:px-11 lg:px-36" // ThÃªm padding ngang
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 1 }}
      >
        <OrderRoom />
        <HotelImage />
        <Introduce />
        <RatingCard />
      </motion.div>
      <Footer />
    </>
  );
}

export default DetailHotelPage;

```

### client\src\pages\DetailRoomPage.jsx
```jsx
import React from "react";
import { motion } from "framer-motion";
import "../assets/css/style.css";
import HeroSection from "../components/HomePage/HomeNavbar";
import DetailRoom from "../components/DetailRoom/DetailRoom";
import Footer from "../components/HomePage/Footer";

function DetailRoomPage() {
  return (
    <motion.div
      className="DetailRoomPage"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 1 }}
    >
      <HeroSection />
      <DetailRoom />
      <Footer />
    </motion.div>
  );
}

export default DetailRoomPage;

```

### client\src\pages\HomePage.jsx
```jsx
import React from "react";
import { motion } from "framer-motion";
import "../assets/css/style.css";
import HeroSection from "../components/HomePage/HomeNavbar";
import ImageHome from "../components/HomePage/imagehome";
import SearchPlaces from "../components/HomePage/SearchPlaces";
import PopularDestinations from "../components/HomePage/PopularDestinations";
import TopHotel from "../components/HomePage/Tophotel";
import Mostpopularguests from "../components/HomePage/Mostpopularguests";
import Endow from "../components/HomePage/endow";
import Footer from "../components/HomePage/Footer";

function HomePage() {
  return (
    <motion.div
      className="homepage"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 1 }}
    >
      <HeroSection />
      <ImageHome />
      <SearchPlaces />
      <PopularDestinations />
      <TopHotel />
      <Mostpopularguests />
      <Endow />
      <Footer />
    </motion.div>
  );
}

export default HomePage;

```

### client\src\pages\NotFoundPage.jsx
```jsx
import React from 'react';
import { Link } from 'react-router-dom'; // Äáº£m báº£o Ä‘Ã£ cÃ i Ä‘áº·t react-router-dom

const NotFoundPage = () => {
  return (
    <div className="absolute inset-0 flex items-center justify-center bg-white"> {/* Sá»­ dá»¥ng absolute vÃ  inset-0 Ä‘á»ƒ kÃ©o Ä‘áº§y khung hÃ¬nh */}
      <div className="text-center">
        <img
          src="404notfound.jpg" // Thay báº±ng URL cá»§a hÃ¬nh áº£nh báº¡n muá»‘n sá»­ dá»¥ng
          alt="Not Found"
          className="mb-8"
        />
        <h1 className="text-4xl font-bold text-red-600 mb-4">404 Not Found</h1>
        <p className="text-lg text-gray-700 mb-6">
          The page you are looking for does not exist.
        </p>
        <Link to="/" className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition">
          Go Back Home
        </Link>
      </div>
    </div>
  );
};

export default NotFoundPage;

```

### client\src\pages\OverviewPage.jsx
```jsx
import { BarChart2, Hotel, Users, Zap } from "lucide-react";
import { motion } from "framer-motion";

import Header from "../components/dashboard/common/Header";
import StatCard from "../components/dashboard/common/StatCard";
import SalesOverviewChart from "../components/dashboard/overview/SalesOverviewChart";
import CategoryDistributionChart from "../components/dashboard/overview/CategoryDistributionChart";
import SalesChannelChart from "../components/dashboard/overview/SalesChannelChart";

const OverviewPage = () => {
	return (
		<div className='flex-1 overflow-auto relative z-10'>
			<Header title='Tá»•ng Quan' />

			<main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
				{/* STATS */}
				<motion.div
					className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					transition={{ duration: 1 }}
				>
					<StatCard name='Tá»•ng Ä‘Æ¡n Ä‘áº·t phÃ²ng' icon={Zap} value='22' color='#6366F1' />
					<StatCard name='ÄÆ¡n Ä‘ang chá»' icon={Users} value='9' color='#8B5CF6' />
					<StatCard name='Sá»‘ khÃ¡ch sáº¡n' icon={Hotel} value='8' color='#EC4899' />
					<StatCard name='TÄƒng trÆ°á»Ÿng' icon={BarChart2} value='12.5%' color='#10B981' />
				</motion.div>

				{/* CHARTS */}

				<div className='grid grid-cols-1 lg:grid-cols-2 gap-8'>
					<SalesOverviewChart />
					<CategoryDistributionChart />
					<SalesChannelChart />
				</div>
			</main>
		</div>
	);
};
export default OverviewPage;

```

### client\src\pages\ProfilePage.jsx
```jsx
import React from 'react';
import { motion } from "framer-motion";
import ProfilePage from '../components/account/profilevip';
import Footer from "../components/HomePage/Footer";
import HomeNavbar from "../components/HomePage/HomeNavbar";
const UserProfile = () => {
    return (
        <motion.div
        className="profilepage"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 1 }}
      >
        <HomeNavbar />
        <ProfilePage/>

        <Footer />

      </motion.div>
    );
};

export default UserProfile;

```

### client\src\pages\SearchPage.jsx
```jsx
import React, { useState } from "react";
import "../assets/css/style.css";
import HeroSection from "../components/HomePage/HomeNavbar";
import SearchHotel from "../components/SearchPage/SearchHotel";
import HotelList from "../components/SearchPage/HotelList";
import Filter from "../components/SearchPage/Filter";
import Footer from "../components/HomePage/Footer";
function SearchPage() {
  const [hotels, setHotels] = useState([]); // State Ä‘á»ƒ lÆ°u danh sÃ¡ch khÃ¡ch sáº¡n
  const [filteredHotels, setFilteredHotels] = useState([]); // State Ä‘á»ƒ lÆ°u danh sÃ¡ch khÃ¡ch sáº¡n Ä‘Ã£ lá»c

  return (
    <div className="searchpage">
      <HeroSection />
      <SearchHotel setFilteredHotels={setFilteredHotels} setHotels={setHotels} hotels={hotels}/>
      <div className="flex mx-7">
        <div className="basis-5/12 sticky top-0">
        <Filter setFilteredHotels={setFilteredHotels} hotels={hotels} />
        </div>
        <HotelList hotels={filteredHotels} />      
      </div>
      <Footer />
    </div>
  );
}

export default SearchPage;

```

### client\src\pages\Admin\AnalyticsPage.jsx
```jsx
import Header from "../../components/dashboard/common/Header";

import OverviewCards from "../../components/dashboard/analytics/OverviewCards";
import RevenueChart from "../../components/dashboard/analytics/RevenueChart";
import ChannelPerformance from "../../components/dashboard/analytics/ChannelPerformance";
import ProductPerformance from "../../components/dashboard/analytics/ProductPerformance";
import UserRetention from "../../components/dashboard/analytics/UserRetention";
import CustomerSegmentation from "../../components/dashboard/analytics/CustomerSegmentation";
import AIPoweredInsights from "../../components/dashboard/analytics/AIPoweredInsights";

const AnalyticsPage = () => {
	return (
		<div className='flex-1 overflow-auto relative z-10 bg-gray-900'>
			<Header title={"Analytics Dashboard"} />

			<main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
				<OverviewCards />
				<RevenueChart />

				<div className='grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8'>
					<ChannelPerformance />
					<ProductPerformance />
					<UserRetention />
					<CustomerSegmentation />
				</div>

				<AIPoweredInsights />
			</main>
		</div>
	);
};
export default AnalyticsPage;

```

### client\src\pages\Admin\HotelManagerPage.jsx
```jsx
import { useState, useEffect } from "react";
import axios from "axios";
import { motion } from "framer-motion";
import Header from "../../components/dashboard/common/Header";
import StatCard from "../../components/dashboard/common/StatCard";
import { HomeIcon, AlertTriangle, DollarSign, TrendingUp } from "lucide-react";
import CategoryDistributionChart from "../../components/dashboard/overview/CategoryDistributionChart";
import SalesTrendChart from "../../components/dashboard/hotelmanage/SalesTrendChart";
import HotelTable from "../../components/dashboard/hotelmanage/HotelTable";
import MyHotelTable from "../../components/dashboard/hotelmanage/MyHotelTable";

const HotelManagerPage = () => {
  const [role, setRole] = useState("");
  const [hotelCount, setHotelCount] = useState(0);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const fetchData = async () => {
      try {
        const userResponse = await axios.get("/api/profile/me", { withCredentials: true });
        setRole(userResponse.data.role);
  
        // Táº£i danh sÃ¡ch khÃ¡ch sáº¡n theo vai trÃ²
        const hotelsResponse = await axios.get(
          userResponse.data.role === "Admin" ? "/api/hotel" : "/api/hotel/myhotels",
          { withCredentials: true }
        );
  
        setHotelCount(hotelsResponse.data.length);
      } catch (error) {
        console.error("Lá»—i khi láº¥y dá»¯ liá»‡u:", error);
      } finally {
        setIsLoading(false);
      }
    };
  
    fetchData();
  }, []);
  
  if (isLoading) {
    return <div>Loading...</div>;
  }
  return (
    <div className="flex-1 overflow-auto relative z-10">
      <Header title="KhÃ¡ch Sáº¡n" />

      <main className="max-w-7xl mx-auto py-6 px-4 lg:px-8">
        <motion.div
          className="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 1 }}
        >
          <StatCard 
            name={role === "Admin" ? "Tá»•ng sá»‘ khÃ¡ch sáº¡n" : "KhÃ¡ch sáº¡n cá»§a báº¡n"} 
            icon={HomeIcon} 
            value={hotelCount} 
            color="#6366F1" 
          />
          <StatCard name="Top Selling" icon={TrendingUp} value={89} color="#10B981" />
          <StatCard name="Low Stock" icon={AlertTriangle} value={23} color="#F59E0B" />
          <StatCard name="Total Revenue" icon={DollarSign} value={"$543,210"} color="#EF4444" />
        </motion.div>

        {role === "Admin" ? <HotelTable /> : role === "HotelManager" ? <MyHotelTable /> : <div>Báº¡n khÃ´ng cÃ³ quyá»n truy cáº­p</div>}

        <div className="grid grid-col-1 lg:grid-cols-2 gap-8">
          <SalesTrendChart />
          <CategoryDistributionChart />
        </div>
      </main>
    </div>
  );
};

export default HotelManagerPage;

```

### client\src\pages\Admin\OrdersPage.jsx
```jsx
import { CheckCircle, Clock, DollarSign, ShoppingBag } from "lucide-react";
import { motion } from "framer-motion";
import { useEffect, useState } from "react";
import axios from "axios"; // Äáº£m báº£o cÃ i Ä‘áº·t axios hoáº·c dÃ¹ng fetch

import Header from "../../components/dashboard/common/Header";
import StatCard from "../../components/dashboard/common/StatCard";
// import DailyOrders from "../../components/dashboard/orders/DailyOrders";
// import OrderDistribution from "../../components/dashboard/orders/OrderDistribution";
import OrdersTable from "../../components/dashboard/orders/OrdersTable";

const OrdersPage = () => {
  const [orderStats, setOrderStats] = useState({
    totalOrders: "0",
    pendingOrders: "0",
    completedOrders: "0",
    totalRevenue: "â‚«0",
  });

  useEffect(() => {
    // Gá»i API Ä‘á»ƒ láº¥y dá»¯ liá»‡u tá»•ng quan
    const fetchOrderStats = async () => {
      try {
        const response = await axios.get("/api/booking/booking/total");
        const { totalBookings, pendingBookings, doneBookings, totalAmount } = response.data;

        // Chuyá»ƒn totalAmount sang Ä‘á»‹nh dáº¡ng tiá»n tá»‡ VND
        const formattedTotalAmount = totalAmount.toLocaleString("vi-VN", {
          style: "currency",
          currency: "VND",
        });

        setOrderStats({
          totalOrders: totalBookings.toString(),
          pendingOrders: pendingBookings.toString(),
          completedOrders: doneBookings.toString(),
          totalRevenue: formattedTotalAmount,
        });
      } catch (error) {
        console.error("Error fetching order stats:", error);
      }
    };

    fetchOrderStats();
  }, []);

  return (
    <div className='flex-1 relative z-10 overflow-auto'>
      <Header title={"Quáº£n LÃ­ Äáº·t PhÃ²ng"} />

      <main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
        <motion.div
          className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 1 }}
        >
          <StatCard
            name='Tá»•ng Ä‘Æ¡n Ä‘áº·t'
            icon={ShoppingBag}
            value={orderStats.totalOrders}
            color='#6366F1'
          />
          <StatCard
            name='ChÆ°a thanh toÃ¡n'
            icon={Clock}
            value={orderStats.pendingOrders}
            color='#F59E0B'
          />
          <StatCard
            name='ÄÃ£ hoÃ n thÃ nh'
            icon={CheckCircle}
            value={orderStats.completedOrders}
            color='#10B981'
          />
          <StatCard
            name='Tá»•ng tiá»n'
            icon={DollarSign}
            value={orderStats.totalRevenue}
            color='#EF4444'
          />
        </motion.div>
        <OrdersTable />
        <div className='grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8'>
          {/* <DailyOrders />
          <OrderDistribution /> */}
        </div>
      </main>
    </div>
  );
};

export default OrdersPage;

```

### client\src\pages\Admin\OverviewPage.jsx
```jsx
import { BarChart2, ShoppingBag, Users, Zap } from "lucide-react";
import { motion } from "framer-motion";

import Header from "../components/dashboard/common/Header";
import StatCard from "../components/dashboard/common/StatCard";
import SalesOverviewChart from "../components/dashboard/overview/SalesOverviewChart";
import CategoryDistributionChart from "../components/dashboard/overview/CategoryDistributionChart";
import SalesChannelChart from "../components/dashboard/overview/SalesChannelChart";

const OverviewPage = () => {
	return (
		<div className='flex-1 overflow-auto relative z-10'>
			<Header title='Overview' />

			<main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
				{/* STATS */}
				<motion.div
					className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					transition={{ duration: 1 }}
				>
					<StatCard name='Total Sales' icon={Zap} value='$12,345' color='#6366F1' />
					<StatCard name='New Users' icon={Users} value='1,234' color='#8B5CF6' />
					<StatCard name='Total Products' icon={ShoppingBag} value='567' color='#EC4899' />
					<StatCard name='Conversion Rate' icon={BarChart2} value='12.5%' color='#10B981' />
				</motion.div>

				{/* CHARTS */}

				<div className='grid grid-cols-1 lg:grid-cols-2 gap-8'>
					<SalesOverviewChart />
					<CategoryDistributionChart />
					<SalesChannelChart />
				</div>
			</main>
		</div>
	);
};
export default OverviewPage;

```

### client\src\pages\Admin\SalesPage.jsx
```jsx
import { motion } from "framer-motion";
import { useEffect, useState } from "react"; 
import Header from "../../components/dashboard/common/Header";
import StatCard from "../../components/dashboard/common/StatCard";
import { CreditCard, DollarSign, ShoppingCart, TrendingUp } from "lucide-react";
import SalesOverviewChart from "../../components/dashboard/sales/SalesOverviewChart";
import SalesByCategoryChart from "../../components/dashboard/sales/SalesByCategoryChart";
import DailySalesTrend from "../../components/dashboard/sales/DailySalesTrend";
import axios from 'axios'; 

const SalesPage = () => {
	const [user, setUser] = useState(null);
	const [bookings, setBookings] = useState([]);
	const [loading, setLoading] = useState(true);
	const [totalRevenue, setTotalRevenue] = useState(0);
	const [totalToday, setTotalToday] = useState(0);
	const [totalThisMonth, setTotalThisMonth] = useState(0);
	const [totalLastMonth, setTotalLastMonth] = useState(0);
	const [growthRate, setGrowthRate] = useState("0%");

	const fetchUser = async () => {
		try {
			const response = await fetch('/api/profile/me', {
				method: 'GET',
				credentials: 'include'
			});
			if (response.ok) {
				const userData = await response.json();
				setUser(userData);
			} else {
				console.error("Lá»—i láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng:", response.status);
			}
		} catch (error) {
			console.error("Lá»—i máº¡ng:", error);
		}
	};

	const fetchBookings = async () => {
		try {
			let response;
			if (user.role === 'Admin') {
				response = await axios.get('/api/booking/booking/admin');
			} else if (user.role === 'HotelManager') {
				response = await axios.get('/api/booking/booking/manager');
			} else {
				console.error('Vai trÃ² ngÆ°á»i dÃ¹ng khÃ´ng Ä‘Æ°á»£c cÃ´ng nháº­n');
				return;
			}
			setBookings(response.data);

			// TÃ­nh tá»•ng doanh thu
			const revenue = response.data.reduce((acc, booking) => {
				if (booking.paymentStatus !== 'Pending') {
					return acc + booking.priceBooking;  // Sá»­ dá»¥ng priceBooking
				}
				return acc;
			}, 0);
			setTotalRevenue(revenue);

			// TÃ­nh tá»•ng doanh thu hÃ´m nay
			const today = new Date().toISOString().split('T')[0];
			const todayRevenue = response.data.reduce((acc, booking) => {
				const bookingDate = new Date(booking.bookingDate).toISOString().split('T')[0];
				if (bookingDate === today && booking.paymentStatus !== 'Pending') {
					return acc + booking.priceBooking;  // Sá»­ dá»¥ng priceBooking 
				}
				return acc;
			}, 0);
			setTotalToday(todayRevenue);

			// TÃ­nh tá»•ng doanh thu thÃ¡ng nÃ y
			const currentMonth = new Date().getMonth();
			const thisMonthRevenue = response.data.reduce((acc, booking) => {
				const bookingDate = new Date(booking.bookingDate);
				if (bookingDate.getMonth() === currentMonth && booking.paymentStatus !== 'Pending') {
					return acc + booking.priceBooking;  // Sá»­ dá»¥ng priceBooking
				}
				return acc;
			}, 0);
			setTotalThisMonth(thisMonthRevenue);

			// TÃ­nh tá»•ng doanh thu thÃ¡ng trÆ°á»›c
			const lastMonthRevenue = response.data.reduce((acc, booking) => {
				const bookingDate = new Date(booking.bookingDate);
				if (bookingDate.getMonth() === currentMonth - 1 && booking.paymentStatus !== 'Pending') {
					return acc + booking.priceBooking;  // Sá»­ dá»¥ng priceBooking 
				}
				return acc;
			}, 0);
			setTotalLastMonth(lastMonthRevenue);

			// TÃ­nh tá»· lá»‡ tÄƒng trÆ°á»Ÿng doanh sá»‘
			if (lastMonthRevenue > 0) {
				const growth = ((thisMonthRevenue - lastMonthRevenue) / lastMonthRevenue) * 100;
				setGrowthRate(growth.toFixed(2) + "%");
			} else {
				setGrowthRate(thisMonthRevenue > 0 ? "100%" : "0%");
			}

		} catch (error) {
			console.error('Lá»—i khi láº¥y bookings:', error);
		} finally {
			setLoading(false);
		}
	};

	useEffect(() => {
		fetchUser();
	}, []);

	useEffect(() => {
		if (user) {
			fetchBookings();
		}
	}, [user]);

	return (
		<div className='flex-1 overflow-auto relative z-10'>
			<Header title='Doanh Thu' />

			<main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
				{/* SALES STATS */}
				<motion.div
					className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					transition={{ duration: 1 }}
				>
					<StatCard name='Tá»•ng Doanh Thu' icon={DollarSign} value={totalRevenue.toLocaleString("vi-VN", { style: "currency", currency: "VND" })} color='#6366F1' />
					<StatCard name='Doanh Thu HÃ´m Nay' icon={ShoppingCart} value={totalToday.toLocaleString("vi-VN", { style: "currency", currency: "VND" })} color='#10B981' />
					<StatCard name='Doanh Thu ThÃ¡ng NÃ y' icon={TrendingUp} value={totalThisMonth.toLocaleString("vi-VN", { style: "currency", currency: "VND" })} color='#F59E0B' />
					<StatCard name='TÄƒng trÆ°á»Ÿng doanh sá»‘' icon={CreditCard} value={growthRate} color='#EF4444' />
				</motion.div>

				<SalesOverviewChart bookings={bookings} />

				<div className='grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8'>
					<SalesByCategoryChart bookings={bookings} />
					<DailySalesTrend bookings={bookings} />
				</div>
			</main>
		</div>
	);
};

export default SalesPage;

```

### client\src\pages\Admin\SettingsPage.jsx
```jsx
import Header from "../../components/dashboard/common/Header";
import ConnectedAccounts from "../../components/dashboard/settings/ConnectedAccounts";
import DangerZone from "../../components/dashboard/settings/DangerZone";
import Notifications from "../../components/dashboard/settings/Notifications";
import Profile from "../../components/dashboard/settings/Profile";
import Security from "../../components/dashboard/settings/Security";

const SettingsPage = () => {
	return (
		<div className='flex-1 overflow-auto relative z-10 bg-gray-900'>
			<Header title='Settings' />
			<main className='max-w-4xl mx-auto py-6 px-4 lg:px-8'>
				<Profile />
				<Notifications />
				<Security />
				<ConnectedAccounts />
				<DangerZone />
			</main>
		</div>
	);
};
export default SettingsPage;

```

### client\src\pages\Admin\UsersPage.jsx
```jsx
import { useEffect, useState } from "react";
import { UserCheck, UserPlus, UsersIcon } from "lucide-react";
import { motion } from "framer-motion";

import Header from "../../components/dashboard/common/Header";
import StatCard from "../../components/dashboard/common/StatCard";
import UsersTable from "../../components/dashboard/users/UsersTable";
import UserGrowthChart from "../../components/dashboard/users/UserGrowthChart";
// import UserActivityHeatmap from "../../components/dashboard/users/UserActivityHeatmap";
// import UserDemographicsChart from "../../components/dashboard/users/UserDemographicsChart";

const UsersPage = () => {
	const [userStats, setUserStats] = useState({
		totalUsers: 0,
		newUsersToday: 0,
		activeUsers: 0,
	});

	useEffect(() => {
		const fetchUserStats = async () => {
			try {
				const response = await fetch('/api/usertable');
				if (!response.ok) throw new Error('Lá»—i khi láº¥y dá»¯ liá»‡u ngÆ°á»i dÃ¹ng');
				const users = await response.json();

				// TÃ­nh toÃ¡n cÃ¡c giÃ¡ trá»‹ thá»‘ng kÃª
				const totalUsers = users.length;
				const newUsersToday = users.filter(user => {
					const registrationDate = new Date(user.registrationDate);
					const today = new Date();
					return (
						registrationDate.getDate() === today.getDate() &&
						registrationDate.getMonth() === today.getMonth() &&
						registrationDate.getFullYear() === today.getFullYear()
					);
				}).length;

				const activeUsers = users.filter(user => user.isVerified).length;

				setUserStats({
					totalUsers,
					newUsersToday,
					activeUsers,
					churnRate: "2.4%", // Táº¡m thá»i giá»¯ nguyÃªn
				});
			} catch (error) {
				console.error('Lá»—i:', error);
			}
		};

		fetchUserStats();
	}, []);

	return (
		<div className='flex-1 overflow-auto relative z-10'>
			<Header title='NgÆ°á»i dÃ¹ng' />
			<main className='max-w-7xl mx-auto py-6 px-4 lg:px-8'>
				{/* STATS */}
				<motion.div
					className='grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8'
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					transition={{ duration: 1 }}
				>
					<StatCard
						name='Tá»•ng ngÆ°á»i dÃ¹ng'
						icon={UsersIcon}
						value={userStats.totalUsers.toLocaleString()}
						color='#6366F1'
					/>
					<StatCard name='NgÆ°á»i dÃ¹ng má»›i hÃ´m nay' icon={UserPlus} value={userStats.newUsersToday} color='#10B981' />
					<StatCard
						name='ÄÃ£ kÃ­ch hoáº¡t'
						icon={UserCheck}
						value={userStats.activeUsers.toLocaleString()}
						color='#F59E0B'
					/>
				</motion.div>
				<UsersTable />

				{/* USER CHARTS */}
				<div className='grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8'>
					<UserGrowthChart />
					{/* <UserActivityHeatmap />
					<UserDemographicsChart /> */}
				</div>
			</main>
		</div>
	);
};

export default UsersPage;

```

### client\src\pages\AllRole\RegisterPage.jsx
```jsx

```

### client\src\redux\store.js
```js
import { configureStore } from '@reduxjs/toolkit';
import counterReducer from './slices/counterSlice'; // Äáº£m báº£o ráº±ng Ä‘Æ°á»ng dáº«n chÃ­nh xÃ¡c

const store = configureStore({
  reducer: {
    counter: counterReducer
  }
});

export default store;

```

### client\src\redux\slices\counterSlice.js
```js
import { createSlice } from '@reduxjs/toolkit';

export const counterSlice = createSlice({
  name: 'counter',
  initialState: {
    value: 0
  },
  reducers: {
    increment: (state) => {
      state.value += 1;
    },
    decrement: (state) => {
      state.value -= 1;
    }
  }
});

export const { increment, decrement } = counterSlice.actions;
export default counterSlice.reducer;

```

### config\cloudinary.js
```js
// config/cloudinary.js
require('dotenv').config();
const cloudinary = require('cloudinary').v2;

cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME, // TÃªn cloud cá»§a báº¡n
  api_key: process.env.CLOUDINARY_API_KEY,       // API Key cá»§a báº¡n
  api_secret: process.env.CLOUDINARY_API_SECRET,  // API Secret cá»§a báº¡n
});


module.exports = cloudinary;

```

### config\db.js
```js
const mongoose = require('mongoose');
require('dotenv').config(); // Äá»c biáº¿n mÃ´i trÆ°á»ng tá»« file .env

const mongoURI = process.env.MONGO_URI; // Láº¥y URI tá»« file .env

const connectDB = async () => {
  try {
    await mongoose.connect(mongoURI);
    console.log('MongoDB Ä‘Æ°á»£c káº¿t ná»‘i thÃ nh cÃ´ng');
  } catch (err) {
    console.error('Failed to connect to MongoDB', err);
    process.exit(1); // Dá»«ng á»©ng dá»¥ng náº¿u khÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c
  }
};

module.exports = connectDB;


```

### controllers\userController.js
```js
const User = require('../models/User');
const bcrypt = require('bcryptjs');

// ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng
exports.register = async (req, res) => {
  try {
    const { name, email, password } = req.body;
    const hashedPassword = await bcrypt.hash(password, 12);
    const newUser = new User({ name, email, password: hashedPassword });
    await newUser.save();
    res.status(201).json({ message: 'User registered successfully!' });
  } catch (error) {
    res.status(500).json({ error: 'Failed to register user' });
  }
};

// ÄÄƒng nháº­p ngÆ°á»i dÃ¹ng
exports.login = async (req, res) => {
  try {
    const { email, password } = req.body;
    const user = await User.findOne({ email });
    if (!user || !(await bcrypt.compare(password, user.password))) {
      return res.status(401).json({ error: 'Invalid credentials' });
    }
    res.status(200).json({ message: 'Logged in successfully' });
  } catch (error) {
    res.status(500).json({ error: 'Login failed' });
  }
};

```

### middleware\adminAuth.js
```js
const jwt = require('jsonwebtoken');
const User = require('../models/User');

const adminAuth = async (req, res, next) => {
  try {
    // Láº¥y token tá»« cookie
    const token = req.cookies.token;
    
    // Kiá»ƒm tra xem token cÃ³ tá»“n táº¡i khÃ´ng
    if (!token) {
      return res.status(401).json({ msg: 'ChÆ°a xÃ¡c thá»±c, vui lÃ²ng Ä‘Äƒng nháº­p' });
    }

    // XÃ¡c thá»±c token
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    
    // Láº¥y thÃ´ng tin user Ä‘á»ƒ kiá»ƒm tra role
    const user = await User.findById(decoded.userId);
    if (!user) {
      return res.status(404).json({ msg: 'NgÆ°á»i dÃ¹ng khÃ´ng tá»“n táº¡i' });
    }

    // Kiá»ƒm tra quyá»n Admin
    if (user.role !== 'Admin') {
      return res.status(403).json({ msg: 'KhÃ´ng cÃ³ quyá»n truy cáº­p' });
    }

    req.userId = decoded.userId;
    req.userRole = user.role;
    next();
    
  } catch (err) {
    return res.status(403).json({ msg: 'Token khÃ´ng há»£p lá»‡' });
  }
};

module.exports = adminAuth;
```

### middleware\auth.js
```js
const jwt = require('jsonwebtoken');

const auth = (req, res, next) => {
  // Láº¥y token tá»« cookie
  const token = req.cookies.token;
  // Kiá»ƒm tra xem token cÃ³ tá»“n táº¡i khÃ´ng
  if (!token) {
    console.log("Token khÃ´ng tá»“n táº¡i.");
    return res.status(401).json({ msg: 'ChÆ°a xÃ¡c thá»±c, vui lÃ²ng Ä‘Äƒng nháº­p' });
  }
  try {
    // XÃ¡c thá»±c token
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.userId = decoded.userId; // LÆ°u userId vÃ o request Ä‘á»ƒ sá»­ dá»¥ng trong cÃ¡c route khÃ¡c
    next(); // Cho phÃ©p tiáº¿p tá»¥c Ä‘áº¿n route tiáº¿p theo
  } catch (err) {
    return res.status(403).json({ msg: 'ChÆ°a cÃ³ Token' });
  }
};

module.exports = auth;

```

### middleware\bookingValidation.js
```js
const Room = require('../models/Room');
const Booking = require('../models/Booking');

// Middleware kiá»ƒm tra tÃ¬nh tráº¡ng phÃ²ng trÆ°á»›c khi booking
const checkRoomAvailability = async (req, res, next) => {
  try {
    const { roomId, checkInDate, checkOutDate } = req.body;
    
    if (!roomId || !checkInDate || !checkOutDate) {
      return res.status(400).json({ msg: 'Thiáº¿u thÃ´ng tin phÃ²ng hoáº·c ngÃ y' });
    }

    // Kiá»ƒm tra phÃ²ng cÃ³ tá»“n táº¡i khÃ´ng
    const room = await Room.findById(roomId);
    if (!room) {
      return res.status(404).json({ msg: 'PhÃ²ng khÃ´ng tá»“n táº¡i' });
    }

    // Kiá»ƒm tra phÃ²ng cÃ³ available khÃ´ng
    if (!room.availability) {
      return res.status(400).json({ msg: 'PhÃ²ng hiá»‡n khÃ´ng kháº£ dá»¥ng' });
    }

    const checkIn = new Date(checkInDate);
    const checkOut = new Date(checkOutDate);

    // Kiá»ƒm tra overlap vá»›i cÃ¡c booking Ä‘Ã£ cÃ³
    const overlappingBookings = await Booking.find({
      room: roomId,
      $or: [
        {
          $and: [
            { checkInDate: { $lte: checkIn } },
            { checkOutDate: { $gt: checkIn } }
          ]
        },
        {
          $and: [
            { checkInDate: { $lt: checkOut } },
            { checkOutDate: { $gte: checkOut } }
          ]
        },
        {
          $and: [
            { checkInDate: { $gte: checkIn } },
            { checkOutDate: { $lte: checkOut } }
          ]
        }
      ],
      paymentStatus: { $in: ['Pending', 'Complete', 'CheckIn'] } // KhÃ´ng tÃ­nh cÃ¡c booking Ä‘Ã£ Done
    });

    if (overlappingBookings.length > 0) {
      return res.status(400).json({ 
        msg: 'PhÃ²ng Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t trong thá»i gian nÃ y',
        conflictingBookings: overlappingBookings.map(b => ({
          checkIn: b.checkInDate,
          checkOut: b.checkOutDate
        }))
      });
    }

    // ThÃªm thÃ´ng tin phÃ²ng vÃ o request Ä‘á»ƒ sá»­ dá»¥ng á»Ÿ middleware tiáº¿p theo
    req.room = room;
    next();

  } catch (error) {
    console.error('Lá»—i kiá»ƒm tra tÃ¬nh tráº¡ng phÃ²ng:', error);
    res.status(500).json({ msg: 'Lá»—i server khi kiá»ƒm tra tÃ¬nh tráº¡ng phÃ²ng' });
  }
};

// Middleware tÃ­nh toÃ¡n giÃ¡ chÃ­nh xÃ¡c
const calculatePrice = (req, res, next) => {
  try {
    const { checkInDate, checkOutDate } = req.body;
    const room = req.room;

    const checkIn = new Date(checkInDate);
    const checkOut = new Date(checkOutDate);
    
    // TÃ­nh sá»‘ Ä‘Ãªm
    const timeDiff = checkOut.getTime() - checkIn.getTime();
    const numberOfNights = Math.ceil(timeDiff / (1000 * 3600 * 24));

    if (numberOfNights <= 0) {
      return res.status(400).json({ msg: 'Sá»‘ Ä‘Ãªm pháº£i lá»›n hÆ¡n 0' });
    }

    const totalPrice = room.price * numberOfNights;
    
    // Kiá»ƒm tra giÃ¡ tá»« client cÃ³ khá»›p khÃ´ng
    if (req.body.priceBooking && Math.abs(req.body.priceBooking - totalPrice) > 0.01) {
      return res.status(400).json({ 
        msg: 'GiÃ¡ khÃ´ng khá»›p',
        calculatedPrice: totalPrice,
        submittedPrice: req.body.priceBooking
      });
    }

    req.calculatedPrice = totalPrice;
    req.numberOfNights = numberOfNights;
    next();

  } catch (error) {
    console.error('Lá»—i tÃ­nh toÃ¡n giÃ¡:', error);
    res.status(500).json({ msg: 'Lá»—i server khi tÃ­nh toÃ¡n giÃ¡' });
  }
};

module.exports = {
  checkRoomAvailability,
  calculatePrice
};
```

### middleware\logger.js
```js
const fs = require('fs');
const path = require('path');

// Táº¡o thÆ° má»¥c logs náº¿u chÆ°a tá»“n táº¡i
const logsDir = path.join(__dirname, '../logs');
if (!fs.existsSync(logsDir)) {
  fs.mkdirSync(logsDir);
}

const logToFile = (level, message, metadata = {}) => {
  const timestamp = new Date().toISOString();
  const logEntry = {
    timestamp,
    level,
    message,
    ...metadata
  };

  const logString = JSON.stringify(logEntry) + '\n';
  const filename = `${level}-${new Date().toISOString().split('T')[0]}.log`;
  const filepath = path.join(logsDir, filename);

  fs.appendFileSync(filepath, logString);
};

const logger = {
  info: (message, metadata) => {
    console.log(`[INFO] ${message}`, metadata || '');
    logToFile('info', message, metadata);
  },
  warn: (message, metadata) => {
    console.warn(`[WARN] ${message}`, metadata || '');
    logToFile('warn', message, metadata);
  },
  error: (message, metadata) => {
    console.error(`[ERROR] ${message}`, metadata || '');
    logToFile('error', message, metadata);
  },
  security: (message, metadata) => {
    console.log(`[SECURITY] ${message}`, metadata || '');
    logToFile('security', message, metadata);
  }
};

// Middleware logging cho security events
const securityLogger = (req, res, next) => {
  // Log cÃ¡c request Ä‘áº¿n endpoints nháº¡y cáº£m
  const sensitiveRoutes = ['/login', '/register', '/payment', '/admin'];
  const isSensitive = sensitiveRoutes.some(route => req.path.includes(route));

  if (isSensitive) {
    logger.security(`Sensitive endpoint accessed: ${req.method} ${req.path}`, {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      timestamp: new Date().toISOString()
    });
  }

  next();
};

module.exports = { logger, securityLogger };
```

### middleware\rateLimiter.js
```js
const rateLimit = require('express-rate-limit');

// Rate limit cho login Ä‘á»ƒ trÃ¡nh brute force
const loginLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 phÃºt
  max: 5, // Tá»‘i Ä‘a 5 láº§n thá»­ trong 15 phÃºt
  message: {
    msg: 'QuÃ¡ nhiá»u láº§n Ä‘Äƒng nháº­p tháº¥t báº¡i, vui lÃ²ng thá»­ láº¡i sau 15 phÃºt'
  },
  skipSuccessfulRequests: true,
  standardHeaders: true,
  legacyHeaders: false,
});

// Rate limit chung cho API
const generalLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 phÃºt
  max: 100, // Tá»‘i Ä‘a 100 requests má»—i 15 phÃºt
  message: {
    msg: 'QuÃ¡ nhiá»u requests, vui lÃ²ng thá»­ láº¡i sau'
  },
  standardHeaders: true,
  legacyHeaders: false,
});

// Rate limit nghiÃªm ngáº·t cho endpoints nháº¡y cáº£m
const strictLimiter = rateLimit({
  windowMs: 60 * 60 * 1000, // 1 giá»
  max: 10, // Tá»‘i Ä‘a 10 requests má»—i giá»
  message: {
    msg: 'QuÃ¡ nhiá»u requests cho endpoint nÃ y, vui lÃ²ng thá»­ láº¡i sau 1 giá»'
  },
  standardHeaders: true,
  legacyHeaders: false,
});

module.exports = {
  loginLimiter,
  generalLimiter,
  strictLimiter
};
```

### middleware\upload.js
```js
//upload.js
const multer = require('multer');
const { CloudinaryStorage } = require('multer-storage-cloudinary');
const cloudinary = require('../config/cloudinary'); // Kiá»ƒm tra Ä‘Æ°á»ng dáº«n

// Cáº¥u hÃ¬nh lÆ°u trá»¯ cho hotel images
const hotelStorage = new CloudinaryStorage({
  cloudinary: cloudinary,
  params: {
    folder: 'CheckInn_Data/hotels', // LÆ°u vÃ o thÆ° má»¥c CheckInn_Data/hotels
    allowed_formats: ['jpg', 'png', 'jpeg'],
  },
});

// Cáº¥u hÃ¬nh lÆ°u trá»¯ cho room images  
const roomStorage = new CloudinaryStorage({
  cloudinary: cloudinary,
  params: {
    folder: 'CheckInn_Data/rooms', // LÆ°u vÃ o thÆ° má»¥c CheckInn_Data/rooms
    allowed_formats: ['jpg', 'png', 'jpeg'],
  },
});

// Cáº¥u hÃ¬nh lÆ°u trá»¯ cho avatar images
const avatarStorage = new CloudinaryStorage({
  cloudinary: cloudinary,
  params: {
    folder: 'CheckInn_Data/avatars', // LÆ°u vÃ o thÆ° má»¥c CheckInn_Data/avatars
    allowed_formats: ['jpg', 'png', 'jpeg'],
  },
});

// Cáº¥u hÃ¬nh lÆ°u trá»¯ chung (máº·c Ä‘á»‹nh)
const generalStorage = new CloudinaryStorage({
  cloudinary: cloudinary,
  params: {
    folder: 'CheckInn_Data', // LÆ°u vÃ o thÆ° má»¥c CheckInn_Data
    allowed_formats: ['jpg', 'png', 'jpeg'],
  },
});

const uploadHotel = multer({ storage: hotelStorage });
const uploadRoom = multer({ storage: roomStorage });
const uploadAvatar = multer({ storage: avatarStorage });
const upload = multer({ storage: generalStorage }); // Upload chung

module.exports = {
  upload,          // Upload chung
  uploadHotel,     // Upload cho hotels
  uploadRoom,      // Upload cho rooms  
  uploadAvatar,    // Upload cho avatars
};

```

### middleware\validation.js
```js
const validator = require('validator');

// Validation cho Ä‘Äƒng kÃ½
const validateRegister = (req, res, next) => {
  const { name, email, password } = req.body;
  const errors = [];

  // Validate name
  if (!name || name.trim().length < 2) {
    errors.push('TÃªn pháº£i cÃ³ Ã­t nháº¥t 2 kÃ½ tá»±');
  }

  // Validate email
  if (!email || !validator.isEmail(email)) {
    errors.push('Email khÃ´ng há»£p lá»‡');
  }

  // Validate password
  if (!password || password.length < 6) {
    errors.push('Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±');
  }

  if (!validator.isStrongPassword(password, {
    minLength: 6,
    minLowercase: 1,
    minUppercase: 1,
    minNumbers: 1,
    minSymbols: 0
  })) {
    errors.push('Máº­t kháº©u pháº£i chá»©a Ã­t nháº¥t 1 chá»¯ hoa, 1 chá»¯ thÆ°á»ng vÃ  1 sá»‘');
  }

  if (errors.length > 0) {
    return res.status(400).json({ msg: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡', errors });
  }

  next();
};

// Validation cho Ä‘Äƒng nháº­p
const validateLogin = (req, res, next) => {
  const { email, password } = req.body;
  const errors = [];

  if (!email || !validator.isEmail(email)) {
    errors.push('Email khÃ´ng há»£p lá»‡');
  }

  if (!password || password.length === 0) {
    errors.push('Máº­t kháº©u khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
  }

  if (errors.length > 0) {
    return res.status(400).json({ msg: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡', errors });
  }

  next();
};

// Validation cho booking
const validateBooking = (req, res, next) => {
  const { checkInDate, checkOutDate, phoneBooking, emailBooking } = req.body;
  const errors = [];

  // Validate dates
  if (!checkInDate || !checkOutDate) {
    errors.push('NgÃ y check-in vÃ  check-out lÃ  báº¯t buá»™c');
  }

  const checkIn = new Date(checkInDate);
  const checkOut = new Date(checkOutDate);
  const today = new Date();
  today.setHours(0, 0, 0, 0);

  if (checkIn < today) {
    errors.push('NgÃ y check-in khÃ´ng thá»ƒ lÃ  ngÃ y trong quÃ¡ khá»©');
  }

  if (checkOut <= checkIn) {
    errors.push('NgÃ y check-out pháº£i sau ngÃ y check-in');
  }

  // Validate phone
  if (!phoneBooking || !validator.isMobilePhone(phoneBooking, 'vi-VN')) {
    errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng há»£p lá»‡');
  }

  // Validate email
  if (!emailBooking || !validator.isEmail(emailBooking)) {
    errors.push('Email khÃ´ng há»£p lá»‡');
  }

  if (errors.length > 0) {
    return res.status(400).json({ msg: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡', errors });
  }

  next();
};

// Sanitize input Ä‘á»ƒ trÃ¡nh XSS
const sanitizeInput = (req, res, next) => {
  for (let key in req.body) {
    if (typeof req.body[key] === 'string') {
      req.body[key] = validator.escape(req.body[key]);
    }
  }
  next();
};

module.exports = {
  validateRegister,
  validateLogin,
  validateBooking,
  sanitizeInput
};
```

### models\Booking.js
```js
const mongoose = require("mongoose");

const BookingSchema = new mongoose.Schema({
  user: { type: mongoose.Schema.Types.ObjectId, ref: "User" },
  room: { type: mongoose.Schema.Types.ObjectId, ref: "Room", required: true },
  bookingDate: { type: Date, default: Date.now },
  checkInDate: { type: Date, required: true },
  checkOutDate: { type: Date, required: true },
  phoneBooking: { type: String, required: true },
  emailBooking: { type: String, required: true },
  paymentStatus: {
    type: String,
    enum: ["Pending", "Complete", "CheckIn", "Done"],
    default: "Pending",
  },
  orderId: { type: String, required: true },
  priceBooking: { type: Number, required: true },
});



module.exports = mongoose.model("Booking", BookingSchema);

```

### models\Favorite.js
```js
const mongoose = require('mongoose');

const favoriteSchema = new mongoose.Schema({
  userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
  hotelId: { type: mongoose.Schema.Types.ObjectId, ref: 'Hotel', required: true },
  createdAt: { type: Date, default: Date.now } // NgÃ y Ä‘Ã¡nh dáº¥u yÃªu thÃ­ch
});

module.exports = mongoose.model('Favorite', favoriteSchema);

```

### models\Hotel.js
```js
const mongoose = require('mongoose');

const hotelSchema = new mongoose.Schema({
  name: { type: String, required: true },
  location: { type: String, required: true },
  description: { type: String },
  manager: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
  rooms: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Room' }],
  imagehotel: [{ type: String }],
  stars: { type: Number, min: 1, max: 5, required: false }
});

// Xuáº¥t mÃ´ hÃ¬nh Hotel
module.exports = mongoose.model('Hotel', hotelSchema);

```

### models\Rate.js
```js
const mongoose = require('mongoose');

const rateSchema = new mongoose.Schema({
  hotel: { type: mongoose.Schema.Types.ObjectId, ref: 'Hotel', required: true }, // KhÃ¡ch sáº¡n Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡
  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },  // NgÆ°á»i dÃ¹ng Ä‘Ã¡nh giÃ¡
  rating: { type: Number, min: 1, max: 10, required: true }, // Äiá»ƒm Ä‘Ã¡nh giÃ¡ (tá»« 1 Ä‘áº¿n 10)
  comment: { type: String }, // BÃ¬nh luáº­n cá»§a ngÆ°á»i dÃ¹ng (náº¿u cÃ³)
  date: { type: Date, default: Date.now }, // NgÃ y Ä‘Ã¡nh giÃ¡
  lastModified: { type: Date, default: Date.now }, // NgÃ y chá»‰nh sá»­a gáº§n nháº¥t
});

// Middleware Ä‘á»ƒ cáº­p nháº­t lastModified khi Ä‘Ã¡nh giÃ¡ bá»‹ chá»‰nh sá»­a
rateSchema.pre('save', function (next) {
  if (this.isModified('rating') || this.isModified('comment')) {
    this.lastModified = Date.now();
  }
  next();
});

module.exports = mongoose.model('Rate', rateSchema);

```

### models\Room.js
```js
const mongoose = require("mongoose");

const roomSchema = new mongoose.Schema({
  hotel: { type: mongoose.Schema.Types.ObjectId, ref: "Hotel", required: true },
  type: {
    type: String,
    required: true,
    enum: [
      "PhÃ²ng thÆ°á»ng 1 giÆ°á»ng lá»›n",
      "PhÃ²ng thÆ°á»ng 2 giÆ°á»ng nhá»",
      "PhÃ²ng vip 1 giÆ°á»ng lá»›n",
      "PhÃ²ng vip 2 giÆ°á»ng nhá»",
    ], // Giá»›i háº¡n cÃ¡c loáº¡i phÃ²ng
  },
  price: { type: Number, required: true },
  availability: { type: Boolean, default: true },
  imageroom: [{ type: String }], // Máº£ng cÃ¡c URL áº£nh
});

// Middleware xÃ³a tham chiáº¿u phÃ²ng trong model Hotel khi xÃ³a phÃ²ng
roomSchema.pre("findOneAndDelete", async function (next) {
  try {
    // Láº¥y ID phÃ²ng tá»« truy váº¥n
    const room = await this.model.findOne(this.getFilter());

    // TÃ¬m khÃ¡ch sáº¡n mÃ  phÃ²ng nÃ y thuá»™c vá»
    const hotel = await mongoose.model("Hotel").findById(room.hotel);

    if (hotel) {
      // Loáº¡i bá» ID cá»§a phÃ²ng khá»i danh sÃ¡ch rooms cá»§a khÃ¡ch sáº¡n
      hotel.rooms = hotel.rooms.filter(
        (roomId) => roomId.toString() !== room._id.toString()
      );

      // LÆ°u láº¡i tÃ i liá»‡u khÃ¡ch sáº¡n sau khi Ä‘Ã£ cáº­p nháº­t danh sÃ¡ch rooms
      await hotel.save();
    }

    next(); // Tiáº¿p tá»¥c Ä‘áº¿n bÆ°á»›c tiáº¿p theo
  } catch (error) {
    next(error); // Gá»i hÃ m next vá»›i lá»—i náº¿u cÃ³
  }
});

module.exports = mongoose.model("Room", roomSchema);

```

### models\User.js
```js
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');


const userSchema = new mongoose.Schema({
  name: { type: String, required: true },
  email: { type: String, required: true, unique: true },
  password: { type: String, required: true },
  role: { type: String, enum: ['Customer', 'HotelManager', 'Admin'], default: 'Customer' },
  isVerified: { type: Boolean, default: false }, // Optional
  registrationDate: { type: Date, default: Date.now }, // NgÃ y Ä‘Äƒng kÃ½
  age: { type: Number,  default: null  }, // Tuá»•i
  avatar: { type: String, default: '' },
  resetPasswordToken: { type: String, default: null }, // Token dÃ¹ng Ä‘á»ƒ Ä‘áº·t láº¡i máº­t kháº©u
  resetPasswordExpires: { type: Date, default: null }, // Thá»i gian háº¿t háº¡n cá»§a token
});

// MÃ£ hÃ³a máº­t kháº©u trÆ°á»›c khi lÆ°u
userSchema.pre('save', async function(next) {
  if (!this.isModified('password')) return next();

  const salt = await bcrypt.genSalt(10);
  this.password = await bcrypt.hash(this.password, salt);
  next();
});

// PhÆ°Æ¡ng thá»©c Ä‘á»ƒ so sÃ¡nh máº­t kháº©u
userSchema.methods.comparePassword = async function(candidatePassword) {
  return await bcrypt.compare(candidatePassword, this.password);
};

module.exports = mongoose.model('User', userSchema);

```
